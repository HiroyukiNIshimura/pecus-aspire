# ワークスペース参加戦略（インスタント・ジョイン）

作成日: 2026-01-17
ステータス: 策定中

## 概要

Pecus Aspire (Coati) のプロダクトビジョンである「性善説に基づく透明性」と「自律的なチーム」を体現するため、ワークスペースへの参加フローを**承認不要の即時参加（Plan A: Instant Join）**とします。

ただし、無秩序な編集を防ぐため、初期権限は **Viewer（閲覧者）** とします。

## 1. 背景と目的

### 現状の課題
- ワークスペースが存在していても、参加するにはチャット等での口頭依頼が必要である（「報告・連絡・相談」の排除というミッションに反する）。
- 「中身を見てみたいだけ」のユーザーにとって、参加依頼は心理的ハードルが高い。

### 目的
- **透明性の確保:** 組織内のあらゆる活動に誰でもアクセスできるようにする。
- **フロー効率の最大化:** 興味を持った瞬間に情報を閲覧可能にし、承認待ち時間をゼロにする。
- **秩序の維持:** 閲覧は自由だが、編集にはコミットメント（権限昇格）を求めることで、データの整合性を守る。

## 2. 実装仕様

### 2.1. アクション
ユーザーはワークスペース一覧やダッシュボードのトレンド表示から、未参加のワークスペースに対して「参加」アクションを実行できます。

### 2.2. デフォルト権限
参加時の権限は **`Viewer (1)`** に固定されます。

| Role | 権限レベル | できること | できないこと |
|------|-----------|------------|--------------|
| Viewer | 読み取り専用 | 閲覧、検索、ピン留め | タスク作成、編集、削除、ステータス変更 |
| Member | 編集者 | 上記 + 編集操作全般 | ワークスペース設定変更、メンバー管理 |

### 2.3. API設計
新規エンドポイントを追加します。

- **Endpoint:** `POST /api/workspaces/{id}/join`
- **Request:** Empty body (or optional motivation)
- **Response:** 成功時 200 OK
- **Logic:**
  1. 対象ワークスペースが存在するか確認。
  2. ユーザーが既にメンバーでないか確認。
  3. ユーザーを `Viewer` ロールで追加。
  4. オーナーへの通知（Log/Notification）は行うが、承認は求めない。

## 3. UXフロー

1.  **発見・参加:**
    - ダッシュボードで「最近活発なワークスペース」を発見。
    - 「参加」ボタンをクリック → 即座にメンバーリストに追加され、中身を閲覧可能になる。

2.  **閲覧（Viewer）:**
    - ドキュメントやタスクの進行状況を確認。
    - この段階では意図しない操作（誤ってタスクを完了にしてしまう等）のリスクはない。

3.  **貢献（昇格）:**
    - タスクに参加したり、コメントしたりする必要性が出た場合。
    - UI上に「編集するにはメンバー権限が必要です」といったヒントと共に、オーナーへの「権限リクエスト」動線を表示する。

## 4. この設計のメリット

- **承認のボトルネック解消:** オーナーの作業待ちが発生しない。
- **安全性:** デフォルトが `Viewer` であるため、興味本位のユーザーが破壊的な操作をするリスクがない。
- **心理的安全性:** 「見るだけなら迷惑をかけない」という安心感が、組織内の横断的な情報共有を促進する。
