{"version":3,"sources":["../src/nodes/DateTimeNode/DateTimeNode.css","../src/nodes/DateTimeNode/DateTimeComponent.tsx","../src/nodes/DateTimeNode/DateTimeNode.tsx","../src/nodes/EmojiNode.tsx","../../../node_modules/react-error-boundary/lib/context/ErrorBoundaryContext.ts","../../../node_modules/react-error-boundary/lib/components/ErrorBoundary.tsx","../../../node_modules/react-error-boundary/lib/utils/isErrorBoundaryContext.ts","../../../node_modules/react-error-boundary/lib/utils/assertErrorBoundaryContext.ts","../../../node_modules/react-error-boundary/lib/hooks/useErrorBoundary.ts","../../../node_modules/react-error-boundary/lib/utils/withErrorBoundary.ts","../src/ui/EquationEditor.css","../src/ui/EquationEditor.tsx","../src/ui/KatexRenderer.tsx","../src/nodes/EquationComponent.tsx","../src/nodes/EquationNode.tsx","../src/nodes/KeywordNode.ts","../src/nodes/ImageNode.css","../src/context/SharedHistoryContext.tsx","../src/plugins/EmojisPlugin/index.ts","../src/utils/url.ts","../src/plugins/LinkPlugin/index.tsx","../src/nodes/MentionNode.ts","../src/plugins/MentionsPlugin/index.tsx","../src/ui/ContentEditable.css","../src/ui/ContentEditable.tsx","../src/ui/ImageResizer.tsx","../src/nodes/ImageComponent.tsx","../src/nodes/ImageNode.tsx","../src/nodes/StickyNode.css","../src/themes/StickyEditorTheme.css","../src/themes/NotionLikeEditorTheme.css","../src/themes/NotionLikeEditorTheme.ts","../src/themes/StickyEditorTheme.ts","../src/nodes/StickyComponent.tsx","../src/nodes/StickyNode.tsx","../src/nodes/AutocompleteNode.tsx","../src/plugins/AutocompletePlugin/index.tsx","../src/context/ToolbarContext.tsx","../src/plugins/CollapsiblePlugin/CollapsibleContainerNode.ts","../src/plugins/CollapsiblePlugin/CollapsibleUtils.ts","../src/plugins/CollapsiblePlugin/CollapsibleContentNode.ts","../src/plugins/CollapsiblePlugin/CollapsibleTitleNode.ts","../src/nodes/index.ts","../src/nodes/FigmaNode.tsx","../src/nodes/LayoutContainerNode.ts","../src/nodes/LayoutItemNode.ts","../src/nodes/PageBreakNode/index.tsx","../src/nodes/SpecialTextNode.tsx","../src/nodes/TweetNode.tsx","../src/nodes/YouTubeNode.tsx","../src/nodes/NotionLikeEditorNodes.ts"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *\n */\n\n.dateTimePill {\n  background: var(--color-gray-500) !important;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  padding: 0px 4px 0px 4px;\n}\n.dateTimePill.selected {\n  outline: 2px solid rgb(60, 132, 244);\n}\n.dateTimePill:hover {\n  background: #f2f2f2;\n}\n.dateTimePicker {\n  background: #fff;\n  border: 1px solid #ddd;\n  box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.3);\n  border-radius: 8px;\n  padding: 0px 6px 0px 10px;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport type { JSX } from 'react';\n\nimport 'react-day-picker/style.css';\nimport './DateTimeNode.css';\n\nimport {\n  autoUpdate,\n  FloatingFocusManager,\n  FloatingOverlay,\n  FloatingPortal,\n  flip,\n  offset,\n  shift,\n  useDismiss,\n  useFloating,\n  useInteractions,\n  useRole,\n} from '@floating-ui/react';\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';\nimport { useLexicalNodeSelection } from '@lexical/react/useLexicalNodeSelection';\nimport { setHours, setMinutes } from 'date-fns';\nimport { $getNodeByKey, type NodeKey } from 'lexical';\nimport type * as React from 'react';\nimport { useEffect, useRef, useState } from 'react';\nimport { DayPicker } from 'react-day-picker';\n\nimport { $isDateTimeNode, type DateTimeNode } from './DateTimeNode';\n\nconst userTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n\nexport default function DateTimeComponent({\n  dateTime,\n  nodeKey,\n}: {\n  dateTime: Date | undefined;\n  nodeKey: NodeKey;\n}): JSX.Element {\n  const [editor] = useLexicalComposerContext();\n  const [isOpen, setIsOpen] = useState(false);\n  const ref = useRef(null);\n  const [selected, setSelected] = useState(dateTime);\n  const [includeTime, setIncludeTime] = useState(() => {\n    if (dateTime === undefined) {\n      return false;\n    }\n    const hours = dateTime?.getHours();\n    const minutes = dateTime?.getMinutes();\n    return hours !== 0 || minutes !== 0;\n  });\n  const [timeValue, setTimeValue] = useState(() => {\n    if (dateTime === undefined) {\n      return '00:00';\n    }\n    const hours = dateTime?.getHours();\n    const minutes = dateTime?.getMinutes();\n    if (hours !== 0 || minutes !== 0) {\n      return `${hours?.toString().padStart(2, '0')}:${minutes?.toString().padStart(2, '0')}`;\n    }\n    return '00:00';\n  });\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [isNodeSelected, _setNodeSelected, _clearNodeSelection] = useLexicalNodeSelection(nodeKey);\n\n  const { refs, floatingStyles, context } = useFloating({\n    elements: {\n      reference: ref.current,\n    },\n    middleware: [\n      offset(5),\n      flip({\n        fallbackPlacements: ['top-start'],\n      }),\n      shift({ padding: 10 }),\n    ],\n    onOpenChange: setIsOpen,\n    open: isOpen,\n    placement: 'bottom-start',\n    strategy: 'fixed',\n    whileElementsMounted: autoUpdate,\n  });\n\n  const role = useRole(context, { role: 'dialog' });\n  const dismiss = useDismiss(context);\n\n  const { getFloatingProps } = useInteractions([role, dismiss]);\n\n  useEffect(() => {\n    const dateTimePillRef = ref.current as HTMLElement | null;\n    function onClick(e: MouseEvent) {\n      e.preventDefault();\n      setIsOpen(true);\n    }\n\n    if (dateTimePillRef) {\n      dateTimePillRef.addEventListener('click', onClick);\n    }\n\n    return () => {\n      if (dateTimePillRef) {\n        dateTimePillRef.removeEventListener('click', onClick);\n      }\n    };\n  }, []);\n\n  const withDateTimeNode = (cb: (node: DateTimeNode) => void, onUpdate?: () => void): void => {\n    editor.update(\n      () => {\n        const node = $getNodeByKey(nodeKey);\n        if ($isDateTimeNode(node)) {\n          cb(node);\n        }\n      },\n      { onUpdate },\n    );\n  };\n\n  const handleCheckboxChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    withDateTimeNode((node) => {\n      if (e.target.checked) {\n        setIncludeTime(true);\n      } else {\n        if (selected) {\n          const newSelectedDate = setHours(setMinutes(selected, 0), 0);\n          node.setDateTime(newSelectedDate);\n        }\n        setIncludeTime(false);\n        setTimeValue('00:00');\n      }\n    });\n  };\n\n  const handleTimeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    withDateTimeNode((node) => {\n      const time = e.target.value;\n      if (!selected) {\n        setTimeValue(time);\n        return;\n      }\n      const [hours, minutes] = time.split(':').map((str: string) => parseInt(str, 10));\n      const newSelectedDate = setHours(setMinutes(selected, minutes), hours);\n      setSelected(newSelectedDate);\n      node.setDateTime(newSelectedDate);\n      setTimeValue(time);\n    });\n  };\n\n  const handleDaySelect = (date: Date | undefined) => {\n    withDateTimeNode((node) => {\n      if (!timeValue || !date) {\n        setSelected(date);\n        return;\n      }\n      const [hours, minutes] = timeValue.split(':').map((str) => parseInt(str, 10));\n      const newDate = new Date(date.getFullYear(), date.getMonth(), date.getDate(), hours, minutes);\n      node.setDateTime(newDate);\n      setSelected(newDate);\n    });\n  };\n\n  const options: Intl.DateTimeFormatOptions = {\n    weekday: 'long',\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n  };\n\n  return (\n    <div\n      className={`dateTimePill ${isNodeSelected ? 'selected' : ''}`}\n      ref={ref}\n      style={{ cursor: 'pointer', width: 'fit-content' }}\n    >\n      {dateTime?.toLocaleDateString(undefined, options) + (includeTime ? ` ${timeValue}` : '') || 'Invalid Date'}\n      {isOpen && (\n        <FloatingPortal>\n          <FloatingOverlay\n            lockScroll={true}\n            style={{\n              zIndex: 2000,\n            }}\n          >\n            <FloatingFocusManager context={context} initialFocus={-1}>\n              <div\n                className={'notion-like-editor dateTimePicker'}\n                ref={refs.setFloating}\n                style={{\n                  ...floatingStyles,\n                  zIndex: 2000,\n                }}\n                {...getFloatingProps()}\n              >\n                <DayPicker mode=\"single\" selected={selected} onSelect={handleDaySelect} />\n                <div className=\"includeTime\">\n                  <label htmlFor=\"includeTime\" style={{ display: 'inline-flex', alignItems: 'center', gap: '6px' }}>\n                    <input id=\"includeTime\" type=\"checkbox\" checked={includeTime} onChange={handleCheckboxChange} />\n                    <span>Include time</span>\n                  </label>\n                </div>\n                {includeTime && (\n                  <input\n                    id=\"time\"\n                    type=\"time\"\n                    value={timeValue}\n                    onChange={handleTimeChange}\n                    style={{\n                      marginTop: '8px',\n                      padding: '4px',\n                      border: '1px solid #ccc',\n                      borderRadius: '4px',\n                    }}\n                  />\n                )}\n                <p style={{ fontSize: '12px', color: '#666', marginTop: '8px' }}>{userTimeZone}</p>\n              </div>\n            </FloatingFocusManager>\n          </FloatingOverlay>\n        </FloatingPortal>\n      )}\n    </div>\n  );\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport {\n  $getState,\n  $setState,\n  buildImportMap,\n  createState,\n  DecoratorNode,\n  type DOMConversionOutput,\n  type DOMExportOutput,\n  type LexicalNode,\n  type SerializedLexicalNode,\n  type Spread,\n  type StateConfigValue,\n  type StateValueOrUpdater,\n} from 'lexical';\nimport type { JSX } from 'react';\nimport * as React from 'react';\n\nconst DateTimeComponent = React.lazy(() => import('./DateTimeComponent'));\n\nconst getDateTimeText = (dateTime: Date) => {\n  if (dateTime === undefined) {\n    return '';\n  }\n  const hours = dateTime?.getHours();\n  const minutes = dateTime?.getMinutes();\n  return (\n    dateTime.toDateString() +\n    (hours === 0 && minutes === 0 ? '' : ` ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`)\n  );\n};\n\nexport type SerializedDateTimeNode = Spread<\n  {\n    dateTime?: string;\n  },\n  SerializedLexicalNode\n>;\n\nfunction $convertDateTimeElement(domNode: HTMLElement): DOMConversionOutput | null {\n  const dateTimeValue = domNode.getAttribute('data-lexical-datetime');\n  if (dateTimeValue) {\n    const node = $createDateTimeNode(new Date(Date.parse(dateTimeValue)));\n    return { node };\n  }\n  const gDocsDateTimePayload = domNode.getAttribute('data-rich-links');\n  if (!gDocsDateTimePayload) {\n    return null;\n  }\n  const parsed = JSON.parse(gDocsDateTimePayload);\n  const parsedDate = Date.parse(parsed?.dat_df?.dfie_dt || '');\n  if (Number.isNaN(parsedDate)) {\n    return null;\n  }\n  const node = $createDateTimeNode(new Date(parsedDate));\n  return { node };\n}\n\nconst dateTimeState = createState('dateTime', {\n  parse: (v) => new Date(v as string),\n  unparse: (v) => v.toISOString(),\n});\n\nexport class DateTimeNode extends DecoratorNode<JSX.Element> {\n  $config() {\n    return this.config('datetime', {\n      extends: DecoratorNode,\n      importDOM: buildImportMap({\n        span: (domNode) =>\n          domNode.getAttribute('data-lexical-datetime') !== null ||\n          // GDocs Support\n          (domNode.getAttribute('data-rich-links') !== null &&\n            JSON.parse(domNode.getAttribute('data-rich-links') || '{}').type === 'date')\n            ? {\n                conversion: $convertDateTimeElement,\n                priority: 2,\n              }\n            : null,\n      }),\n      stateConfigs: [{ flat: true, stateConfig: dateTimeState }],\n    });\n  }\n\n  getDateTime(): StateConfigValue<typeof dateTimeState> {\n    return $getState(this, dateTimeState);\n  }\n\n  setDateTime(valueOrUpdater: StateValueOrUpdater<typeof dateTimeState>): this {\n    return $setState(this, dateTimeState, valueOrUpdater);\n  }\n\n  getTextContent(): string {\n    const dateTime = this.getDateTime();\n    return getDateTimeText(dateTime);\n  }\n\n  exportDOM(): DOMExportOutput {\n    const element = document.createElement('span');\n    element.textContent = getDateTimeText(this.getDateTime());\n    element.setAttribute('data-lexical-datetime', this.getDateTime()?.toString() || '');\n    return { element };\n  }\n\n  createDOM(): HTMLElement {\n    const element = document.createElement('span');\n    element.setAttribute('data-lexical-datetime', this.getDateTime()?.toString() || '');\n    element.style.display = 'inline-block';\n    return element;\n  }\n\n  updateDOM(): false {\n    return false;\n  }\n\n  isInline(): boolean {\n    return true;\n  }\n\n  decorate(): JSX.Element {\n    return <DateTimeComponent dateTime={this.getDateTime()} nodeKey={this.__key} />;\n  }\n}\n\nexport function $createDateTimeNode(dateTime: Date): DateTimeNode {\n  return new DateTimeNode().setDateTime(dateTime);\n}\n\nexport function $isDateTimeNode(node: LexicalNode | null | undefined): node is DateTimeNode {\n  return node instanceof DateTimeNode;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport type { EditorConfig, LexicalNode, NodeKey, SerializedTextNode, Spread } from 'lexical';\n\nimport { $applyNodeReplacement, TextNode } from 'lexical';\n\nexport type SerializedEmojiNode = Spread<\n  {\n    className: string;\n  },\n  SerializedTextNode\n>;\n\nexport class EmojiNode extends TextNode {\n  __className: string;\n\n  static getType(): string {\n    return 'emoji';\n  }\n\n  static clone(node: EmojiNode): EmojiNode {\n    return new EmojiNode(node.__className, node.__text, node.__key);\n  }\n\n  constructor(className: string, text: string, key?: NodeKey) {\n    super(text, key);\n    this.__className = className;\n  }\n\n  createDOM(config: EditorConfig): HTMLElement {\n    const dom = document.createElement('span');\n    const inner = super.createDOM(config);\n    dom.className = this.__className;\n    inner.className = 'emoji-inner';\n    dom.appendChild(inner);\n    return dom;\n  }\n\n  updateDOM(prevNode: this, dom: HTMLElement, config: EditorConfig): boolean {\n    const inner = dom.firstChild;\n    if (inner === null) {\n      return true;\n    }\n    super.updateDOM(prevNode, inner as HTMLElement, config);\n    return false;\n  }\n\n  static importJSON(serializedNode: SerializedEmojiNode): EmojiNode {\n    return $createEmojiNode(serializedNode.className, serializedNode.text).updateFromJSON(serializedNode);\n  }\n\n  exportJSON(): SerializedEmojiNode {\n    return {\n      ...super.exportJSON(),\n      className: this.getClassName(),\n    };\n  }\n\n  getClassName(): string {\n    const self = this.getLatest();\n    return self.__className;\n  }\n}\n\nexport function $isEmojiNode(node: LexicalNode | null | undefined): node is EmojiNode {\n  return node instanceof EmojiNode;\n}\n\nexport function $createEmojiNode(className: string, emojiText: string): EmojiNode {\n  const node = new EmojiNode(className, emojiText).setMode('token');\n  return $applyNodeReplacement(node);\n}\n","import { createContext } from \"react\";\n\nexport type ErrorBoundaryContextType = {\n  didCatch: boolean;\n  error: Error | null;\n  resetErrorBoundary: (...args: unknown[]) => void;\n};\n\nexport const ErrorBoundaryContext =\n  createContext<ErrorBoundaryContextType | null>(null);\n","import { Component, createElement, type ErrorInfo } from \"react\";\nimport { ErrorBoundaryContext } from \"../context/ErrorBoundaryContext\";\nimport type { ErrorBoundaryProps, FallbackProps } from \"../types\";\n\nconst isDevelopment = import.meta.env.DEV;\n\ntype ErrorBoundaryState =\n  | {\n      didCatch: true;\n      error: Error;\n    }\n  | {\n      didCatch: false;\n      error: null;\n    };\n\nconst initialState: ErrorBoundaryState = {\n  didCatch: false,\n  error: null,\n};\n\n/**\n * A reusable React [error boundary](https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary) component.\n * Wrap this component around other React components to \"catch\" errors and render a fallback UI.\n *\n *\n * ‚ÑπÔ∏è The component provides several ways to render a fallback: `fallback`, `fallbackRender`, and `FallbackComponent`.\n * Refer to the documentation to determine which is best for your application.\n *\n * ‚ÑπÔ∏è This is a **client component**. You can only pass props to it that are serializeable or use it in files that have a `\"use client\";` directive.\n */\nexport class ErrorBoundary extends Component<\n  ErrorBoundaryProps,\n  ErrorBoundaryState\n> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props);\n\n    this.resetErrorBoundary = this.resetErrorBoundary.bind(this);\n    this.state = initialState;\n  }\n\n  static getDerivedStateFromError(error: Error) {\n    return { didCatch: true, error };\n  }\n\n  resetErrorBoundary(...args: unknown[]) {\n    const { error } = this.state;\n\n    if (error !== null) {\n      this.props.onReset?.({\n        args,\n        reason: \"imperative-api\",\n      });\n\n      this.setState(initialState);\n    }\n  }\n\n  componentDidCatch(error: Error, info: ErrorInfo) {\n    this.props.onError?.(error, info);\n  }\n\n  componentDidUpdate(\n    prevProps: ErrorBoundaryProps,\n    prevState: ErrorBoundaryState,\n  ) {\n    const { didCatch } = this.state;\n    const { resetKeys } = this.props;\n\n    // There's an edge case where if the thing that triggered the error happens to *also* be in the resetKeys array,\n    // we'd end up resetting the error boundary immediately.\n    // This would likely trigger a second error to be thrown.\n    // So we make sure that we don't check the resetKeys on the first call of cDU after the error is set.\n\n    if (\n      didCatch &&\n      prevState.error !== null &&\n      hasArrayChanged(prevProps.resetKeys, resetKeys)\n    ) {\n      this.props.onReset?.({\n        next: resetKeys,\n        prev: prevProps.resetKeys,\n        reason: \"keys\",\n      });\n\n      this.setState(initialState);\n    }\n  }\n\n  render() {\n    const { children, fallbackRender, FallbackComponent, fallback } =\n      this.props;\n    const { didCatch, error } = this.state;\n\n    let childToRender = children;\n\n    if (didCatch) {\n      const props: FallbackProps = {\n        error,\n        resetErrorBoundary: this.resetErrorBoundary,\n      };\n\n      if (typeof fallbackRender === \"function\") {\n        childToRender = fallbackRender(props);\n      } else if (FallbackComponent) {\n        childToRender = createElement(FallbackComponent, props);\n      } else if (fallback !== undefined) {\n        childToRender = fallback;\n      } else {\n        if (isDevelopment) {\n          console.error(\n            \"react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop\",\n          );\n        }\n\n        throw error;\n      }\n    }\n\n    return createElement(\n      ErrorBoundaryContext.Provider,\n      {\n        value: {\n          didCatch,\n          error,\n          resetErrorBoundary: this.resetErrorBoundary,\n        },\n      },\n      childToRender,\n    );\n  }\n}\n\nfunction hasArrayChanged(a: unknown[] = [], b: unknown[] = []) {\n  return (\n    a.length !== b.length || a.some((item, index) => !Object.is(item, b[index]))\n  );\n}\n","import type { ErrorBoundaryContextType } from \"../context/ErrorBoundaryContext\";\n\nexport function isErrorBoundaryContext(\n  value: unknown,\n): value is ErrorBoundaryContextType {\n  return (\n    value !== null &&\n    typeof value === \"object\" &&\n    \"didCatch\" in value &&\n    typeof value.didCatch === \"boolean\" &&\n    \"error\" in value &&\n    \"resetErrorBoundary\" in value &&\n    typeof value.resetErrorBoundary === \"function\"\n  );\n}\n","import type { ErrorBoundaryContextType } from \"../context/ErrorBoundaryContext\";\nimport { isErrorBoundaryContext } from \"./isErrorBoundaryContext\";\n\nexport function assertErrorBoundaryContext(\n  value: unknown,\n): asserts value is ErrorBoundaryContextType {\n  if (!isErrorBoundaryContext(value)) {\n    throw new Error(\"ErrorBoundaryContext not found\");\n  }\n}\n","import { useContext, useMemo, useState } from \"react\";\nimport { ErrorBoundaryContext } from \"../context/ErrorBoundaryContext\";\nimport { assertErrorBoundaryContext } from \"../utils/assertErrorBoundaryContext\";\n\ntype UseErrorBoundaryState =\n  | { error: Error; hasError: true }\n  | { error: null; hasError: false };\n\nexport type UseErrorBoundaryApi = {\n  error: Error | null;\n  resetBoundary: () => void;\n  showBoundary: (error: Error) => void;\n};\n\n/**\n * Convenience hook for imperatively showing or dismissing error boundaries.\n *\n * ‚ö†Ô∏è This hook must only be used within an `ErrorBoundary` subtree.\n */\nexport function useErrorBoundary(): {\n  /**\n   * The currently visible `Error` (if one has been thrown).\n   */\n  error: Error | null;\n\n  /**\n   * Method to reset and retry the nearest active error boundary (if one is active).\n   */\n  resetBoundary: () => void;\n\n  /**\n   * Trigger the nearest error boundary to display the error provided.\n   *\n   * ‚ÑπÔ∏è React only handles errors thrown during render or during component lifecycle methods (e.g. effects and did-mount/did-update).\n   * Errors thrown in event handlers, or after async code has run, will not be caught.\n   * This method is a way to imperatively trigger an error boundary during these phases.\n   */\n  showBoundary: (error: Error) => void;\n} {\n  const context = useContext(ErrorBoundaryContext);\n\n  assertErrorBoundaryContext(context);\n\n  const { error, resetErrorBoundary } = context;\n\n  const [state, setState] = useState<UseErrorBoundaryState>({\n    error: null,\n    hasError: false,\n  });\n\n  const memoized = useMemo(\n    () => ({\n      error,\n      resetBoundary: () => {\n        resetErrorBoundary();\n        setState({ error: null, hasError: false });\n      },\n      showBoundary: (error: Error) =>\n        setState({\n          error,\n          hasError: true,\n        }),\n    }),\n    [error, resetErrorBoundary],\n  );\n\n  if (state.hasError) {\n    throw state.error;\n  }\n\n  return memoized;\n}\n","import {\n  createElement,\n  forwardRef,\n  type ComponentClass,\n  type ComponentType,\n} from \"react\";\nimport { ErrorBoundary } from \"../components/ErrorBoundary\";\nimport type { ErrorBoundaryProps } from \"../types\";\n\nexport function withErrorBoundary<\n  Type extends ComponentClass<unknown>,\n  Props extends object,\n>(Component: ComponentType<Props>, errorBoundaryProps: ErrorBoundaryProps) {\n  const Wrapped = forwardRef<InstanceType<Type>, Props>((props, ref) =>\n    createElement(\n      ErrorBoundary,\n      errorBoundaryProps,\n      createElement(Component, { ...props, ref } as Props),\n    ),\n  );\n\n  // Format for display in DevTools\n  const name = Component.displayName || Component.name || \"Unknown\";\n  Wrapped.displayName = `withErrorBoundary(${name})`;\n\n  return Wrapped;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *\n */\n\n.EquationEditor_inlineEditor {\n  padding: 0;\n  margin: 0;\n  border: 0;\n  outline: 0;\n  color: #8421a2;\n  background-color: inherit;\n  resize: none;\n}\n\n.EquationEditor_blockEditor {\n  padding: 0;\n  margin: 0;\n  border: 0;\n  outline: 0;\n  color: #8421a2;\n  background-color: inherit;\n  resize: none;\n  width: 100%;\n}\n\n.EquationEditor_inputBackground {\n  background-color: #eee;\n}\n\n.EquationEditor_dollarSign {\n  text-align: left;\n  color: #b0b0b0;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport type { JSX, Ref, RefObject } from 'react';\n\nimport './EquationEditor.css';\n\nimport { isHTMLElement } from 'lexical';\nimport { type ChangeEvent, forwardRef } from 'react';\n\ntype BaseEquationEditorProps = {\n  equation: string;\n  inline: boolean;\n  setEquation: (equation: string) => void;\n};\n\nfunction EquationEditor(\n  { equation, setEquation, inline }: BaseEquationEditorProps,\n  forwardedRef: Ref<HTMLInputElement | HTMLTextAreaElement>,\n): JSX.Element {\n  const onChange = (event: ChangeEvent) => {\n    setEquation((event.target as HTMLInputElement).value);\n  };\n\n  return inline && isHTMLElement(forwardedRef) ? (\n    <span className=\"EquationEditor_inputBackground\">\n      <span className=\"EquationEditor_dollarSign\">$</span>\n      <input\n        className=\"EquationEditor_inlineEditor\"\n        value={equation}\n        onChange={onChange}\n        ref={forwardedRef as RefObject<HTMLInputElement>}\n      />\n      <span className=\"EquationEditor_dollarSign\">$</span>\n    </span>\n  ) : (\n    <div className=\"EquationEditor_inputBackground\">\n      <span className=\"EquationEditor_dollarSign\">{'$$\\n'}</span>\n      <textarea\n        className=\"EquationEditor_blockEditor\"\n        value={equation}\n        onChange={onChange}\n        ref={forwardedRef as RefObject<HTMLTextAreaElement>}\n      />\n      <span className=\"EquationEditor_dollarSign\">{'\\n$$'}</span>\n    </div>\n  );\n}\n\nexport default forwardRef(EquationEditor);\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport katex from 'katex';\nimport type { JSX } from 'react';\nimport { useEffect, useRef } from 'react';\n\nexport default function KatexRenderer({\n  equation,\n  inline,\n  onDoubleClick,\n}: Readonly<{\n  equation: string;\n  inline: boolean;\n  onDoubleClick: () => void;\n}>): JSX.Element {\n  const katexElementRef = useRef(null);\n\n  useEffect(() => {\n    const katexElement = katexElementRef.current;\n\n    if (katexElement !== null) {\n      katex.render(equation, katexElement, {\n        displayMode: !inline, // true === block display //\n        errorColor: '#cc0000',\n        output: 'html',\n        strict: 'warn',\n        throwOnError: false,\n        trust: false,\n      });\n    }\n  }, [equation, inline]);\n\n  return (\n    // We use an empty image tag either side to ensure Android doesn't try and compose from the\n    // inner text from Katex. There didn't seem to be any other way of making this work,\n    // without having a physical space.\n    <>\n      <img\n        src=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\n        width=\"0\"\n        height=\"0\"\n        alt=\"\"\n      />\n      <span role=\"button\" tabIndex={-1} onDoubleClick={onDoubleClick} ref={katexElementRef} />\n      <img\n        src=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\n        width=\"0\"\n        height=\"0\"\n        alt=\"\"\n      />\n    </>\n  );\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';\nimport { useLexicalEditable } from '@lexical/react/useLexicalEditable';\nimport { mergeRegister } from '@lexical/utils';\nimport {\n  $getNodeByKey,\n  $getSelection,\n  $isNodeSelection,\n  COMMAND_PRIORITY_HIGH,\n  KEY_ESCAPE_COMMAND,\n  type NodeKey,\n  SELECTION_CHANGE_COMMAND,\n} from 'lexical';\nimport type { JSX } from 'react';\nimport { useCallback, useEffect, useRef, useState } from 'react';\nimport { ErrorBoundary } from 'react-error-boundary';\n\nimport EquationEditor from '../ui/EquationEditor';\nimport KatexRenderer from '../ui/KatexRenderer';\nimport { $isEquationNode } from './EquationNode';\n\ntype EquationComponentProps = {\n  equation: string;\n  inline: boolean;\n  nodeKey: NodeKey;\n};\n\nexport default function EquationComponent({ equation, inline, nodeKey }: EquationComponentProps): JSX.Element {\n  const [editor] = useLexicalComposerContext();\n  const isEditable = useLexicalEditable();\n  const [equationValue, setEquationValue] = useState(equation);\n  const [showEquationEditor, setShowEquationEditor] = useState<boolean>(false);\n  const inputRef = useRef<HTMLTextAreaElement | HTMLInputElement>(null);\n\n  const onHide = useCallback(\n    (restoreSelection?: boolean) => {\n      setShowEquationEditor(false);\n      editor.update(() => {\n        const node = $getNodeByKey(nodeKey);\n        if ($isEquationNode(node)) {\n          node.setEquation(equationValue);\n          if (restoreSelection) {\n            node.selectNext(0, 0);\n          }\n        }\n      });\n    },\n    [editor, equationValue, nodeKey],\n  );\n\n  useEffect(() => {\n    if (!showEquationEditor && equationValue !== equation) {\n      setEquationValue(equation);\n    }\n  }, [showEquationEditor, equation, equationValue]);\n\n  useEffect(() => {\n    if (!isEditable) {\n      return;\n    }\n    if (showEquationEditor) {\n      return mergeRegister(\n        editor.registerCommand(\n          SELECTION_CHANGE_COMMAND,\n          (_payload) => {\n            const activeElement = document.activeElement;\n            const inputElem = inputRef.current;\n            if (inputElem !== activeElement) {\n              onHide();\n            }\n            return false;\n          },\n          COMMAND_PRIORITY_HIGH,\n        ),\n        editor.registerCommand(\n          KEY_ESCAPE_COMMAND,\n          (_payload) => {\n            const activeElement = document.activeElement;\n            const inputElem = inputRef.current;\n            if (inputElem === activeElement) {\n              onHide(true);\n              return true;\n            }\n            return false;\n          },\n          COMMAND_PRIORITY_HIGH,\n        ),\n      );\n    } else {\n      return editor.registerUpdateListener(({ editorState }) => {\n        const isSelected = editorState.read(() => {\n          const selection = $getSelection();\n          return $isNodeSelection(selection) && selection.has(nodeKey) && selection.getNodes().length === 1;\n        });\n        if (isSelected) {\n          setShowEquationEditor(true);\n        }\n      });\n    }\n  }, [editor, nodeKey, onHide, showEquationEditor, isEditable]);\n\n  return (\n    <>\n      {showEquationEditor && isEditable ? (\n        <EquationEditor equation={equationValue} setEquation={setEquationValue} inline={inline} ref={inputRef} />\n      ) : (\n        <ErrorBoundary onError={(e) => editor._onError(e)} fallback={null}>\n          <KatexRenderer\n            equation={equationValue}\n            inline={inline}\n            onDoubleClick={() => {\n              if (isEditable) {\n                setShowEquationEditor(true);\n              }\n            }}\n          />\n        </ErrorBoundary>\n      )}\n    </>\n  );\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport katex from 'katex';\nimport type {\n  DOMConversionMap,\n  DOMConversionOutput,\n  EditorConfig,\n  LexicalNode,\n  NodeKey,\n  SerializedLexicalNode,\n  Spread,\n} from 'lexical';\nimport { $applyNodeReplacement, DecoratorNode, type DOMExportOutput } from 'lexical';\nimport type { JSX } from 'react';\nimport * as React from 'react';\n\nconst EquationComponent = React.lazy(() => import('./EquationComponent'));\n\nexport type SerializedEquationNode = Spread<\n  {\n    equation: string;\n    inline: boolean;\n  },\n  SerializedLexicalNode\n>;\n\nfunction $convertEquationElement(domNode: HTMLElement): null | DOMConversionOutput {\n  let equation = domNode.getAttribute('data-lexical-equation');\n  const inline = domNode.getAttribute('data-lexical-inline') === 'true';\n  // Decode the equation from base64\n  equation = atob(equation || '');\n  if (equation) {\n    const node = $createEquationNode(equation, inline);\n    return { node };\n  }\n\n  return null;\n}\n\nexport class EquationNode extends DecoratorNode<JSX.Element> {\n  __equation: string;\n  __inline: boolean;\n\n  static getType(): string {\n    return 'equation';\n  }\n\n  static clone(node: EquationNode): EquationNode {\n    return new EquationNode(node.__equation, node.__inline, node.__key);\n  }\n\n  constructor(equation: string, inline?: boolean, key?: NodeKey) {\n    super(key);\n    this.__equation = equation;\n    this.__inline = inline ?? false;\n  }\n\n  static importJSON(serializedNode: SerializedEquationNode): EquationNode {\n    return $createEquationNode(serializedNode.equation, serializedNode.inline).updateFromJSON(serializedNode);\n  }\n\n  exportJSON(): SerializedEquationNode {\n    return {\n      ...super.exportJSON(),\n      equation: this.getEquation(),\n      inline: this.__inline,\n    };\n  }\n\n  createDOM(_config: EditorConfig): HTMLElement {\n    const element = document.createElement(this.__inline ? 'span' : 'div');\n    // EquationNodes should implement `user-action:none` in their CSS to avoid issues with deletion on Android.\n    element.className = 'editor-equation';\n    return element;\n  }\n\n  exportDOM(): DOMExportOutput {\n    const element = document.createElement(this.__inline ? 'span' : 'div');\n    // Encode the equation as base64 to avoid issues with special characters\n    const equation = btoa(this.__equation);\n    element.setAttribute('data-lexical-equation', equation);\n    element.setAttribute('data-lexical-inline', `${this.__inline}`);\n    katex.render(this.__equation, element, {\n      displayMode: !this.__inline, // true === block display //\n      errorColor: '#cc0000',\n      output: 'html',\n      strict: 'warn',\n      throwOnError: false,\n      trust: false,\n    });\n    return { element };\n  }\n\n  static importDOM(): DOMConversionMap | null {\n    return {\n      div: (domNode: HTMLElement) => {\n        if (!domNode.hasAttribute('data-lexical-equation')) {\n          return null;\n        }\n        return {\n          conversion: $convertEquationElement,\n          priority: 2,\n        };\n      },\n      span: (domNode: HTMLElement) => {\n        if (!domNode.hasAttribute('data-lexical-equation')) {\n          return null;\n        }\n        return {\n          conversion: $convertEquationElement,\n          priority: 1,\n        };\n      },\n    };\n  }\n\n  updateDOM(prevNode: this): boolean {\n    // If the inline property changes, replace the element\n    return this.__inline !== prevNode.__inline;\n  }\n\n  getTextContent(): string {\n    return this.__equation;\n  }\n\n  getEquation(): string {\n    return this.__equation;\n  }\n\n  setEquation(equation: string): void {\n    const writable = this.getWritable();\n    writable.__equation = equation;\n  }\n\n  decorate(): JSX.Element {\n    return <EquationComponent equation={this.__equation} inline={this.__inline} nodeKey={this.__key} />;\n  }\n}\n\nexport function $createEquationNode(equation = '', inline = false): EquationNode {\n  const equationNode = new EquationNode(equation, inline);\n  return $applyNodeReplacement(equationNode);\n}\n\nexport function $isEquationNode(node: LexicalNode | null | undefined): node is EquationNode {\n  return node instanceof EquationNode;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport type { EditorConfig, LexicalNode, SerializedTextNode } from 'lexical';\n\nimport { $applyNodeReplacement, TextNode } from 'lexical';\n\nexport type SerializedKeywordNode = SerializedTextNode;\n\nexport class KeywordNode extends TextNode {\n  static getType(): string {\n    return 'keyword';\n  }\n\n  static clone(node: KeywordNode): KeywordNode {\n    return new KeywordNode(node.__text, node.__key);\n  }\n\n  static importJSON(serializedNode: SerializedKeywordNode): KeywordNode {\n    return $createKeywordNode().updateFromJSON(serializedNode);\n  }\n\n  createDOM(config: EditorConfig): HTMLElement {\n    const dom = super.createDOM(config);\n    dom.style.cursor = 'default';\n    dom.className = 'keyword';\n    return dom;\n  }\n\n  canInsertTextBefore(): boolean {\n    return false;\n  }\n\n  canInsertTextAfter(): boolean {\n    return false;\n  }\n\n  isTextEntity(): true {\n    return true;\n  }\n}\n\nexport function $createKeywordNode(keyword: string = ''): KeywordNode {\n  return $applyNodeReplacement(new KeywordNode(keyword));\n}\n\nexport function $isKeywordNode(node: LexicalNode | null | undefined): boolean {\n  return node instanceof KeywordNode;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *\n */\n\n.ImageNode__contentEditable {\n  min-height: 20px;\n  border: 0px;\n  resize: none;\n  cursor: text;\n  caret-color: rgb(5, 5, 5);\n  display: block;\n  position: relative;\n  outline: 0px;\n  padding: 10px;\n  user-select: text;\n  font-size: 12px;\n  width: 100%;\n  white-space: pre-wrap;\n  word-break: break-word;\n  overflow-wrap: break-word;\n  box-sizing: border-box;\n}\n\n.ImageNode__placeholder {\n  font-size: 12px;\n  color: #888;\n  overflow: hidden;\n  position: absolute;\n  text-overflow: ellipsis;\n  top: 10px;\n  left: 10px;\n  user-select: none;\n  white-space: nowrap;\n  display: inline-block;\n  pointer-events: none;\n}\n\n.image-control-wrapper--resizing {\n  touch-action: none;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport type { HistoryState } from '@lexical/react/LexicalHistoryPlugin';\nimport { createEmptyHistoryState } from '@lexical/react/LexicalHistoryPlugin';\nimport type * as React from 'react';\nimport type { JSX } from 'react';\nimport { createContext, type ReactNode, useContext, useMemo } from 'react';\n\ntype ContextShape = {\n  historyState?: HistoryState;\n};\n\nconst Context: React.Context<ContextShape> = createContext({});\n\nexport const SharedHistoryContext = ({ children }: { children: ReactNode }): JSX.Element => {\n  const historyContext = useMemo(() => ({ historyState: createEmptyHistoryState() }), []);\n  return <Context.Provider value={historyContext}>{children}</Context.Provider>;\n};\n\nexport const useSharedHistoryContext = (): ContextShape => {\n  return useContext(Context);\n};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';\nimport type { LexicalEditor } from 'lexical';\nimport { TextNode } from 'lexical';\nimport type { JSX } from 'react';\nimport { useEffect } from 'react';\n\nimport { $createEmojiNode, EmojiNode } from '../../nodes/EmojiNode';\n\nconst emojis: Map<string, [string, string]> = new Map([\n  [':)', ['emoji happysmile', 'üôÇ']],\n  [':D', ['emoji veryhappysmile', 'üòÄ']],\n  [':(', ['emoji unhappysmile', 'üôÅ']],\n  ['<3', ['emoji heart', '‚ù§']],\n]);\n\nfunction $findAndTransformEmoji(node: TextNode): null | TextNode {\n  const text = node.getTextContent();\n\n  for (let i = 0; i < text.length; i++) {\n    const emojiData = emojis.get(text[i]) || emojis.get(text.slice(i, i + 2));\n\n    if (emojiData !== undefined) {\n      const [emojiStyle, emojiText] = emojiData;\n      let targetNode: TextNode;\n\n      if (i === 0) {\n        [targetNode] = node.splitText(i + 2);\n      } else {\n        [, targetNode] = node.splitText(i, i + 2);\n      }\n\n      const emojiNode = $createEmojiNode(emojiStyle, emojiText);\n      targetNode.replace(emojiNode);\n      return emojiNode;\n    }\n  }\n\n  return null;\n}\n\nfunction $textNodeTransform(node: TextNode): void {\n  let targetNode: TextNode | null = node;\n\n  while (targetNode !== null) {\n    if (!targetNode.isSimpleText()) {\n      return;\n    }\n\n    targetNode = $findAndTransformEmoji(targetNode);\n  }\n}\n\nfunction useEmojis(editor: LexicalEditor): void {\n  useEffect(() => {\n    if (!editor.hasNodes([EmojiNode])) {\n      throw new Error('EmojisPlugin: EmojiNode not registered on editor');\n    }\n\n    return editor.registerNodeTransform(TextNode, $textNodeTransform);\n  }, [editor]);\n}\n\nexport default function EmojisPlugin(): JSX.Element | null {\n  const [editor] = useLexicalComposerContext();\n  useEmojis(editor);\n  return null;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nconst SUPPORTED_URL_PROTOCOLS = new Set(['http:', 'https:', 'mailto:', 'sms:', 'tel:']);\n\nexport function sanitizeUrl(url: string): string {\n  try {\n    const parsedUrl = new URL(url);\n    // eslint-disable-next-line no-script-url\n    if (!SUPPORTED_URL_PROTOCOLS.has(parsedUrl.protocol)) {\n      return 'about:blank';\n    }\n  } catch {\n    return url;\n  }\n  return url;\n}\n\n// Source: https://stackoverflow.com/a/8234912/2013580\nconst urlRegExp = new RegExp(\n  /((([A-Za-z]{3,9}:(?:\\/\\/)?)(?:[-;:&=+$,\\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=+$,\\w]+@)[A-Za-z0-9.-]+)((?:\\/[+~%/.\\w-_]*)?\\??(?:[-+=&;%@.\\w_]*)#?(?:[\\w]*))?)/,\n);\nexport function validateUrl(url: string): boolean {\n  // TODO Fix UI for link insertion; it should never default to an invalid URL such as https://.\n  // Maybe show a dialog where they user can type the URL before inserting it.\n  return url === 'https://' || urlRegExp.test(url);\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { LinkPlugin as LexicalLinkPlugin } from '@lexical/react/LexicalLinkPlugin';\nimport type { JSX } from 'react';\n\nimport { validateUrl } from '../../utils/url';\n\ntype Props = {\n  hasLinkAttributes?: boolean;\n};\n\nexport default function LinkPlugin({ hasLinkAttributes = false }: Props): JSX.Element {\n  return (\n    <LexicalLinkPlugin\n      validateUrl={validateUrl}\n      attributes={\n        hasLinkAttributes\n          ? {\n              rel: 'noopener noreferrer',\n              target: '_blank',\n            }\n          : undefined\n      }\n    />\n  );\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport {\n  $applyNodeReplacement,\n  type DOMConversionMap,\n  type DOMConversionOutput,\n  type DOMExportOutput,\n  type EditorConfig,\n  type LexicalNode,\n  type NodeKey,\n  type SerializedTextNode,\n  type Spread,\n  TextNode,\n} from 'lexical';\n\nexport type SerializedMentionNode = Spread<\n  {\n    mentionName: string;\n  },\n  SerializedTextNode\n>;\n\nfunction $convertMentionElement(domNode: HTMLElement): DOMConversionOutput | null {\n  const textContent = domNode.textContent;\n  const mentionName = domNode.getAttribute('data-lexical-mention-name');\n\n  if (textContent !== null) {\n    const node = $createMentionNode(typeof mentionName === 'string' ? mentionName : textContent, textContent);\n    return {\n      node,\n    };\n  }\n\n  return null;\n}\n\nconst mentionStyle = 'background-color: rgba(24, 119, 232, 0.2)';\nexport class MentionNode extends TextNode {\n  __mention: string;\n\n  static getType(): string {\n    return 'mention';\n  }\n\n  static clone(node: MentionNode): MentionNode {\n    return new MentionNode(node.__mention, node.__text, node.__key);\n  }\n  static importJSON(serializedNode: SerializedMentionNode): MentionNode {\n    return $createMentionNode(serializedNode.mentionName).updateFromJSON(serializedNode);\n  }\n\n  constructor(mentionName: string, text?: string, key?: NodeKey) {\n    super(text ?? mentionName, key);\n    this.__mention = mentionName;\n  }\n\n  exportJSON(): SerializedMentionNode {\n    return {\n      ...super.exportJSON(),\n      mentionName: this.__mention,\n    };\n  }\n\n  createDOM(config: EditorConfig): HTMLElement {\n    const dom = super.createDOM(config);\n    dom.style.cssText = mentionStyle;\n    dom.className = 'mention';\n    dom.spellcheck = false;\n\n    return dom;\n  }\n\n  exportDOM(): DOMExportOutput {\n    const element = document.createElement('span');\n    element.setAttribute('data-lexical-mention', 'true');\n    if (this.__text !== this.__mention) {\n      element.setAttribute('data-lexical-mention-name', this.__mention);\n    }\n    element.textContent = this.__text;\n    return { element };\n  }\n\n  static importDOM(): DOMConversionMap | null {\n    return {\n      span: (domNode: HTMLElement) => {\n        if (!domNode.hasAttribute('data-lexical-mention')) {\n          return null;\n        }\n        return {\n          conversion: $convertMentionElement,\n          priority: 1,\n        };\n      },\n    };\n  }\n\n  isTextEntity(): true {\n    return true;\n  }\n\n  canInsertTextBefore(): boolean {\n    return false;\n  }\n\n  canInsertTextAfter(): boolean {\n    return false;\n  }\n}\n\nexport function $createMentionNode(mentionName: string, textContent?: string): MentionNode {\n  const mentionNode = new MentionNode(mentionName, textContent ?? mentionName);\n  mentionNode.setMode('segmented').toggleDirectionless();\n  return $applyNodeReplacement(mentionNode);\n}\n\nexport function $isMentionNode(node: LexicalNode | null | undefined): node is MentionNode {\n  return node instanceof MentionNode;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';\nimport { MenuOption } from '@lexical/react/LexicalNodeMenuPlugin';\nimport {\n  LexicalTypeaheadMenuPlugin,\n  type MenuTextMatch,\n  useBasicTypeaheadTriggerMatch,\n} from '@lexical/react/LexicalTypeaheadMenuPlugin';\nimport type { TextNode } from 'lexical';\nimport type { JSX } from 'react';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { $createMentionNode } from '../../nodes/MentionNode';\n\nconst PUNCTUATION = '\\\\.,\\\\+\\\\*\\\\?\\\\$\\\\@\\\\|#{}\\\\(\\\\)\\\\^\\\\-\\\\[\\\\]\\\\\\\\/!%\\'\"~=<>_:;';\nconst NAME = `\\\\b[A-Z][^\\\\s${PUNCTUATION}]`;\n\nconst DocumentMentionsRegex = {\n  NAME,\n  PUNCTUATION,\n};\n\nconst PUNC = DocumentMentionsRegex.PUNCTUATION;\n\nconst TRIGGERS = ['@'].join('');\n\n// Chars we expect to see in a mention (non-space, non-punctuation).\nconst VALID_CHARS = `[^${TRIGGERS}${PUNC}\\\\s]`;\n\n// Non-standard series of chars. Each series must be preceded and followed by\n// a valid char.\nconst VALID_JOINS =\n  '(?:' +\n  '\\\\.[ |$]|' + // E.g. \"r. \" in \"Mr. Smith\"\n  ' |' + // E.g. \" \" in \"Josh Duck\"\n  '[' +\n  PUNC +\n  ']|' + // E.g. \"-' in \"Salier-Hellendag\"\n  ')';\n\nconst LENGTH_LIMIT = 75;\n\nconst AtSignMentionsRegex = new RegExp(\n  `(^|\\\\s|\\\\()([${TRIGGERS}]((?:${VALID_CHARS}${VALID_JOINS}){0,${LENGTH_LIMIT}}))$`,\n);\n\n// 50 is the longest alias length limit.\nconst ALIAS_LENGTH_LIMIT = 50;\n\n// Regex used to match alias.\nconst AtSignMentionsRegexAliasRegex = new RegExp(\n  `(^|\\\\s|\\\\()([${TRIGGERS}]((?:${VALID_CHARS}){0,${ALIAS_LENGTH_LIMIT}}))$`,\n);\n\n// At most, 5 suggestions are shown in the popup.\nconst SUGGESTION_LIST_LENGTH_LIMIT = 5;\n\nconst mentionsCache = new Map();\n\nconst dummyMentionsData = [\n  'Aayla Secura',\n  'Adi Gallia',\n  'Admiral Dodd Rancit',\n  'Admiral Firmus Piett',\n  'Admiral Gial Ackbar',\n  'Admiral Ozzel',\n  'Admiral Raddus',\n  'Admiral Terrinald Screed',\n  'Admiral Trench',\n  'Admiral U.O. Statura',\n  'Agen Kolar',\n  'Agent Kallus',\n  'Aiolin and Morit Astarte',\n  'Aks Moe',\n  'Almec',\n  'Alton Kastle',\n  'Amee',\n  'AP-5',\n  'Armitage Hux',\n  'Artoo',\n  'Arvel Crynyd',\n  'Asajj Ventress',\n  'Aurra Sing',\n  'AZI-3',\n  'Bala-Tik',\n  'Barada',\n  'Bargwill Tomder',\n  'Baron Papanoida',\n  'Barriss Offee',\n  'Baze Malbus',\n  'Bazine Netal',\n  'BB-8',\n  'BB-9E',\n  'Ben Quadinaros',\n  'Berch Teller',\n  'Beru Lars',\n  'Bib Fortuna',\n  'Biggs Darklighter',\n  'Black Krrsantan',\n  'Bo-Katan Kryze',\n  'Boba Fett',\n  'Bobbajo',\n  'Bodhi Rook',\n  'Borvo the Hutt',\n  'Boss Nass',\n  'Bossk',\n  'Breha Antilles-Organa',\n  'Bren Derlin',\n  'Brendol Hux',\n  'BT-1',\n  'C-3PO',\n  'C1-10P',\n  'Cad Bane',\n  'Caluan Ematt',\n  'Captain Gregor',\n  'Captain Phasma',\n  'Captain Quarsh Panaka',\n  'Captain Rex',\n  'Carlist Rieekan',\n  'Casca Panzoro',\n  'Cassian Andor',\n  'Cassio Tagge',\n  'Cham Syndulla',\n  'Che Amanwe Papanoida',\n  'Chewbacca',\n  'Chi Eekway Papanoida',\n  'Chief Chirpa',\n  'Chirrut √émwe',\n  'Ciena Ree',\n  'Cin Drallig',\n  'Clegg Holdfast',\n  'Cliegg Lars',\n  'Coleman Kcaj',\n  'Coleman Trebor',\n  'Colonel Kaplan',\n  'Commander Bly',\n  'Commander Cody (CC-2224)',\n  'Commander Fil (CC-3714)',\n  'Commander Fox',\n  'Commander Gree',\n  'Commander Jet',\n  'Commander Wolffe',\n  'Conan Antonio Motti',\n  'Conder Kyl',\n  'Constable Zuvio',\n  'Cord√©',\n  'Cpatain Typho',\n  'Crix Madine',\n  'Cut Lawquane',\n  'Dak Ralter',\n  'Dapp',\n  'Darth Bane',\n  'Darth Maul',\n  'Darth Tyranus',\n  'Daultay Dofine',\n  'Del Meeko',\n  'Delian Mors',\n  'Dengar',\n  'Depa Billaba',\n  'Derek Klivian',\n  'Dexter Jettster',\n  'Dine√© Ellberger',\n  'DJ',\n  'Doctor Aphra',\n  'Doctor Evazan',\n  'Dogma',\n  'Dorm√©',\n  'Dr. Cylo',\n  'Droidbait',\n  'Droopy McCool',\n  'Dryden Vos',\n  'Dud Bolt',\n  'Ebe E. Endocott',\n  'Echuu Shen-Jon',\n  'Eeth Koth',\n  'Eighth Brother',\n  'Eirta√©',\n  'Eli Vanto',\n  'Ell√©',\n  'Ello Asty',\n  'Embo',\n  'Eneb Ray',\n  'Enfys Nest',\n  'EV-9D9',\n  'Evaan Verlaine',\n  'Even Piell',\n  'Ezra Bridger',\n  'Faro Argyus',\n  'Feral',\n  'Fifth Brother',\n  'Finis Valorum',\n  'Finn',\n  'Fives',\n  'FN-1824',\n  'FN-2003',\n  'Fodesinbeed Annodue',\n  'Fulcrum',\n  'FX-7',\n  'GA-97',\n  'Galen Erso',\n  'Gallius Rax',\n  'Garazeb \"Zeb\" Orrelios',\n  'Gardulla the Hutt',\n  'Garrick Versio',\n  'Garven Dreis',\n  'Gavyn Sykes',\n  'Gideon Hask',\n  'Gizor Dellso',\n  'Gonk droid',\n  'Grand Inquisitor',\n  'Greeata Jendowanian',\n  'Greedo',\n  'Greer Sonnel',\n  'Grievous',\n  'Grummgar',\n  'Gungi',\n  'Hammerhead',\n  'Han Solo',\n  'Harter Kalonia',\n  'Has Obbit',\n  'Hera Syndulla',\n  'Hevy',\n  'Hondo Ohnaka',\n  'Huyang',\n  'Iden Versio',\n  'IG-88',\n  'Ima-Gun Di',\n  'Inquisitors',\n  'Inspector Thanoth',\n  'Jabba',\n  'Jacen Syndulla',\n  'Jan Dodonna',\n  'Jango Fett',\n  'Janus Greejatus',\n  'Jar Jar Binks',\n  'Jas Emari',\n  'Jaxxon',\n  'Jek Tono Porkins',\n  'Jeremoch Colton',\n  'Jira',\n  'Jobal Naberrie',\n  'Jocasta Nu',\n  'Joclad Danva',\n  'Joh Yowza',\n  'Jom Barell',\n  'Joph Seastriker',\n  'Jova Tarkin',\n  'Jubnuk',\n  'Jyn Erso',\n  'K-2SO',\n  'Kanan Jarrus',\n  'Karbin',\n  'Karina the Great',\n  'Kes Dameron',\n  'Ketsu Onyo',\n  'Ki-Adi-Mundi',\n  'King Katuunko',\n  'Kit Fisto',\n  'Kitster Banai',\n  'Klaatu',\n  'Klik-Klak',\n  'Korr Sella',\n  'Kylo Ren',\n  'L3-37',\n  'Lama Su',\n  'Lando Calrissian',\n  'Lanever Villecham',\n  'Leia Organa',\n  'Letta Turmond',\n  'Lieutenant Kaydel Ko Connix',\n  'Lieutenant Thire',\n  'Lobot',\n  'Logray',\n  'Lok Durd',\n  'Longo Two-Guns',\n  'Lor San Tekka',\n  'Lorth Needa',\n  'Lott Dod',\n  'Luke Skywalker',\n  'Lumat',\n  'Luminara Unduli',\n  'Lux Bonteri',\n  'Lyn Me',\n  'Lyra Erso',\n  'Mace Windu',\n  'Malakili',\n  'Mama the Hutt',\n  'Mars Guo',\n  'Mas Amedda',\n  'Mawhonic',\n  'Max Rebo',\n  'Maximilian Veers',\n  'Maz Kanata',\n  'ME-8D9',\n  'Meena Tills',\n  'Mercurial Swift',\n  'Mina Bonteri',\n  'Miraj Scintel',\n  'Mister Bones',\n  'Mod Terrik',\n  'Moden Canady',\n  'Mon Mothma',\n  'Moradmin Bast',\n  'Moralo Eval',\n  'Morley',\n  'Mother Talzin',\n  'Nahdar Vebb',\n  'Nahdonnis Praji',\n  'Nien Nunb',\n  'Niima the Hutt',\n  'Nines',\n  'Norra Wexley',\n  'Nute Gunray',\n  'Nuvo Vindi',\n  'Obi-Wan Kenobi',\n  'Odd Ball',\n  'Ody Mandrell',\n  'Omi',\n  'Onaconda Farr',\n  'Oola',\n  'OOM-9',\n  'Oppo Rancisis',\n  'Orn Free Taa',\n  'Oro Dassyne',\n  'Orrimarko',\n  'Osi Sobeck',\n  'Owen Lars',\n  'Pablo-Jill',\n  'Padm√© Amidala',\n  'Pagetti Rook',\n  'Paige Tico',\n  'Paploo',\n  'Petty Officer Thanisson',\n  'Pharl McQuarrie',\n  'Plo Koon',\n  'Po Nudo',\n  'Poe Dameron',\n  'Poggle the Lesser',\n  'Pong Krell',\n  'Pooja Naberrie',\n  'PZ-4CO',\n  'Quarrie',\n  'Quay Tolsite',\n  'Queen Apailana',\n  'Queen Jamillia',\n  'Queen Neeyutnee',\n  'Qui-Gon Jinn',\n  'Quiggold',\n  'Quinlan Vos',\n  'R2-D2',\n  'R2-KT',\n  'R3-S6',\n  'R4-P17',\n  'R5-D4',\n  'RA-7',\n  'Rab√©',\n  'Rako Hardeen',\n  'Ransolm Casterfo',\n  'Rappertunie',\n  'Ratts Tyerell',\n  'Raymus Antilles',\n  'Ree-Yees',\n  'Reeve Panzoro',\n  'Rey',\n  'Ric Oli√©',\n  'Riff Tamson',\n  'Riley',\n  'Rinnriyin Di',\n  'Rio Durant',\n  'Rogue Squadron',\n  'Romba',\n  'Roos Tarpals',\n  'Rose Tico',\n  'Rotta the Hutt',\n  'Rukh',\n  'Rune Haako',\n  'Rush Clovis',\n  'Ruwee Naberrie',\n  'Ryoo Naberrie',\n  'Sab√©',\n  'Sabine Wren',\n  'Sach√©',\n  'Saelt-Marae',\n  'Saesee Tiin',\n  'Salacious B. Crumb',\n  'San Hill',\n  'Sana Starros',\n  'Sarco Plank',\n  'Sarkli',\n  'Satine Kryze',\n  'Savage Opress',\n  'Sebulba',\n  'Senator Organa',\n  'Sergeant Kreel',\n  'Seventh Sister',\n  'Shaak Ti',\n  'Shara Bey',\n  'Shmi Skywalker',\n  'Shu Mai',\n  'Sidon Ithano',\n  'Sifo-Dyas',\n  'Sim Aloo',\n  'Siniir Rath Velus',\n  'Sio Bibble',\n  'Sixth Brother',\n  'Slowen Lo',\n  'Sly Moore',\n  'Snaggletooth',\n  'Snap Wexley',\n  'Snoke',\n  'Sola Naberrie',\n  'Sora Bulq',\n  'Strono Tuggs',\n  'Sy Snootles',\n  'Tallissan Lintra',\n  'Tarfful',\n  'Tasu Leech',\n  'Taun We',\n  'TC-14',\n  'Tee Watt Kaa',\n  'Teebo',\n  'Teedo',\n  'Teemto Pagalies',\n  'Temiri Blagg',\n  'Tessek',\n  'Tey How',\n  'Thane Kyrell',\n  'The Bendu',\n  'The Smuggler',\n  'Thrawn',\n  'Tiaan Jerjerrod',\n  'Tion Medon',\n  'Tobias Beckett',\n  'Tulon Voidgazer',\n  'Tup',\n  'U9-C4',\n  'Unkar Plutt',\n  'Val Beckett',\n  'Vanden Willard',\n  'Vice Admiral Amilyn Holdo',\n  'Vober Dand',\n  'WAC-47',\n  'Wag Too',\n  'Wald',\n  'Walrus Man',\n  'Warok',\n  'Wat Tambor',\n  'Watto',\n  'Wedge Antilles',\n  'Wes Janson',\n  'Wicket W. Warrick',\n  'Wilhuff Tarkin',\n  'Wollivan',\n  'Wuher',\n  'Wullf Yularen',\n  'Xamuel Lennox',\n  'Yaddle',\n  'Yarael Poof',\n  'Yoda',\n  'Zam Wesell',\n  'Zev Senesca',\n  'Ziro the Hutt',\n  'Zuckuss',\n];\n\nconst dummyLookupService = {\n  search(string: string, callback: (results: Array<string>) => void): void {\n    setTimeout(() => {\n      const results = dummyMentionsData.filter((mention) => mention.toLowerCase().includes(string.toLowerCase()));\n      callback(results);\n    }, 500);\n  },\n};\n\nfunction useMentionLookupService(mentionString: string | null) {\n  const [results, setResults] = useState<Array<string>>([]);\n\n  useEffect(() => {\n    const cachedResults = mentionsCache.get(mentionString);\n\n    if (mentionString == null) {\n      setResults([]);\n      return;\n    }\n\n    if (cachedResults === null) {\n      return;\n    } else if (cachedResults !== undefined) {\n      setResults(cachedResults);\n      return;\n    }\n\n    mentionsCache.set(mentionString, null);\n    dummyLookupService.search(mentionString, (newResults) => {\n      mentionsCache.set(mentionString, newResults);\n      setResults(newResults);\n    });\n  }, [mentionString]);\n\n  return results;\n}\n\nfunction checkForAtSignMentions(text: string, minMatchLength: number): MenuTextMatch | null {\n  let match = AtSignMentionsRegex.exec(text);\n\n  if (match === null) {\n    match = AtSignMentionsRegexAliasRegex.exec(text);\n  }\n  if (match !== null) {\n    // The strategy ignores leading whitespace but we need to know it's\n    // length to add it to the leadOffset\n    const maybeLeadingWhitespace = match[1];\n\n    const matchingString = match[3];\n    if (matchingString.length >= minMatchLength) {\n      return {\n        leadOffset: match.index + maybeLeadingWhitespace.length,\n        matchingString,\n        replaceableString: match[2],\n      };\n    }\n  }\n  return null;\n}\n\nfunction getPossibleQueryMatch(text: string): MenuTextMatch | null {\n  return checkForAtSignMentions(text, 1);\n}\n\nclass MentionTypeaheadOption extends MenuOption {\n  name: string;\n  picture: JSX.Element;\n\n  constructor(name: string, picture: JSX.Element) {\n    super(name);\n    this.name = name;\n    this.picture = picture;\n  }\n}\n\nfunction MentionsTypeaheadMenuItem({\n  index,\n  isSelected,\n  onClick,\n  onMouseEnter,\n  option,\n}: {\n  index: number;\n  isSelected: boolean;\n  onClick: () => void;\n  onMouseEnter: () => void;\n  option: MentionTypeaheadOption;\n}) {\n  let className = 'item';\n  if (isSelected) {\n    className += ' selected';\n  }\n  return (\n    <li\n      key={option.key}\n      tabIndex={-1}\n      className={className}\n      ref={option.setRefElement}\n      aria-selected={isSelected}\n      id={`typeahead-item-${index}`}\n      onMouseEnter={onMouseEnter}\n      onClick={onClick}\n    >\n      {option.picture}\n      <span className=\"text\">{option.name}</span>\n    </li>\n  );\n}\n\nexport default function NewMentionsPlugin(): JSX.Element | null {\n  const [editor] = useLexicalComposerContext();\n\n  const [queryString, setQueryString] = useState<string | null>(null);\n\n  const results = useMentionLookupService(queryString);\n\n  const checkForSlashTriggerMatch = useBasicTypeaheadTriggerMatch('/', {\n    minLength: 0,\n  });\n\n  const options = useMemo(\n    () =>\n      results\n        .map((result) => new MentionTypeaheadOption(result, <i className=\"icon user\" />))\n        .slice(0, SUGGESTION_LIST_LENGTH_LIMIT),\n    [results],\n  );\n\n  const onSelectOption = useCallback(\n    (selectedOption: MentionTypeaheadOption, nodeToReplace: TextNode | null, closeMenu: () => void) => {\n      editor.update(() => {\n        const mentionNode = $createMentionNode(selectedOption.name);\n        if (nodeToReplace) {\n          nodeToReplace.replace(mentionNode);\n        }\n        mentionNode.select();\n        closeMenu();\n      });\n    },\n    [editor],\n  );\n\n  const checkForMentionMatch = useCallback(\n    (text: string) => {\n      const slashMatch = checkForSlashTriggerMatch(text, editor);\n      if (slashMatch !== null) {\n        return null;\n      }\n      return getPossibleQueryMatch(text);\n    },\n    [checkForSlashTriggerMatch, editor],\n  );\n\n  return (\n    <LexicalTypeaheadMenuPlugin<MentionTypeaheadOption>\n      onQueryChange={setQueryString}\n      onSelectOption={onSelectOption}\n      triggerFn={checkForMentionMatch}\n      options={options}\n      menuRenderFn={(anchorElementRef, { selectedIndex, selectOptionAndCleanUp, setHighlightedIndex }) =>\n        anchorElementRef.current && results.length\n          ? ReactDOM.createPortal(\n              <div className=\"notion-like-editor typeahead-popover mentions-menu\">\n                <ul>\n                  {options.map((option, i: number) => (\n                    <MentionsTypeaheadMenuItem\n                      index={i}\n                      isSelected={selectedIndex === i}\n                      onClick={() => {\n                        setHighlightedIndex(i);\n                        selectOptionAndCleanUp(option);\n                      }}\n                      onMouseEnter={() => {\n                        setHighlightedIndex(i);\n                      }}\n                      key={option.key}\n                      option={option}\n                    />\n                  ))}\n                </ul>\n              </div>,\n              anchorElementRef.current,\n            )\n          : null\n      }\n    />\n  );\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *\n */\n.ContentEditable__root {\n  border: 0;\n  font-size: 15px;\n  display: block;\n  position: relative;\n  outline: 0;\n  padding: 8px 46px 40px;\n  min-height: 150px;\n}\n@media (max-width: 1025px) {\n  .ContentEditable__root {\n    padding-left: 8px;\n    padding-right: 8px;\n  }\n}\n\n.ContentEditable__placeholder {\n  font-size: 15px;\n  color: #999;\n  overflow: hidden;\n  position: absolute;\n  text-overflow: ellipsis;\n  top: 8px;\n  left: 46px;\n  right: 28px;\n  user-select: none;\n  white-space: nowrap;\n  display: inline-block;\n  pointer-events: none;\n}\n@media (max-width: 1025px) {\n  .ContentEditable__placeholder {\n    left: 8px;\n    right: 8px;\n  }\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport type { JSX } from 'react';\n\nimport './ContentEditable.css';\n\nimport { ContentEditable } from '@lexical/react/LexicalContentEditable';\n\ntype Props = {\n  className?: string;\n  placeholderClassName?: string;\n  placeholder: string;\n};\n\nexport default function LexicalContentEditable({ className, placeholder, placeholderClassName }: Props): JSX.Element {\n  return (\n    <ContentEditable\n      className={className ?? 'ContentEditable__root'}\n      aria-placeholder={placeholder}\n      placeholder={<div className={placeholderClassName ?? 'ContentEditable__placeholder'}>{placeholder}</div>}\n    />\n  );\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { calculateZoomLevel } from '@lexical/utils';\nimport type { LexicalEditor } from 'lexical';\nimport type * as React from 'react';\nimport type { JSX } from 'react';\nimport { useRef } from 'react';\n\nfunction clamp(value: number, min: number, max: number) {\n  return Math.min(Math.max(value, min), max);\n}\n\nconst Direction = {\n  east: 1 << 0,\n  north: 1 << 3,\n  south: 1 << 1,\n  west: 1 << 2,\n};\n\nexport default function ImageResizer({\n  onResizeStart,\n  onResizeEnd,\n  buttonRef,\n  imageRef,\n  maxWidth,\n  editor,\n  showCaption,\n  setShowCaption,\n  captionsEnabled,\n}: {\n  editor: LexicalEditor;\n  buttonRef: { current: null | HTMLButtonElement };\n  imageRef: { current: null | HTMLElement };\n  maxWidth?: number;\n  onResizeEnd: (width: 'inherit' | number, height: 'inherit' | number) => void;\n  onResizeStart: () => void;\n  setShowCaption: (show: boolean) => void;\n  showCaption: boolean;\n  captionsEnabled: boolean;\n}): JSX.Element {\n  const controlWrapperRef = useRef<HTMLDivElement>(null);\n  const userSelect = useRef({\n    priority: '',\n    value: 'default',\n  });\n  const positioningRef = useRef<{\n    currentHeight: 'inherit' | number;\n    currentWidth: 'inherit' | number;\n    direction: number;\n    isResizing: boolean;\n    ratio: number;\n    startHeight: number;\n    startWidth: number;\n    startX: number;\n    startY: number;\n  }>({\n    currentHeight: 0,\n    currentWidth: 0,\n    direction: 0,\n    isResizing: false,\n    ratio: 0,\n    startHeight: 0,\n    startWidth: 0,\n    startX: 0,\n    startY: 0,\n  });\n  const editorRootElement = editor.getRootElement();\n  // Find max width, accounting for editor padding.\n  const maxWidthContainer = maxWidth\n    ? maxWidth\n    : editorRootElement !== null\n      ? editorRootElement.getBoundingClientRect().width - 20\n      : 100;\n  const maxHeightContainer = editorRootElement !== null ? editorRootElement.getBoundingClientRect().height - 20 : 100;\n\n  const minWidth = 100;\n  const minHeight = 100;\n\n  const setStartCursor = (direction: number) => {\n    const ew = direction === Direction.east || direction === Direction.west;\n    const ns = direction === Direction.north || direction === Direction.south;\n    const nwse =\n      (direction & Direction.north && direction & Direction.west) ||\n      (direction & Direction.south && direction & Direction.east);\n\n    const cursorDir = ew ? 'ew' : ns ? 'ns' : nwse ? 'nwse' : 'nesw';\n\n    if (editorRootElement !== null) {\n      editorRootElement.style.setProperty('cursor', `${cursorDir}-resize`, 'important');\n    }\n    if (document.body !== null) {\n      document.body.style.setProperty('cursor', `${cursorDir}-resize`, 'important');\n      userSelect.current.value = document.body.style.getPropertyValue('-webkit-user-select');\n      userSelect.current.priority = document.body.style.getPropertyPriority('-webkit-user-select');\n      document.body.style.setProperty('-webkit-user-select', `none`, 'important');\n    }\n  };\n\n  const setEndCursor = () => {\n    if (editorRootElement !== null) {\n      editorRootElement.style.setProperty('cursor', 'text');\n    }\n    if (document.body !== null) {\n      document.body.style.setProperty('cursor', 'default');\n      document.body.style.setProperty('-webkit-user-select', userSelect.current.value, userSelect.current.priority);\n    }\n  };\n\n  const handlePointerDown = (event: React.PointerEvent<HTMLDivElement>, direction: number) => {\n    if (!editor.isEditable()) {\n      return;\n    }\n\n    const image = imageRef.current;\n    const controlWrapper = controlWrapperRef.current;\n\n    if (image !== null && controlWrapper !== null) {\n      event.preventDefault();\n      const { width, height } = image.getBoundingClientRect();\n      const zoom = calculateZoomLevel(image);\n      const positioning = positioningRef.current;\n      positioning.startWidth = width;\n      positioning.startHeight = height;\n      positioning.ratio = width / height;\n      positioning.currentWidth = width;\n      positioning.currentHeight = height;\n      positioning.startX = event.clientX / zoom;\n      positioning.startY = event.clientY / zoom;\n      positioning.isResizing = true;\n      positioning.direction = direction;\n\n      setStartCursor(direction);\n      onResizeStart();\n\n      controlWrapper.classList.add('image-control-wrapper--resizing');\n      image.style.height = `${height}px`;\n      image.style.width = `${width}px`;\n\n      document.addEventListener('pointermove', handlePointerMove);\n      document.addEventListener('pointerup', handlePointerUp);\n    }\n  };\n  const handlePointerMove = (event: PointerEvent) => {\n    const image = imageRef.current;\n    const positioning = positioningRef.current;\n\n    const isHorizontal = positioning.direction & (Direction.east | Direction.west);\n    const isVertical = positioning.direction & (Direction.south | Direction.north);\n\n    if (image !== null && positioning.isResizing) {\n      const zoom = calculateZoomLevel(image);\n      // Corner cursor\n      if (isHorizontal && isVertical) {\n        let diff = Math.floor(positioning.startX - event.clientX / zoom);\n        diff = positioning.direction & Direction.east ? -diff : diff;\n\n        const width = clamp(positioning.startWidth + diff, minWidth, maxWidthContainer);\n\n        const height = width / positioning.ratio;\n        image.style.width = `${width}px`;\n        image.style.height = `${height}px`;\n        positioning.currentHeight = height;\n        positioning.currentWidth = width;\n      } else if (isVertical) {\n        let diff = Math.floor(positioning.startY - event.clientY / zoom);\n        diff = positioning.direction & Direction.south ? -diff : diff;\n\n        const height = clamp(positioning.startHeight + diff, minHeight, maxHeightContainer);\n\n        image.style.height = `${height}px`;\n        positioning.currentHeight = height;\n      } else {\n        let diff = Math.floor(positioning.startX - event.clientX / zoom);\n        diff = positioning.direction & Direction.east ? -diff : diff;\n\n        const width = clamp(positioning.startWidth + diff, minWidth, maxWidthContainer);\n\n        image.style.width = `${width}px`;\n        positioning.currentWidth = width;\n      }\n    }\n  };\n  const handlePointerUp = () => {\n    const image = imageRef.current;\n    const positioning = positioningRef.current;\n    const controlWrapper = controlWrapperRef.current;\n    if (image !== null && controlWrapper !== null && positioning.isResizing) {\n      const width = positioning.currentWidth;\n      const height = positioning.currentHeight;\n      positioning.startWidth = 0;\n      positioning.startHeight = 0;\n      positioning.ratio = 0;\n      positioning.startX = 0;\n      positioning.startY = 0;\n      positioning.currentWidth = 0;\n      positioning.currentHeight = 0;\n      positioning.isResizing = false;\n\n      controlWrapper.classList.remove('image-control-wrapper--resizing');\n\n      setEndCursor();\n      onResizeEnd(width, height);\n\n      document.removeEventListener('pointermove', handlePointerMove);\n      document.removeEventListener('pointerup', handlePointerUp);\n    }\n  };\n  return (\n    <div ref={controlWrapperRef}>\n      {!showCaption && captionsEnabled && (\n        <button\n          type=\"button\"\n          className=\"image-caption-button\"\n          ref={buttonRef}\n          onClick={() => {\n            setShowCaption(!showCaption);\n          }}\n        >\n          Add Caption\n        </button>\n      )}\n      <div\n        className=\"image-resizer image-resizer-n\"\n        onPointerDown={(event) => {\n          handlePointerDown(event, Direction.north);\n        }}\n      />\n      <div\n        className=\"image-resizer image-resizer-ne\"\n        onPointerDown={(event) => {\n          handlePointerDown(event, Direction.north | Direction.east);\n        }}\n      />\n      <div\n        className=\"image-resizer image-resizer-e\"\n        onPointerDown={(event) => {\n          handlePointerDown(event, Direction.east);\n        }}\n      />\n      <div\n        className=\"image-resizer image-resizer-se\"\n        onPointerDown={(event) => {\n          handlePointerDown(event, Direction.south | Direction.east);\n        }}\n      />\n      <div\n        className=\"image-resizer image-resizer-s\"\n        onPointerDown={(event) => {\n          handlePointerDown(event, Direction.south);\n        }}\n      />\n      <div\n        className=\"image-resizer image-resizer-sw\"\n        onPointerDown={(event) => {\n          handlePointerDown(event, Direction.south | Direction.west);\n        }}\n      />\n      <div\n        className=\"image-resizer image-resizer-w\"\n        onPointerDown={(event) => {\n          handlePointerDown(event, Direction.west);\n        }}\n      />\n      <div\n        className=\"image-resizer image-resizer-nw\"\n        onPointerDown={(event) => {\n          handlePointerDown(event, Direction.north | Direction.west);\n        }}\n      />\n    </div>\n  );\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport type { LexicalCommand, LexicalEditor, NodeKey } from 'lexical';\nimport type { JSX } from 'react';\n\nimport './ImageNode.css';\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';\nimport { LexicalErrorBoundary } from '@lexical/react/LexicalErrorBoundary';\nimport { HashtagPlugin } from '@lexical/react/LexicalHashtagPlugin';\nimport { LexicalNestedComposer } from '@lexical/react/LexicalNestedComposer';\nimport { RichTextPlugin } from '@lexical/react/LexicalRichTextPlugin';\nimport { useLexicalEditable } from '@lexical/react/useLexicalEditable';\nimport { useLexicalNodeSelection } from '@lexical/react/useLexicalNodeSelection';\nimport { mergeRegister } from '@lexical/utils';\nimport {\n  $getNodeByKey,\n  $getRoot,\n  $getSelection,\n  $isNodeSelection,\n  $isRangeSelection,\n  $setSelection,\n  BLUR_COMMAND,\n  CLICK_COMMAND,\n  COMMAND_PRIORITY_EDITOR,\n  COMMAND_PRIORITY_LOW,\n  createCommand,\n  DRAGSTART_COMMAND,\n  KEY_ENTER_COMMAND,\n  KEY_ESCAPE_COMMAND,\n  SELECTION_CHANGE_COMMAND,\n} from 'lexical';\nimport { Suspense, useCallback, useEffect, useMemo, useRef, useState } from 'react';\n\nimport { useSharedHistoryContext } from '../context/SharedHistoryContext';\nimport brokenImage from '../images/image-broken.svg';\nimport EmojisPlugin from '../plugins/EmojisPlugin';\nimport LinkPlugin from '../plugins/LinkPlugin';\nimport MentionsPlugin from '../plugins/MentionsPlugin';\nimport ContentEditable from '../ui/ContentEditable';\nimport ImageResizer from '../ui/ImageResizer';\nimport { $isCaptionEditorEmpty, $isImageNode } from './ImageNode';\n\ntype ImageStatus = { error: true } | { error: false; width: number; height: number };\n\nconst imageCache = new Map<string, Promise<ImageStatus> | ImageStatus>();\n\nexport const RIGHT_CLICK_IMAGE_COMMAND: LexicalCommand<MouseEvent> = createCommand('RIGHT_CLICK_IMAGE_COMMAND');\n\nfunction DisableCaptionOnBlur({ setShowCaption }: { setShowCaption: (show: boolean) => void }) {\n  const [editor] = useLexicalComposerContext();\n  useEffect(() =>\n    editor.registerCommand(\n      BLUR_COMMAND,\n      () => {\n        if ($isCaptionEditorEmpty()) {\n          setShowCaption(false);\n        }\n        return false;\n      },\n      COMMAND_PRIORITY_EDITOR,\n    ),\n  );\n  return null;\n}\n\nfunction useSuspenseImage(src: string): ImageStatus {\n  let cached = imageCache.get(src);\n  if (cached && 'error' in cached && typeof cached.error === 'boolean') {\n    return cached;\n  } else if (!cached) {\n    cached = new Promise<ImageStatus>((resolve) => {\n      const img = new Image();\n      img.src = src;\n      img.onload = () =>\n        resolve({\n          error: false,\n          height: img.naturalHeight,\n          width: img.naturalWidth,\n        });\n      img.onerror = () => resolve({ error: true });\n    }).then((rval) => {\n      imageCache.set(src, rval);\n      return rval;\n    });\n    imageCache.set(src, cached);\n    throw cached;\n  }\n  throw cached;\n}\n\nfunction isSVG(src: string): boolean {\n  return src.toLowerCase().endsWith('.svg');\n}\n\nfunction LazyImage({\n  altText,\n  className,\n  imageRef,\n  src,\n  width,\n  height,\n  maxWidth,\n  onError,\n}: {\n  altText: string;\n  className: string | null;\n  height: 'inherit' | number;\n  imageRef: { current: null | HTMLImageElement };\n  maxWidth: number;\n  src: string;\n  width: 'inherit' | number;\n  onError: () => void;\n}): JSX.Element {\n  const isSVGImage = isSVG(src);\n  const status = useSuspenseImage(src);\n\n  useEffect(() => {\n    if (status.error) {\n      onError();\n    }\n  }, [status.error, onError]);\n\n  if (status.error) {\n    return <BrokenImage />;\n  }\n\n  // Calculate final dimensions with proper scaling\n  const calculateDimensions = () => {\n    if (!isSVGImage) {\n      return {\n        height,\n        maxWidth,\n        width,\n      };\n    }\n\n    // Use natural dimensions if available, otherwise fallback to defaults\n    const naturalWidth = status.width;\n    const naturalHeight = status.height;\n\n    let finalWidth = naturalWidth;\n    let finalHeight = naturalHeight;\n\n    // Scale down if width exceeds maxWidth while maintaining aspect ratio\n    if (finalWidth > maxWidth) {\n      const scale = maxWidth / finalWidth;\n      finalWidth = maxWidth;\n      finalHeight = Math.round(finalHeight * scale);\n    }\n\n    // Scale down if height exceeds maxHeight while maintaining aspect ratio\n    const maxHeight = 500;\n    if (finalHeight > maxHeight) {\n      const scale = maxHeight / finalHeight;\n      finalHeight = maxHeight;\n      finalWidth = Math.round(finalWidth * scale);\n    }\n\n    return {\n      height: finalHeight,\n      maxWidth,\n      width: finalWidth,\n    };\n  };\n\n  const imageStyle = calculateDimensions();\n\n  return (\n    <img\n      className={className || undefined}\n      src={src}\n      alt={altText}\n      ref={imageRef}\n      style={imageStyle}\n      onError={onError}\n      draggable=\"false\"\n    />\n  );\n}\n\nfunction BrokenImage(): JSX.Element {\n  return (\n    <img\n      src={brokenImage}\n      style={{\n        height: 200,\n        opacity: 0.2,\n        width: 200,\n      }}\n      draggable=\"false\"\n      alt=\"Broken image\"\n    />\n  );\n}\n\nfunction noop() {}\n\nexport default function ImageComponent({\n  src,\n  altText,\n  nodeKey,\n  width,\n  height,\n  maxWidth,\n  resizable,\n  showCaption,\n  caption,\n  captionsEnabled,\n}: {\n  altText: string;\n  caption: LexicalEditor;\n  height: 'inherit' | number;\n  maxWidth: number;\n  nodeKey: NodeKey;\n  resizable: boolean;\n  showCaption: boolean;\n  src: string;\n  width: 'inherit' | number;\n  captionsEnabled: boolean;\n}): JSX.Element {\n  const imageRef = useRef<null | HTMLImageElement>(null);\n  const buttonRef = useRef<HTMLButtonElement | null>(null);\n  const [isSelected, setSelected, clearSelection] = useLexicalNodeSelection(nodeKey);\n  const [isResizing, setIsResizing] = useState<boolean>(false);\n  const [editor] = useLexicalComposerContext();\n  const activeEditorRef = useRef<LexicalEditor | null>(null);\n  const [isLoadError, setIsLoadError] = useState<boolean>(false);\n  const isEditable = useLexicalEditable();\n  const isInNodeSelection = useMemo(\n    () =>\n      isSelected &&\n      editor.getEditorState().read(() => {\n        const selection = $getSelection();\n        return $isNodeSelection(selection) && selection.has(nodeKey);\n      }),\n    [editor, isSelected, nodeKey],\n  );\n\n  const $onEnter = useCallback(\n    (event: KeyboardEvent) => {\n      const latestSelection = $getSelection();\n      const buttonElem = buttonRef.current;\n      if (\n        $isNodeSelection(latestSelection) &&\n        latestSelection.has(nodeKey) &&\n        latestSelection.getNodes().length === 1\n      ) {\n        if (showCaption) {\n          // Move focus into nested editor\n          $setSelection(null);\n          event.preventDefault();\n          caption.focus();\n          return true;\n        } else if (buttonElem !== null && buttonElem !== document.activeElement) {\n          event.preventDefault();\n          buttonElem.focus();\n          return true;\n        }\n      }\n      return false;\n    },\n    [caption, nodeKey, showCaption],\n  );\n\n  const $onEscape = useCallback(\n    (event: KeyboardEvent) => {\n      if (activeEditorRef.current === caption || buttonRef.current === event.target) {\n        $setSelection(null);\n        editor.update(() => {\n          setSelected(true);\n          const parentRootElement = editor.getRootElement();\n          if (parentRootElement !== null) {\n            parentRootElement.focus();\n          }\n        });\n        return true;\n      }\n      return false;\n    },\n    [caption, editor, setSelected],\n  );\n\n  const onClick = useCallback(\n    (payload: MouseEvent) => {\n      const event = payload;\n\n      if (isResizing) {\n        return true;\n      }\n      if (event.target === imageRef.current) {\n        if (event.shiftKey) {\n          setSelected(!isSelected);\n        } else {\n          clearSelection();\n          setSelected(true);\n        }\n        return true;\n      }\n\n      return false;\n    },\n    [isResizing, isSelected, setSelected, clearSelection],\n  );\n\n  const onRightClick = useCallback(\n    (event: MouseEvent): void => {\n      editor.getEditorState().read(() => {\n        const latestSelection = $getSelection();\n        const domElement = event.target as HTMLElement;\n        if (\n          domElement.tagName === 'IMG' &&\n          $isRangeSelection(latestSelection) &&\n          latestSelection.getNodes().length === 1\n        ) {\n          editor.dispatchCommand(RIGHT_CLICK_IMAGE_COMMAND, event);\n        }\n      });\n    },\n    [editor],\n  );\n\n  useEffect(() => {\n    return mergeRegister(\n      editor.registerCommand(\n        SELECTION_CHANGE_COMMAND,\n        (_, activeEditor) => {\n          activeEditorRef.current = activeEditor;\n          return false;\n        },\n        COMMAND_PRIORITY_LOW,\n      ),\n      editor.registerCommand(\n        DRAGSTART_COMMAND,\n        (event) => {\n          if (event.target === imageRef.current) {\n            // TODO This is just a temporary workaround for FF to behave like other browsers.\n            // Ideally, this handles drag & drop too (and all browsers).\n            event.preventDefault();\n            return true;\n          }\n          return false;\n        },\n        COMMAND_PRIORITY_LOW,\n      ),\n    );\n  }, [editor]);\n  useEffect(() => {\n    let rootCleanup = noop;\n    return mergeRegister(\n      editor.registerCommand<MouseEvent>(CLICK_COMMAND, onClick, COMMAND_PRIORITY_LOW),\n      editor.registerCommand<MouseEvent>(RIGHT_CLICK_IMAGE_COMMAND, onClick, COMMAND_PRIORITY_LOW),\n      editor.registerCommand(KEY_ENTER_COMMAND, $onEnter, COMMAND_PRIORITY_LOW),\n      editor.registerCommand(KEY_ESCAPE_COMMAND, $onEscape, COMMAND_PRIORITY_LOW),\n      editor.registerRootListener((rootElement) => {\n        rootCleanup();\n        rootCleanup = noop;\n        if (rootElement) {\n          rootElement.addEventListener('contextmenu', onRightClick);\n          rootCleanup = () => rootElement.removeEventListener('contextmenu', onRightClick);\n        }\n      }),\n      () => rootCleanup(),\n    );\n  }, [editor, $onEnter, $onEscape, onClick, onRightClick]);\n\n  const setShowCaption = (show: boolean) => {\n    editor.update(() => {\n      const node = $getNodeByKey(nodeKey);\n      if ($isImageNode(node)) {\n        node.setShowCaption(show);\n        if (show) {\n          node.__caption.update(() => {\n            if (!$getSelection()) {\n              $getRoot().selectEnd();\n            }\n          });\n        }\n      }\n    });\n  };\n\n  const onResizeEnd = (nextWidth: 'inherit' | number, nextHeight: 'inherit' | number) => {\n    // Delay hiding the resize bars for click case\n    setTimeout(() => {\n      setIsResizing(false);\n    }, 200);\n\n    editor.update(() => {\n      const node = $getNodeByKey(nodeKey);\n      if ($isImageNode(node)) {\n        node.setWidthAndHeight(nextWidth, nextHeight);\n      }\n    });\n  };\n\n  const onResizeStart = () => {\n    setIsResizing(true);\n  };\n\n  useSharedHistoryContext();\n  // const {\n  //   settings: { showNestedEditorTreeView },\n  // } = useSettings();\n\n  const draggable = isInNodeSelection && !isResizing;\n  const isFocused = (isSelected || isResizing) && isEditable;\n  return (\n    <Suspense fallback={null}>\n      <div draggable={draggable}>\n        {isLoadError ? (\n          <BrokenImage />\n        ) : (\n          <LazyImage\n            className={isFocused ? `focused ${isInNodeSelection ? 'draggable' : ''}` : null}\n            src={src}\n            altText={altText}\n            imageRef={imageRef}\n            width={width}\n            height={height}\n            maxWidth={maxWidth}\n            onError={() => setIsLoadError(true)}\n          />\n        )}\n      </div>\n\n      {showCaption && (\n        <div className=\"image-caption-container\">\n          <LexicalNestedComposer initialEditor={caption}>\n            <DisableCaptionOnBlur setShowCaption={setShowCaption} />\n            <MentionsPlugin />\n            <LinkPlugin />\n            <EmojisPlugin />\n            <HashtagPlugin />\n            <RichTextPlugin\n              contentEditable={\n                <ContentEditable\n                  placeholder=\"Enter a caption...\"\n                  placeholderClassName=\"ImageNode__placeholder\"\n                  className=\"ImageNode__contentEditable\"\n                />\n              }\n              ErrorBoundary={LexicalErrorBoundary}\n            />\n          </LexicalNestedComposer>\n        </div>\n      )}\n      {resizable && isInNodeSelection && isFocused && (\n        <ImageResizer\n          showCaption={showCaption}\n          setShowCaption={setShowCaption}\n          editor={editor}\n          buttonRef={buttonRef}\n          imageRef={imageRef}\n          maxWidth={maxWidth}\n          onResizeStart={onResizeStart}\n          onResizeEnd={onResizeEnd}\n          captionsEnabled={!isLoadError && captionsEnabled}\n        />\n      )}\n    </Suspense>\n  );\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { $insertGeneratedNodes } from '@lexical/clipboard';\nimport { HashtagNode } from '@lexical/hashtag';\nimport { $generateHtmlFromNodes, $generateNodesFromDOM } from '@lexical/html';\nimport { LinkNode } from '@lexical/link';\nimport type {\n  DOMConversionMap,\n  DOMConversionOutput,\n  DOMExportOutput,\n  EditorConfig,\n  LexicalEditor,\n  LexicalNode,\n  LexicalUpdateJSON,\n  NodeKey,\n  RangeSelection,\n  SerializedEditor,\n  SerializedLexicalNode,\n  Spread,\n} from 'lexical';\nimport {\n  $applyNodeReplacement,\n  $createRangeSelection,\n  $extendCaretToRange,\n  $getChildCaret,\n  $getEditor,\n  $getRoot,\n  $isElementNode,\n  $isParagraphNode,\n  $selectAll,\n  $setSelection,\n  createEditor,\n  DecoratorNode,\n  LineBreakNode,\n  ParagraphNode,\n  RootNode,\n  SKIP_DOM_SELECTION_TAG,\n  TextNode,\n} from 'lexical';\nimport type { JSX } from 'react';\nimport * as React from 'react';\n\nimport { EmojiNode } from './EmojiNode';\nimport { KeywordNode } from './KeywordNode';\n\nconst ImageComponent = React.lazy(() => import('./ImageComponent'));\n\nexport interface ImagePayload {\n  altText: string;\n  caption?: LexicalEditor;\n  height?: number;\n  key?: NodeKey;\n  maxWidth?: number;\n  showCaption?: boolean;\n  src: string;\n  width?: number;\n  captionsEnabled?: boolean;\n}\n\nfunction isGoogleDocCheckboxImg(img: HTMLImageElement): boolean {\n  return (\n    img.parentElement != null &&\n    img.parentElement.tagName === 'LI' &&\n    img.previousSibling === null &&\n    img.getAttribute('aria-roledescription') === 'checkbox'\n  );\n}\n\nfunction $convertImageElement(domNode: Node): null | DOMConversionOutput {\n  const img = domNode as HTMLImageElement;\n  const src = img.getAttribute('src');\n  if (!src || src.startsWith('file:///') || isGoogleDocCheckboxImg(img)) {\n    return null;\n  }\n  const { alt: altText, width, height } = img;\n  const node = $createImageNode({ altText, height, src, width });\n  return { node };\n}\n\nexport function $isCaptionEditorEmpty(): boolean {\n  // Search the document for any non-element node\n  // to determine if it's empty or not\n  for (const { origin } of $extendCaretToRange($getChildCaret($getRoot(), 'next'))) {\n    if (!$isElementNode(origin)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport type SerializedImageNode = Spread<\n  {\n    altText: string;\n    caption: SerializedEditor;\n    height?: number;\n    maxWidth: number;\n    showCaption: boolean;\n    src: string;\n    width?: number;\n  },\n  SerializedLexicalNode\n>;\n\nexport class ImageNode extends DecoratorNode<JSX.Element> {\n  __src: string;\n  __altText: string;\n  __width: 'inherit' | number;\n  __height: 'inherit' | number;\n  __maxWidth: number;\n  __showCaption: boolean;\n  __caption: LexicalEditor;\n  // Captions cannot yet be used within editor cells\n  __captionsEnabled: boolean;\n\n  static getType(): string {\n    return 'image';\n  }\n\n  static clone(node: ImageNode): ImageNode {\n    return new ImageNode(\n      node.__src,\n      node.__altText,\n      node.__maxWidth,\n      node.__width,\n      node.__height,\n      node.__showCaption,\n      node.__caption,\n      node.__captionsEnabled,\n      node.__key,\n    );\n  }\n\n  static importJSON(serializedNode: SerializedImageNode): ImageNode {\n    const { altText, height, width, maxWidth, src, showCaption } = serializedNode;\n    return $createImageNode({\n      altText,\n      height,\n      maxWidth,\n      showCaption,\n      src,\n      width,\n    }).updateFromJSON(serializedNode);\n  }\n\n  updateFromJSON(serializedNode: LexicalUpdateJSON<SerializedImageNode>): this {\n    const node = super.updateFromJSON(serializedNode);\n    const { caption } = serializedNode;\n\n    const nestedEditor = node.__caption;\n    const editorState = nestedEditor.parseEditorState(caption.editorState);\n    if (!editorState.isEmpty()) {\n      nestedEditor.setEditorState(editorState);\n    }\n    return node;\n  }\n\n  exportDOM(): DOMExportOutput {\n    const imgElement = document.createElement('img');\n    imgElement.setAttribute('src', this.__src);\n    imgElement.setAttribute('alt', this.__altText);\n    imgElement.setAttribute('width', this.__width.toString());\n    imgElement.setAttribute('height', this.__height.toString());\n\n    if (this.__showCaption && this.__caption) {\n      const captionEditor = this.__caption;\n      const captionHtml = captionEditor.read(() => {\n        if ($isCaptionEditorEmpty()) {\n          return null;\n        }\n        // Don't serialize the wrapping paragraph if there is only one\n        let selection: null | RangeSelection = null;\n        const firstChild = $getRoot().getFirstChild();\n        if ($isParagraphNode(firstChild) && firstChild.getNextSibling() === null) {\n          selection = $createRangeSelection();\n          selection.anchor.set(firstChild.getKey(), 0, 'element');\n          selection.focus.set(firstChild.getKey(), firstChild.getChildrenSize(), 'element');\n        }\n        return $generateHtmlFromNodes(captionEditor, selection);\n      });\n      if (captionHtml) {\n        const figureElement = document.createElement('figure');\n        const figcaptionElement = document.createElement('figcaption');\n        figcaptionElement.innerHTML = captionHtml;\n\n        figureElement.appendChild(imgElement);\n        figureElement.appendChild(figcaptionElement);\n\n        return { element: figureElement };\n      }\n    }\n\n    return { element: imgElement };\n  }\n\n  static importDOM(): DOMConversionMap | null {\n    return {\n      figcaption: () => ({\n        conversion: () => ({ node: null }),\n        priority: 0,\n      }),\n      figure: () => ({\n        conversion: (node) => {\n          return {\n            after: (childNodes) => {\n              const imageNodes = childNodes.filter($isImageNode);\n              const figcaption = node.querySelector('figcaption');\n              if (figcaption) {\n                for (const imgNode of imageNodes) {\n                  imgNode.setShowCaption(true);\n                  imgNode.__caption.update(\n                    () => {\n                      const editor = $getEditor();\n                      $insertGeneratedNodes(editor, $generateNodesFromDOM(editor, figcaption), $selectAll());\n                      $setSelection(null);\n                    },\n                    { tag: SKIP_DOM_SELECTION_TAG },\n                  );\n                }\n              }\n              return imageNodes;\n            },\n            node: null,\n          };\n        },\n        priority: 0,\n      }),\n      img: () => ({\n        conversion: $convertImageElement,\n        priority: 0,\n      }),\n    };\n  }\n\n  constructor(\n    src: string,\n    altText: string,\n    maxWidth: number,\n    width?: 'inherit' | number,\n    height?: 'inherit' | number,\n    showCaption?: boolean,\n    caption?: LexicalEditor,\n    captionsEnabled?: boolean,\n    key?: NodeKey,\n  ) {\n    super(key);\n    this.__src = src;\n    this.__altText = altText;\n    this.__maxWidth = maxWidth;\n    this.__width = width || 'inherit';\n    this.__height = height || 'inherit';\n    this.__showCaption = showCaption || false;\n    this.__caption =\n      caption ||\n      createEditor({\n        namespace: 'Playground/ImageNodeCaption',\n        nodes: [RootNode, TextNode, LineBreakNode, ParagraphNode, LinkNode, EmojiNode, HashtagNode, KeywordNode],\n      });\n    this.__captionsEnabled = captionsEnabled || captionsEnabled === undefined;\n  }\n\n  exportJSON(): SerializedImageNode {\n    return {\n      ...super.exportJSON(),\n      altText: this.getAltText(),\n      caption: this.__caption.toJSON(),\n      height: this.__height === 'inherit' ? 0 : this.__height,\n      maxWidth: this.__maxWidth,\n      showCaption: this.__showCaption,\n      src: this.getSrc(),\n      width: this.__width === 'inherit' ? 0 : this.__width,\n    };\n  }\n\n  setWidthAndHeight(width: 'inherit' | number, height: 'inherit' | number): void {\n    const writable = this.getWritable();\n    writable.__width = width;\n    writable.__height = height;\n  }\n\n  setShowCaption(showCaption: boolean): void {\n    const writable = this.getWritable();\n    writable.__showCaption = showCaption;\n  }\n\n  // View\n\n  createDOM(config: EditorConfig): HTMLElement {\n    const span = document.createElement('span');\n    const theme = config.theme;\n    const className = theme.image;\n    if (className !== undefined) {\n      span.className = className;\n    }\n    return span;\n  }\n\n  updateDOM(): false {\n    return false;\n  }\n\n  getSrc(): string {\n    return this.__src;\n  }\n\n  getAltText(): string {\n    return this.__altText;\n  }\n\n  decorate(): JSX.Element {\n    return (\n      <ImageComponent\n        src={this.__src}\n        altText={this.__altText}\n        width={this.__width}\n        height={this.__height}\n        maxWidth={this.__maxWidth}\n        nodeKey={this.getKey()}\n        showCaption={this.__showCaption}\n        caption={this.__caption}\n        captionsEnabled={this.__captionsEnabled}\n        resizable={true}\n      />\n    );\n  }\n}\n\nexport function $createImageNode({\n  altText,\n  height,\n  maxWidth = 500,\n  captionsEnabled,\n  src,\n  width,\n  showCaption,\n  caption,\n  key,\n}: ImagePayload): ImageNode {\n  return $applyNodeReplacement(\n    new ImageNode(src, altText, maxWidth, width, height, showCaption, caption, captionsEnabled, key),\n  );\n}\n\nexport function $isImageNode(node: LexicalNode | null | undefined): node is ImageNode {\n  return node instanceof ImageNode;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *\n */\n.StickyNode__contentEditable {\n  min-height: 20px;\n  border: 0;\n  resize: none;\n  cursor: text;\n  font-size: 24px;\n  caret-color: rgb(5, 5, 5);\n  display: block;\n  position: relative;\n  outline: 0;\n  padding: 10px;\n  user-select: text;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.StickyNode__placeholder {\n  font-size: 24px;\n  color: var(--color-gray-400);\n  overflow: hidden;\n  position: absolute;\n  text-overflow: ellipsis;\n  top: 30px;\n  left: 20px;\n  width: 120px;\n  user-select: none;\n  white-space: nowrap;\n  display: inline-block;\n  pointer-events: none;\n}\n\n.StickyEditorTheme__paragraph {\n  margin: 0;\n  color: var(--color-gray-900);\n  font-size: large;\n}\n\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *\n */\n\n.StickyEditorTheme__paragraph {\n  margin: 0;\n  position: 'relative';\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *\n */\n\n :root {\n  --inline-code-bg: #f6e9c7;\n  --inline-code-fg: #b94a00;\n}\n[data-theme=\"dark\"] {\n  --inline-code-bg: #2d2d2d;\n  --inline-code-fg: #ffb86c;\n}\n\n\n.NotionLikeEditorTheme__paragraph {\n  margin: 0;\n  position: relative;\n}\n.NotionLikeEditorTheme__quote {\n  margin: 0;\n  margin-left: 20px;\n  margin-bottom: 10px;\n  font-size: 15px;\n  color: var(--color-base-content);\n  border-left-color: var(--color-gray-400);\n  border-left-width: 4px;\n  border-left-style: solid;\n  padding-left: 16px;\n}\n.NotionLikeEditorTheme__h1 {\n  font-size: 24px;\n  color: var(--color-base-content);\n  font-weight: 400;\n  margin: 0;\n}\n.NotionLikeEditorTheme__h2 {\n  font-size: 15px;\n  color: var(--color-base-content);\n  font-weight: 700;\n  margin: 0;\n  text-transform: uppercase;\n}\n.NotionLikeEditorTheme__h3 {\n  font-size: 12px;\n  margin: 0;\n  text-transform: uppercase;\n}\n.NotionLikeEditorTheme__indent {\n  --lexical-indent-base-value: 40px;\n}\n.NotionLikeEditorTheme__textBold {\n  font-weight: bold;\n}\n.NotionLikeEditorTheme__paragraph mark {\n  background-color: unset;\n}\n.NotionLikeEditorTheme__textHighlight {\n  background: color-mix(in oklab, var(--color-warning) 14%, transparent);\n  border-bottom: 2px solid color-mix(in oklab, var(--color-warning) 30%, transparent);\n}\n.NotionLikeEditorTheme__textItalic {\n  font-style: italic;\n}\n.NotionLikeEditorTheme__textUnderline {\n  text-decoration: underline;\n}\n\n.NotionLikeEditorTheme__textStrikethrough {\n  text-decoration: line-through;\n}\n\n.NotionLikeEditorTheme__textUnderlineStrikethrough {\n  text-decoration: underline line-through;\n}\n\n.NotionLikeEditorTheme__tabNode {\n  position: relative;\n  text-decoration: none;\n}\n\n.NotionLikeEditorTheme__tabNode.NotionLikeEditorTheme__textUnderline::after {\n  content: '';\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0.15em;\n  border-bottom: 0.1em solid currentColor;\n}\n\n.NotionLikeEditorTheme__tabNode.NotionLikeEditorTheme__textStrikethrough::before {\n  content: '';\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0.69em;\n  border-top: 0.1em solid currentColor;\n}\n\n.NotionLikeEditorTheme__tabNode.NotionLikeEditorTheme__textUnderlineStrikethrough::before,\n.NotionLikeEditorTheme__tabNode.NotionLikeEditorTheme__textUnderlineStrikethrough::after {\n  content: '';\n  position: absolute;\n  left: 0;\n  right: 0;\n}\n\n.NotionLikeEditorTheme__tabNode.NotionLikeEditorTheme__textUnderlineStrikethrough::before {\n  top: 0.69em;\n  border-top: 0.1em solid currentColor;\n}\n\n.NotionLikeEditorTheme__tabNode.NotionLikeEditorTheme__textUnderlineStrikethrough::after {\n  bottom: 0.05em;\n  border-bottom: 0.1em solid currentColor;\n}\n\n.NotionLikeEditorTheme__textSubscript {\n  font-size: 0.8em;\n  vertical-align: sub;\n}\n.NotionLikeEditorTheme__textSuperscript {\n  font-size: 0.8em;\n  vertical-align: super;\n}\n.NotionLikeEditorTheme__textCode {\n  background-color: var(--inline-code-bg, #f6e9c7);\n  color: var(--inline-code-fg, #b94a00);\n  padding: 1px 0.4em;\n  border-radius: 4px;\n  font-family: Menlo, Consolas, Monaco, monospace;\n  font-size: 94%;\n  /* ËøΩÂä†: Ë°åÂÜÖ„ÅßÊäò„ÇäËøî„Åó */\n  word-break: break-word;\n}\n.NotionLikeEditorTheme__textLowercase {\n  text-transform: lowercase;\n}\n.NotionLikeEditorTheme__textUppercase {\n  text-transform: uppercase;\n}\n.NotionLikeEditorTheme__textCapitalize {\n  text-transform: capitalize;\n}\n.NotionLikeEditorTheme__hashtag {\n  background-color: color-mix(in oklab, var(--color-primary) 15%, transparent);\n  border-bottom: 1px solid color-mix(in oklab, var(--color-primary) 30%, transparent);\n}\n.NotionLikeEditorTheme__link {\n  color: var(--color-primary);\n  text-decoration: none;\n}\n.NotionLikeEditorTheme__link:hover {\n  text-decoration: underline;\n  cursor: pointer;\n}\n.NotionLikeEditorTheme__blockCursor {\n  display: block;\n  pointer-events: none;\n  position: absolute;\n}\n.NotionLikeEditorTheme__blockCursor:after {\n  content: '';\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: CursorBlink 1.1s steps(2, start) infinite;\n}\n@keyframes CursorBlink {\n  to {\n    visibility: hidden;\n  }\n}\n.NotionLikeEditorTheme__code {\n  background-color: var(--color-base-100) !important;\n  font-family: Menlo, Consolas, Monaco, monospace;\n  display: block;\n  padding: 8px 8px 8px 52px;\n  line-height: 1.53;\n  font-size: 13px;\n  margin: 0;\n  margin-top: 8px;\n  margin-bottom: 8px;\n  overflow-x: auto;\n  position: relative;\n  tab-size: 2;\n}\n\n/* Shiki dual themes: dark mode ÊôÇ„Å´ CSS Â§âÊï∞„ÅßËâ≤„ÇíÂàá„ÇäÊõø„Åà */\n[data-theme=\"dark\"] .NotionLikeEditorTheme__code span {\n  color: var(--shiki-dark) !important;\n}\n\n.NotionLikeEditorTheme__code:before {\n  content: attr(data-gutter);\n  position: absolute;\n  background-color: var(--color-base-100) !important;\n  left: 0;\n  top: 0;\n  border-right: 1px solid var(--color-base-300);\n  padding: 8px;\n  color: var(--color-base-content);\n  white-space: pre-wrap;\n  text-align: right;\n  min-width: 25px;\n}\n.NotionLikeEditorTheme__tableScrollableWrapper {\n  overflow-x: auto;\n  margin: 0px 25px 30px 0px;\n}\n.NotionLikeEditorTheme__table {\n  border-collapse: collapse;\n  border-spacing: 0;\n  overflow-y: scroll;\n  overflow-x: scroll;\n  table-layout: fixed;\n  width: fit-content;\n  margin-top: 25px;\n  margin-bottom: 30px;\n}\n.NotionLikeEditorTheme__tableScrollableWrapper > .NotionLikeEditorTheme__table {\n  /* Remove the table's vertical margin and put it on the wrapper */\n  margin-top: 0;\n  margin-bottom: 0;\n}\n.NotionLikeEditorTheme__tableAlignmentCenter {\n  margin-left: auto;\n  margin-right: auto;\n}\n.NotionLikeEditorTheme__tableAlignmentRight {\n  margin-left: auto;\n}\n.NotionLikeEditorTheme__tableScrollableWrapper.NotionLikeEditorTheme__tableFrozenRow {\n  /* position:sticky needs overflow:clip or visible\n     https://github.com/w3c/csswg-drafts/issues/865#issuecomment-350585274 */\n  overflow-x: clip;\n}\n.NotionLikeEditorTheme__tableFrozenRow tr:nth-of-type(1) > td {\n  overflow: clip;\n  background-color: var(--color-base-100);\n  position: sticky;\n  z-index: 2;\n  top: 44px;\n}\n.NotionLikeEditorTheme__tableFrozenRow tr:nth-of-type(1) > th {\n  overflow: clip;\n  background-color: var(--color-base-100);\n  position: sticky;\n  z-index: 2;\n  top: 44px;\n}\n.NotionLikeEditorTheme__tableFrozenRow tr:nth-of-type(1) > th:after,\n.NotionLikeEditorTheme__tableFrozenRow tr:nth-of-type(1) > td:after {\n  content: '';\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  border-bottom: 1px solid var(--color-base-300);\n}\n.NotionLikeEditorTheme__tableFrozenColumn tr > td:first-child {\n  background-color: var(--color-base-100);\n  position: sticky;\n  z-index: 2;\n  left: 0;\n}\n.NotionLikeEditorTheme__tableFrozenColumn tr > th:first-child {\n  background-color: var(--color-base-100);\n  position: sticky;\n  z-index: 2;\n  left: 0;\n}\n.NotionLikeEditorTheme__tableFrozenColumn tr > :first-child::after {\n  content: '';\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  height: 100%;\n  border-right: 1px solid var(--color-base-300);\n}\n.NotionLikeEditorTheme__tableRowStriping tr:nth-child(even),\n.NotionLikeEditorTheme__tableFrozenColumn\n  .NotionLikeEditorTheme__table.NotionLikeEditorTheme__tableRowStriping\n  tr:nth-child(even)\n  > td:first-child {\n  background-color: var(--color-base-100);\n}\n.NotionLikeEditorTheme__tableSelection *::selection {\n  background-color: transparent;\n}\n.NotionLikeEditorTheme__tableSelected {\n  outline: 2px solid var(--color-primary);\n}\n.NotionLikeEditorTheme__tableCell {\n  border: 1px solid var(--color-neutral);\n  background-color: var(--color-base-100);\n  width: 75px;\n  vertical-align: top;\n  text-align: start;\n  padding: 6px 8px;\n  position: relative;\n  outline: none;\n  overflow: auto;\n}\n/*\n  A firefox workaround to allow scrolling of overflowing table cell\n  ref: https://bugzilla.mozilla.org/show_bug.cgi?id=1904159\n*/\n.NotionLikeEditorTheme__tableCell > * {\n  overflow: inherit;\n}\n.NotionLikeEditorTheme__tableCellResizer {\n  position: absolute;\n  right: -4px;\n  height: 100%;\n  width: 8px;\n  cursor: ew-resize;\n  z-index: 10;\n  top: 0;\n}\n.NotionLikeEditorTheme__tableCellHeader {\n  background-color: var(--color-base-200);\n  text-align: start;\n}\n.NotionLikeEditorTheme__tableCellSelected {\n  caret-color: transparent;\n}\n.NotionLikeEditorTheme__tableCellSelected::after {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  background-color: highlight;\n  mix-blend-mode: multiply;\n  content: '';\n  pointer-events: none;\n}\n.NotionLikeEditorTheme__tableAddColumns {\n  position: absolute;\n  background-color: var(--color-accent-content);\n  height: 100%;\n  animation: table-controls 0.2s ease;\n  border: 0;\n  cursor: pointer;\n}\n.NotionLikeEditorTheme__tableAddColumns:after {\n  background-image: url(../images/icons/plus.svg);\n  background-size: contain;\n  background-position: center;\n  background-repeat: no-repeat;\n  display: block;\n  content: ' ';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0.4;\n}\n.NotionLikeEditorTheme__tableAddColumns:hover,\n.NotionLikeEditorTheme__tableAddRows:hover {\n  background-color: color-mix(in oklab, var(--color-accent) 50%, transparent);\n}\n.NotionLikeEditorTheme__tableAddRows {\n  position: absolute;\n  width: calc(100% - 25px);\n  background-color: var(--color-accent-content);\n  animation: table-controls 0.2s ease;\n  border: 0;\n  cursor: pointer;\n}\n.NotionLikeEditorTheme__tableAddRows:after {\n  background-image: url(../images/icons/plus.svg);\n  background-size: contain;\n  background-position: center;\n  background-repeat: no-repeat;\n  display: block;\n  content: ' ';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0.4;\n}\n@keyframes table-controls {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n.NotionLikeEditorTheme__tableCellResizeRuler {\n  display: block;\n  position: absolute;\n  width: 1px;\n  background-color: var(--color-primary);\n  height: 100%;\n  top: 0;\n}\n.NotionLikeEditorTheme__tableCellActionButtonContainer {\n  display: block;\n  right: 5px;\n  top: 6px;\n  position: absolute;\n  z-index: 4;\n  width: 20px;\n  height: 20px;\n}\n.NotionLikeEditorTheme__tableCellActionButton {\n  background-color: var(--color-base-200);\n  display: block;\n  border: 0;\n  border-radius: 20px;\n  width: 20px;\n  height: 20px;\n  color: var(--color-base-content);\n  cursor: pointer;\n}\n.NotionLikeEditorTheme__tableCellActionButton:hover {\n  background-color: var(--color-base-300);\n}\n.NotionLikeEditorTheme__characterLimit {\n  display: inline;\n  background-color: var(--color-error);\n}\n.NotionLikeEditorTheme__ul {\n  padding: 0;\n  margin: 0;\n  list-style: disc;\n  list-style-position: outside;\n}\n.NotionLikeEditorTheme__ol {\n  padding: 0;\n  margin: 0;\n  list-style: decimal;\n  list-style-position: outside;\n}\n.NotionLikeEditorTheme__ol1 {\n  padding: 0;\n  margin: 0;\n  list-style-position: outside;\n}\n.NotionLikeEditorTheme__ol2 {\n  padding: 0;\n  margin: 0;\n  list-style-type: upper-alpha;\n  list-style-position: outside;\n}\n.NotionLikeEditorTheme__ol3 {\n  padding: 0;\n  margin: 0;\n  list-style-type: lower-alpha;\n  list-style-position: outside;\n}\n.NotionLikeEditorTheme__ol4 {\n  padding: 0;\n  margin: 0;\n  list-style-type: upper-roman;\n  list-style-position: outside;\n}\n.NotionLikeEditorTheme__ol5 {\n  padding: 0;\n  margin: 0;\n  list-style-type: lower-roman;\n  list-style-position: outside;\n}\n.NotionLikeEditorTheme__listItem {\n  margin: 0 32px;\n  font-family: var(--listitem-marker-font-family);\n  font-size: var(--listitem-marker-font-size);\n  background-color: var(--listitem-marker-background-color);\n}\n.NotionLikeEditorTheme__listItem::marker {\n  color: var(--listitem-marker-color);\n  background-color: var(--listitem-marker-background-color);\n  font-family: var(--listitem-marker-font-family);\n  font-size: var(--listitem-marker-font-size);\n}\n.NotionLikeEditorTheme__listItemChecked,\n.NotionLikeEditorTheme__listItemUnchecked {\n  position: relative;\n  margin-left: 0.5em;\n  margin-right: 0.5em;\n  padding-left: 1.5em;\n  padding-right: 1.5em;\n  list-style-type: none;\n  outline: none;\n  display: block;\n  min-height: 1.5em;\n}\n.NotionLikeEditorTheme__listItemChecked > *,\n.NotionLikeEditorTheme__listItemUnchecked > * {\n  margin-left: 0.01em;\n}\n.NotionLikeEditorTheme__listItemUnchecked:before,\n.NotionLikeEditorTheme__listItemChecked:before {\n  content: '\\200B';\n  width: 0.9em;\n  height: 0.9em;\n  top: 50%;\n  left: 0;\n  cursor: pointer;\n  display: block;\n  background-size: cover;\n  position: absolute;\n  transform: translateY(-50%);\n}\n.NotionLikeEditorTheme__listItemChecked {\n  text-decoration: line-through;\n}\n.NotionLikeEditorTheme__listItemUnchecked:focus:before,\n.NotionLikeEditorTheme__listItemChecked:focus:before {\n  box-shadow: 0 0 0 2px color-mix(in oklab, var(--color-primary) 50%, transparent);\n  border-radius: 2px;\n}\n.NotionLikeEditorTheme__listItemUnchecked:before {\n  border: 1px solid var(--color-neutral);\n  border-radius: 2px;\n}\n.NotionLikeEditorTheme__listItemChecked:before {\n  border: 1px solid var(--color-primary);\n  border-radius: 2px;\n  background-color: var(--color-primary);\n  background-repeat: no-repeat;\n}\n.NotionLikeEditorTheme__listItemChecked:after {\n  content: '';\n  cursor: pointer;\n  border-color: var(--color-primary-content);\n  border-style: solid;\n  position: absolute;\n  display: block;\n  top: 45%;\n  width: 0.2em;\n  left: 0.35em;\n  height: 0.4em;\n  transform: translateY(-50%) rotate(45deg);\n  border-width: 0 0.1em 0.1em 0;\n}\n.NotionLikeEditorTheme__nestedListItem {\n  list-style-type: none;\n}\n.NotionLikeEditorTheme__nestedListItem:before,\n.NotionLikeEditorTheme__nestedListItem:after {\n  display: none;\n}\n.NotionLikeEditorTheme__tokenComment {\n  color: var(--color-neutral-content);\n}\n.NotionLikeEditorTheme__tokenDeleted {\n  border-image: linear-gradient(to right, var(--color-error) 50%, color-mix(in oklab, var(--color-error) 80%, transparent) 50%) fill 0/0/0\n    100vw;\n}\n.NotionLikeEditorTheme__tokenInserted {\n  border-image: linear-gradient(to right, var(--color-success) 50%, color-mix(in oklab, var(--color-success) 80%, transparent) 50%) fill 0/0/0\n    100vw;\n}\n.NotionLikeEditorTheme__tokenUnchanged {\n  border-image: linear-gradient(to right, var(--color-base-300) 50%, var(--color-base-200) 50%) fill 0/0/0\n    100vw;\n}\n.NotionLikeEditorTheme__tokenPunctuation {\n  color: var(--color-neutral);\n}\n.NotionLikeEditorTheme__tokenProperty {\n  color: var(--color-accent);\n}\n.NotionLikeEditorTheme__tokenSelector {\n  color: var(--color-success);\n}\n.NotionLikeEditorTheme__tokenOperator {\n  color: var(--color-warning);\n}\n.NotionLikeEditorTheme__tokenAttr {\n  color: var(--color-info);\n}\n.NotionLikeEditorTheme__tokenVariable {\n  color: var(--color-warning);\n}\n.NotionLikeEditorTheme__tokenFunction {\n  color: var(--color-error);\n}\n.NotionLikeEditorTheme__mark {\n  background: color-mix(in oklab, var(--color-warning) 14%, transparent);\n  border-bottom: 2px solid color-mix(in oklab, var(--color-warning) 30%, transparent);\n  padding-bottom: 2px;\n}\n.NotionLikeEditorTheme__markOverlap {\n  background: color-mix(in oklab, var(--color-warning) 30%, transparent);\n  border-bottom: 2px solid color-mix(in oklab, var(--color-warning) 70%, transparent);\n}\n.NotionLikeEditorTheme__mark.selected {\n  background: color-mix(in oklab, var(--color-warning) 50%, transparent);\n  border-bottom: 2px solid var(--color-warning);\n}\n.NotionLikeEditorTheme__markOverlap.selected {\n  background: color-mix(in oklab, var(--color-warning) 70%, transparent);\n  border-bottom: 2px solid color-mix(in oklab, var(--color-warning) 70%, transparent);\n}\n.NotionLikeEditorTheme__embedBlock {\n  user-select: none;\n}\n.NotionLikeEditorTheme__embedBlockFocus {\n  outline: 2px solid var(--color-primary);\n}\n.NotionLikeEditorTheme__layoutContainer {\n  display: grid;\n  gap: 10px;\n  margin: 10px 0;\n}\n.NotionLikeEditorTheme__layoutItem {\n  border: 1px dashed var(--color-gray-400) !important;\n  padding: 8px 16px;\n  min-width: 0;\n  max-width: 100%;\n}\n.NotionLikeEditorTheme__autocomplete {\n  color: var(--color-neutral);\n}\n.NotionLikeEditorTheme__hr {\n  padding: 2px 2px;\n  border: none;\n  margin: 1em 0;\n  cursor: pointer;\n}\n.NotionLikeEditorTheme__hr:after {\n  content: '';\n  display: block;\n  height: 2px;\n  background-color: var(--color-neutral);\n  line-height: 2px;\n}\n.NotionLikeEditorTheme__hr.NotionLikeEditorTheme__hrSelected {\n  outline: 2px solid var(--color-primary);\n  user-select: none;\n}\n\n.NotionLikeEditorTheme__specialText {\n  background-color: var(--color-warning);\n  font-weight: bold;\n}\n\n.NotionLikeEditorTheme__contextMenu {\n  outline: 0;\n  background: var(--color-base-100);\n  border: 1px solid var(--color-base-300);\n  box-shadow: 0px 5px 10px color-mix(in oklab, var(--color-base-content) 30%, transparent);\n  border-radius: 8px;\n}\n.NotionLikeEditorTheme__contextMenu button:first-child {\n  border-radius: 8px 8px 0px 0px;\n}\n.NotionLikeEditorTheme__contextMenu button:last-child {\n  border-radius: 0px 0px 8px 8px;\n}\n.NotionLikeEditorTheme__contextMenuItem {\n  width: 100%;\n  display: block;\n}\n.NotionLikeEditorTheme__contextMenuItem {\n  display: flex;\n  justify-content: left;\n  width: 100%;\n  background-color: var(--color-base-100);\n  color: var(--color-base-content);\n  border: 0;\n  border-radius: 0px;\n  font-size: 15px;\n  text-align: left;\n  line-height: 20px;\n  padding: 8px;\n  padding-right: 14px;\n  outline: 0;\n  cursor: pointer;\n}\n.NotionLikeEditorTheme__contextMenuItem.open {\n  background: var(--color-base-300);\n}\n.NotionLikeEditorTheme__contextMenuItem:focus,\n.NotionLikeEditorTheme__contextMenuItem:not([disabled]):active {\n  background: var(--color-base-200);\n}\n.NotionLikeEditorTheme__contextMenuItem:disabled {\n  background: var(--color-base-100);\n  color: var(--color-neutral);\n  cursor: not-allowed;\n}\n.NotionLikeEditorTheme__contextMenuItemIcon {\n  width: 20px;\n  margin-right: 8px;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport type { EditorThemeClasses } from 'lexical';\n\nimport './NotionLikeEditorTheme.css';\n\nconst theme: EditorThemeClasses = {\n  autocomplete: 'NotionLikeEditorTheme__autocomplete',\n  blockCursor: 'NotionLikeEditorTheme__blockCursor',\n  characterLimit: 'NotionLikeEditorTheme__characterLimit',\n  code: 'NotionLikeEditorTheme__code',\n  codeHighlight: {\n    atrule: 'NotionLikeEditorTheme__tokenAttr',\n    attr: 'NotionLikeEditorTheme__tokenAttr',\n    boolean: 'NotionLikeEditorTheme__tokenProperty',\n    builtin: 'NotionLikeEditorTheme__tokenSelector',\n    cdata: 'NotionLikeEditorTheme__tokenComment',\n    char: 'NotionLikeEditorTheme__tokenSelector',\n    class: 'NotionLikeEditorTheme__tokenFunction',\n    'class-name': 'NotionLikeEditorTheme__tokenFunction',\n    comment: 'NotionLikeEditorTheme__tokenComment',\n    constant: 'NotionLikeEditorTheme__tokenProperty',\n    deleted: 'NotionLikeEditorTheme__tokenDeleted',\n    doctype: 'NotionLikeEditorTheme__tokenComment',\n    entity: 'NotionLikeEditorTheme__tokenOperator',\n    function: 'NotionLikeEditorTheme__tokenFunction',\n    important: 'NotionLikeEditorTheme__tokenVariable',\n    inserted: 'NotionLikeEditorTheme__tokenInserted',\n    keyword: 'NotionLikeEditorTheme__tokenAttr',\n    namespace: 'NotionLikeEditorTheme__tokenVariable',\n    number: 'NotionLikeEditorTheme__tokenProperty',\n    operator: 'NotionLikeEditorTheme__tokenOperator',\n    prolog: 'NotionLikeEditorTheme__tokenComment',\n    property: 'NotionLikeEditorTheme__tokenProperty',\n    punctuation: 'NotionLikeEditorTheme__tokenPunctuation',\n    regex: 'NotionLikeEditorTheme__tokenVariable',\n    selector: 'NotionLikeEditorTheme__tokenSelector',\n    string: 'NotionLikeEditorTheme__tokenSelector',\n    symbol: 'NotionLikeEditorTheme__tokenProperty',\n    tag: 'NotionLikeEditorTheme__tokenProperty',\n    unchanged: 'NotionLikeEditorTheme__tokenUnchanged',\n    url: 'NotionLikeEditorTheme__tokenOperator',\n    variable: 'NotionLikeEditorTheme__tokenVariable',\n  },\n  embedBlock: {\n    base: 'NotionLikeEditorTheme__embedBlock',\n    focus: 'NotionLikeEditorTheme__embedBlockFocus',\n  },\n  hashtag: 'NotionLikeEditorTheme__hashtag',\n  heading: {\n    h1: 'NotionLikeEditorTheme__h1',\n    h2: 'NotionLikeEditorTheme__h2',\n    h3: 'NotionLikeEditorTheme__h3',\n    h4: 'NotionLikeEditorTheme__h4',\n    h5: 'NotionLikeEditorTheme__h5',\n    h6: 'NotionLikeEditorTheme__h6',\n  },\n  hr: 'NotionLikeEditorTheme__hr',\n  hrSelected: 'NotionLikeEditorTheme__hrSelected',\n  image: 'editor-image',\n  indent: 'NotionLikeEditorTheme__indent',\n  layoutContainer: 'NotionLikeEditorTheme__layoutContainer',\n  layoutItem: 'NotionLikeEditorTheme__layoutItem',\n  link: 'NotionLikeEditorTheme__link',\n  list: {\n    checklist: 'NotionLikeEditorTheme__checklist',\n    listitem: 'NotionLikeEditorTheme__listItem',\n    listitemChecked: 'NotionLikeEditorTheme__listItemChecked',\n    listitemUnchecked: 'NotionLikeEditorTheme__listItemUnchecked',\n    nested: {\n      listitem: 'NotionLikeEditorTheme__nestedListItem',\n    },\n    olDepth: [\n      'NotionLikeEditorTheme__ol1',\n      'NotionLikeEditorTheme__ol2',\n      'NotionLikeEditorTheme__ol3',\n      'NotionLikeEditorTheme__ol4',\n      'NotionLikeEditorTheme__ol5',\n    ],\n    ul: 'NotionLikeEditorTheme__ul',\n    ol: 'NotionLikeEditorTheme__ol',\n  },\n  mark: 'NotionLikeEditorTheme__mark',\n  markOverlap: 'NotionLikeEditorTheme__markOverlap',\n  paragraph: 'NotionLikeEditorTheme__paragraph',\n  quote: 'NotionLikeEditorTheme__quote',\n  specialText: 'NotionLikeEditorTheme__specialText',\n  tab: 'NotionLikeEditorTheme__tabNode',\n  table: 'NotionLikeEditorTheme__table',\n  tableAddColumns: 'NotionLikeEditorTheme__tableAddColumns',\n  tableAddRows: 'NotionLikeEditorTheme__tableAddRows',\n  tableAlignment: {\n    center: 'NotionLikeEditorTheme__tableAlignmentCenter',\n    right: 'NotionLikeEditorTheme__tableAlignmentRight',\n  },\n  tableCell: 'NotionLikeEditorTheme__tableCell',\n  tableCellActionButton: 'NotionLikeEditorTheme__tableCellActionButton',\n  tableCellActionButtonContainer: 'NotionLikeEditorTheme__tableCellActionButtonContainer',\n  tableCellHeader: 'NotionLikeEditorTheme__tableCellHeader',\n  tableCellResizer: 'NotionLikeEditorTheme__tableCellResizer',\n  tableCellSelected: 'NotionLikeEditorTheme__tableCellSelected',\n  tableFrozenColumn: 'NotionLikeEditorTheme__tableFrozenColumn',\n  tableFrozenRow: 'NotionLikeEditorTheme__tableFrozenRow',\n  tableRowStriping: 'NotionLikeEditorTheme__tableRowStriping',\n  tableScrollableWrapper: 'NotionLikeEditorTheme__tableScrollableWrapper',\n  tableSelected: 'NotionLikeEditorTheme__tableSelected',\n  tableSelection: 'NotionLikeEditorTheme__tableSelection',\n  text: {\n    bold: 'NotionLikeEditorTheme__textBold',\n    capitalize: 'NotionLikeEditorTheme__textCapitalize',\n    code: 'NotionLikeEditorTheme__textCode',\n    highlight: 'NotionLikeEditorTheme__textHighlight',\n    italic: 'NotionLikeEditorTheme__textItalic',\n    lowercase: 'NotionLikeEditorTheme__textLowercase',\n    strikethrough: 'NotionLikeEditorTheme__textStrikethrough',\n    subscript: 'NotionLikeEditorTheme__textSubscript',\n    superscript: 'NotionLikeEditorTheme__textSuperscript',\n    underline: 'NotionLikeEditorTheme__textUnderline',\n    underlineStrikethrough: 'NotionLikeEditorTheme__textUnderlineStrikethrough',\n    uppercase: 'NotionLikeEditorTheme__textUppercase',\n  },\n};\n\nexport default theme;\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport type { EditorThemeClasses } from 'lexical';\n\nimport './StickyEditorTheme.css';\n\nimport baseTheme from './NotionLikeEditorTheme';\n\nconst theme: EditorThemeClasses = {\n  ...baseTheme,\n  paragraph: 'StickyEditorTheme__paragraph',\n};\n\nexport default theme;\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport type { LexicalEditor, NodeKey } from 'lexical';\nimport type { JSX } from 'react';\n\nimport './StickyNode.css';\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';\nimport { LexicalErrorBoundary } from '@lexical/react/LexicalErrorBoundary';\nimport { LexicalNestedComposer } from '@lexical/react/LexicalNestedComposer';\nimport { PlainTextPlugin } from '@lexical/react/LexicalPlainTextPlugin';\nimport { calculateZoomLevel } from '@lexical/utils';\nimport { $getNodeByKey } from 'lexical';\nimport { useEffect, useLayoutEffect, useRef, useState } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport { useSharedHistoryContext } from '../context/SharedHistoryContext';\nimport StickyEditorTheme from '../themes/StickyEditorTheme';\nimport ContentEditable from '../ui/ContentEditable';\nimport { $isStickyNode } from './StickyNode';\n\ntype Positioning = {\n  isDragging: boolean;\n  offsetX: number;\n  offsetY: number;\n  rootElementRect: null | ClientRect;\n  x: number;\n  y: number;\n};\n\nfunction positionSticky(stickyElem: HTMLElement, positioning: Positioning): void {\n  const style = stickyElem.style;\n  // .editor-scroller ÂÜÖ„Åß„ÅÆÁõ∏ÂØæ‰ΩçÁΩÆ„ÅßÈÖçÁΩÆ\n  style.top = `${positioning.y}px`;\n  style.left = `${positioning.x}px`;\n}\n\nexport default function StickyComponent({\n  x,\n  y,\n  nodeKey,\n  color,\n  caption,\n}: {\n  caption: LexicalEditor;\n  color: 'pink' | 'yellow';\n  nodeKey: NodeKey;\n  x: number;\n  y: number;\n}): JSX.Element | null {\n  const [editor] = useLexicalComposerContext();\n  const stickyContainerRef = useRef<null | HTMLDivElement>(null);\n  const [portalContainer, setPortalContainer] = useState<HTMLElement | null>(null);\n  const positioningRef = useRef<Positioning>({\n    isDragging: false,\n    offsetX: 0,\n    offsetY: 0,\n    rootElementRect: null,\n    x: 0,\n    y: 0,\n  });\n\n  // „Ç®„Éá„Ç£„Çø„Éº„ÅÆ„Çπ„ÇØ„É≠„Éº„É´„Ç≥„É≥„ÉÜ„Éä„ÇíÂèñÂæóÔºà.editor-scrollerÔºâ\n  useEffect(() => {\n    const rootElement = editor.getRootElement();\n    if (rootElement) {\n      // .editor-scroller „ÇíÊé¢„ÅôÔºà„Ç®„Éá„Ç£„Çø„Éº„ÅÆË¶™Ë¶ÅÁ¥†Ôºâ\n      const scrollerContainer = rootElement.closest('.editor-scroller');\n      if (scrollerContainer) {\n        setPortalContainer(scrollerContainer as HTMLElement);\n      } else {\n        // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ: rootElement „ÅÆË¶™Ë¶ÅÁ¥†\n        setPortalContainer(rootElement.parentElement);\n      }\n    }\n  }, [editor]);\n\n  // FlyonUI „Å®„ÅÆÁ´∂Âêà„ÇíÈò≤„Åê„Åü„ÇÅ„ÄÅ„Éê„Éñ„É™„É≥„Ç∞„Éï„Çß„Éº„Ç∫„Åß„ÅÆ„Ç§„Éô„É≥„Éà‰ºùÊí≠„ÇíÊ≠¢„ÇÅ„Çã\n  useEffect(() => {\n    const stickyContainer = stickyContainerRef.current;\n    if (!stickyContainer) return;\n\n    const stopFlyonuiEvents = (e: Event) => {\n      // FlyonUI „ÅÆ dropdown/popover „ÅåÂèçÂøú„Åó„Å™„ÅÑ„Çà„ÅÜ„Å´„Åô„Çã\n      e.stopPropagation();\n    };\n\n    // FlyonUI „ÅåÁõ£Ë¶ñ„Åô„Çã„Ç§„Éô„É≥„Éà„Çí„Ç≠„É£„Éó„ÉÅ„É£\n    stickyContainer.addEventListener('focusin', stopFlyonuiEvents);\n    stickyContainer.addEventListener('focusout', stopFlyonuiEvents);\n\n    return () => {\n      stickyContainer.removeEventListener('focusin', stopFlyonuiEvents);\n      stickyContainer.removeEventListener('focusout', stopFlyonuiEvents);\n    };\n  }, []);\n\n  useEffect(() => {\n    const position = positioningRef.current;\n    position.x = x;\n    position.y = y;\n\n    const stickyContainer = stickyContainerRef.current;\n    if (stickyContainer !== null) {\n      positionSticky(stickyContainer, position);\n    }\n  }, [x, y]);\n\n  useLayoutEffect(() => {\n    const position = positioningRef.current;\n    const resizeObserver = new ResizeObserver((entries) => {\n      for (let i = 0; i < entries.length; i++) {\n        const entry = entries[i];\n        const { target } = entry;\n        position.rootElementRect = target.getBoundingClientRect();\n        const stickyContainer = stickyContainerRef.current;\n        if (stickyContainer !== null) {\n          positionSticky(stickyContainer, position);\n        }\n      }\n    });\n\n    const removeRootListener = editor.registerRootListener((nextRootElem, prevRootElem) => {\n      if (prevRootElem !== null) {\n        resizeObserver.unobserve(prevRootElem);\n      }\n      if (nextRootElem !== null) {\n        resizeObserver.observe(nextRootElem);\n      }\n    });\n\n    const handleWindowResize = () => {\n      const rootElement = editor.getRootElement();\n      const stickyContainer = stickyContainerRef.current;\n      if (rootElement !== null && stickyContainer !== null) {\n        position.rootElementRect = rootElement.getBoundingClientRect();\n        positionSticky(stickyContainer, position);\n      }\n    };\n\n    // „Çπ„ÇØ„É≠„Éº„É´ÊôÇ„Å´ rootElementRect „ÇíÊõ¥Êñ∞„Åó„Å¶‰ΩçÁΩÆ„ÇíÂÜçË®àÁÆó\n    const handleScroll = () => {\n      const rootElement = editor.getRootElement();\n      const stickyContainer = stickyContainerRef.current;\n      if (rootElement !== null && stickyContainer !== null) {\n        position.rootElementRect = rootElement.getBoundingClientRect();\n        positionSticky(stickyContainer, position);\n      }\n    };\n\n    window.addEventListener('resize', handleWindowResize);\n    window.addEventListener('scroll', handleScroll, true); // capture phase „Åß„Çπ„ÇØ„É≠„Éº„É´„ÇíÊ§úÁü•\n\n    return () => {\n      window.removeEventListener('resize', handleWindowResize);\n      window.removeEventListener('scroll', handleScroll, true);\n      removeRootListener();\n    };\n  }, [editor]);\n\n  useEffect(() => {\n    const stickyContainer = stickyContainerRef.current;\n    if (stickyContainer !== null) {\n      // Delay adding transition so we don't trigger the\n      // transition on load of the sticky.\n      setTimeout(() => {\n        stickyContainer.style.setProperty('transition', 'top 0.3s ease 0s, left 0.3s ease 0s');\n      }, 500);\n    }\n  }, []);\n\n  const handlePointerMove = (event: PointerEvent) => {\n    const stickyContainer = stickyContainerRef.current;\n    const positioning = positioningRef.current;\n    const rootElementRect = positioning.rootElementRect;\n    const zoom = calculateZoomLevel(stickyContainer);\n    if (stickyContainer !== null && positioning.isDragging && rootElementRect !== null && portalContainer !== null) {\n      // portalContainer (.editor-scroller) „ÅÆ‰ΩçÁΩÆ„ÇíÂü∫Ê∫ñ„Å´Ë®àÁÆó\n      const portalRect = portalContainer.getBoundingClientRect();\n\n      // Êñ∞„Åó„ÅÑ‰ΩçÁΩÆ„ÇíË®àÁÆóÔºàportalContainer „Å´ÂØæ„Åô„ÇãÁõ∏ÂØæÂ∫ßÊ®ôÔºâ\n      // offsetX/offsetY „ÅØ‰ªòÁÆãÂÜÖ„ÅÆ„ÇØ„É™„ÉÉ„ÇØ‰ΩçÁΩÆÔºà„Éì„É•„Éº„Éù„Éº„ÉàÂ∫ßÊ®ô„Åß„ÅÆÂ∑ÆÂàÜÔºâ\n      let newX = (event.clientX - portalRect.left) / zoom - positioning.offsetX;\n      let newY = (event.clientY - portalRect.top) / zoom - positioning.offsetY;\n\n      // StickyComponent „ÅÆ„Çµ„Ç§„Ç∫„ÇíÂèñÂæó\n      const stickyRect = stickyContainer.getBoundingClientRect();\n      const stickyWidth = stickyRect.width / zoom;\n      const stickyHeight = stickyRect.height / zoom;\n\n      // rootElement „ÅÆÁØÑÂõ≤ÂÜÖ„Å´Âà∂Èôê\n      const maxX = rootElementRect.width - stickyWidth;\n      const maxY = rootElementRect.height - stickyHeight;\n\n      // Â¢ÉÁïå„ÉÅ„Çß„ÉÉ„ÇØÔºà0 ‰ª•‰∏ä„ÄÅÊúÄÂ§ßÂÄ§‰ª•‰∏ã„Å´Âà∂ÈôêÔºâ\n      newX = Math.max(0, Math.min(newX, maxX));\n      newY = Math.max(0, Math.min(newY, maxY));\n\n      positioning.x = newX;\n      positioning.y = newY;\n      positionSticky(stickyContainer, positioning);\n    }\n  };\n\n  const handlePointerUp = (_event: PointerEvent) => {\n    const stickyContainer = stickyContainerRef.current;\n    const positioning = positioningRef.current;\n    if (stickyContainer !== null) {\n      positioning.isDragging = false;\n      stickyContainer.classList.remove('dragging');\n      editor.update(() => {\n        const node = $getNodeByKey(nodeKey);\n        if ($isStickyNode(node)) {\n          node.setPosition(positioning.x, positioning.y);\n        }\n      });\n    }\n    document.removeEventListener('pointermove', handlePointerMove);\n    document.removeEventListener('pointerup', handlePointerUp);\n  };\n\n  const handleDelete = () => {\n    editor.update(() => {\n      const node = $getNodeByKey(nodeKey);\n      if ($isStickyNode(node)) {\n        node.remove();\n      }\n    });\n  };\n\n  const handleColorChange = () => {\n    editor.update(() => {\n      const node = $getNodeByKey(nodeKey);\n      if ($isStickyNode(node)) {\n        node.toggleColor();\n      }\n    });\n  };\n\n  useSharedHistoryContext();\n\n  const stickyContent = (\n    <div ref={stickyContainerRef} className=\"sticky-note-container\">\n      <div\n        className={`sticky-note ${color}`}\n        onPointerDown={(event) => {\n          const stickyContainer = stickyContainerRef.current;\n          if (stickyContainer == null || event.button === 2 || event.target !== stickyContainer.firstChild) {\n            // Right click or click on editor should not work\n            return;\n          }\n          const stickContainer = stickyContainer;\n          const positioning = positioningRef.current;\n          if (stickContainer !== null && portalContainer !== null) {\n            const portalRect = portalContainer.getBoundingClientRect();\n            const zoom = calculateZoomLevel(stickContainer);\n            // „ÇØ„É™„ÉÉ„ÇØ‰ΩçÁΩÆ„Åã„ÇâÁèæÂú®„ÅÆ‰ªòÁÆã‰ΩçÁΩÆ„ÇíÂºï„ÅÑ„Å¶„Ç™„Éï„Çª„ÉÉ„Éà„ÇíË®àÁÆó\n            positioning.offsetX = (event.clientX - portalRect.left) / zoom - positioning.x;\n            positioning.offsetY = (event.clientY - portalRect.top) / zoom - positioning.y;\n            positioning.isDragging = true;\n            stickContainer.classList.add('dragging');\n            document.addEventListener('pointermove', handlePointerMove);\n            document.addEventListener('pointerup', handlePointerUp);\n            event.preventDefault();\n          }\n        }}\n      >\n        <button type=\"button\" onClick={handleDelete} className=\"delete\" aria-label=\"Delete sticky note\" title=\"Delete\">\n          X\n        </button>\n        <button\n          type=\"button\"\n          onClick={handleColorChange}\n          className=\"color\"\n          aria-label=\"Change sticky note color\"\n          title=\"Color\"\n        >\n          <i className=\"bucket\" />\n        </button>\n        <LexicalNestedComposer initialEditor={caption} initialTheme={StickyEditorTheme}>\n          <PlainTextPlugin\n            contentEditable={\n              <ContentEditable\n                placeholder=\"What's up?\"\n                placeholderClassName=\"StickyNode__placeholder\"\n                className=\"StickyNode__contentEditable\"\n              />\n            }\n            ErrorBoundary={LexicalErrorBoundary}\n          />\n        </LexicalNestedComposer>\n      </div>\n    </div>\n  );\n\n  // portalContainer „Åå„Åæ„Å†Ë®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑÂ†¥Âêà„ÅØ null „ÇíËøî„Åô\n  if (!portalContainer) {\n    return null;\n  }\n\n  return createPortal(stickyContent, portalContainer);\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport type {\n  EditorConfig,\n  LexicalEditor,\n  LexicalNode,\n  LexicalUpdateJSON,\n  NodeKey,\n  SerializedEditor,\n  SerializedLexicalNode,\n  Spread,\n} from 'lexical';\nimport { $setSelection, createEditor, DecoratorNode } from 'lexical';\nimport type { JSX } from 'react';\nimport * as React from 'react';\n\nconst StickyComponent = React.lazy(() => import('./StickyComponent'));\n\ntype StickyNoteColor = 'pink' | 'yellow';\n\nexport type SerializedStickyNode = Spread<\n  {\n    xOffset: number;\n    yOffset: number;\n    color: StickyNoteColor;\n    caption: SerializedEditor;\n  },\n  SerializedLexicalNode\n>;\n\nexport class StickyNode extends DecoratorNode<JSX.Element> {\n  __x: number;\n  __y: number;\n  __color: StickyNoteColor;\n  __caption: LexicalEditor;\n\n  static getType(): string {\n    return 'sticky';\n  }\n\n  static clone(node: StickyNode): StickyNode {\n    return new StickyNode(node.__x, node.__y, node.__color, node.__caption, node.__key);\n  }\n  static importJSON(serializedNode: SerializedStickyNode): StickyNode {\n    return new StickyNode(serializedNode.xOffset, serializedNode.yOffset, serializedNode.color).updateFromJSON(\n      serializedNode,\n    );\n  }\n\n  updateFromJSON(serializedNode: LexicalUpdateJSON<SerializedStickyNode>): this {\n    const stickyNode = super.updateFromJSON(serializedNode);\n    const caption = serializedNode.caption;\n    const nestedEditor = stickyNode.__caption;\n    const editorState = nestedEditor.parseEditorState(caption.editorState);\n    if (!editorState.isEmpty()) {\n      nestedEditor.setEditorState(editorState);\n    }\n    return stickyNode;\n  }\n\n  constructor(x: number, y: number, color: 'pink' | 'yellow', caption?: LexicalEditor, key?: NodeKey) {\n    super(key);\n    this.__x = x;\n    this.__y = y;\n    this.__caption = caption || createEditor();\n    this.__color = color;\n  }\n\n  exportJSON(): SerializedStickyNode {\n    return {\n      ...super.exportJSON(),\n      caption: this.__caption.toJSON(),\n      color: this.__color,\n      xOffset: this.__x,\n      yOffset: this.__y,\n    };\n  }\n\n  createDOM(_config: EditorConfig): HTMLElement {\n    const div = document.createElement('div');\n    div.style.display = 'contents';\n    return div;\n  }\n\n  updateDOM(): false {\n    return false;\n  }\n\n  setPosition(x: number, y: number): void {\n    const writable = this.getWritable();\n    writable.__x = x;\n    writable.__y = y;\n    $setSelection(null);\n  }\n\n  toggleColor(): void {\n    const writable = this.getWritable();\n    writable.__color = writable.__color === 'pink' ? 'yellow' : 'pink';\n  }\n\n  decorate(_editor: LexicalEditor, _config: EditorConfig): JSX.Element {\n    return (\n      <StickyComponent\n        color={this.__color}\n        x={this.__x}\n        y={this.__y}\n        nodeKey={this.getKey()}\n        caption={this.__caption}\n      />\n    );\n  }\n\n  isIsolated(): true {\n    return true;\n  }\n}\n\nexport function $isStickyNode(node: LexicalNode | null | undefined): node is StickyNode {\n  return node instanceof StickyNode;\n}\n\nexport function $createStickyNode(xOffset: number, yOffset: number): StickyNode {\n  return new StickyNode(xOffset, yOffset, 'yellow');\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport type { DOMExportOutput, EditorConfig, LexicalEditor, NodeKey, SerializedTextNode, Spread } from 'lexical';\n\nimport { TextNode } from 'lexical';\n\nimport { uuid as UUID } from '../plugins/AutocompletePlugin';\n\nexport type SerializedAutocompleteNode = Spread<\n  {\n    uuid: string;\n  },\n  SerializedTextNode\n>;\n\nexport class AutocompleteNode extends TextNode {\n  /**\n   * A unique uuid is generated for each session and assigned to the instance.\n   * This helps to:\n   * - Ensures max one Autocomplete node per session.\n   * - Ensure that when collaboration is enabled, this node is not shown in\n   *   other sessions.\n   * See https://github.com/facebook/lexical/blob/main/packages/lexical-playground/src/plugins/AutocompletePlugin/index.tsx\n   */\n  __uuid: string;\n\n  static clone(node: AutocompleteNode): AutocompleteNode {\n    return new AutocompleteNode(node.__text, node.__uuid, node.__key);\n  }\n\n  static getType(): 'autocomplete' {\n    return 'autocomplete';\n  }\n\n  static importDOM() {\n    // Never import from DOM\n    return null;\n  }\n\n  static importJSON(serializedNode: SerializedAutocompleteNode): AutocompleteNode {\n    return $createAutocompleteNode(serializedNode.text, serializedNode.uuid).updateFromJSON(serializedNode);\n  }\n\n  exportJSON(): SerializedAutocompleteNode {\n    return {\n      ...super.exportJSON(),\n      uuid: this.__uuid,\n    };\n  }\n\n  constructor(text: string, uuid: string, key?: NodeKey) {\n    super(text, key);\n    this.__uuid = uuid;\n  }\n\n  updateDOM(_prevNode: this, _dom: HTMLElement, _config: EditorConfig): boolean {\n    return false;\n  }\n\n  exportDOM(_: LexicalEditor): DOMExportOutput {\n    return { element: null };\n  }\n\n  excludeFromCopy() {\n    return true;\n  }\n\n  createDOM(config: EditorConfig): HTMLElement {\n    const dom = super.createDOM(config);\n    dom.classList.add(config.theme.autocomplete);\n    if (this.__uuid !== UUID) {\n      dom.style.display = 'none';\n    }\n    return dom;\n  }\n}\n\nexport function $createAutocompleteNode(text: string, uuid: string): AutocompleteNode {\n  return new AutocompleteNode(text, uuid).setMode('token');\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';\nimport { $isAtNodeEnd } from '@lexical/selection';\nimport { mergeRegister } from '@lexical/utils';\nimport type { BaseSelection, NodeKey, TextNode } from 'lexical';\nimport {\n  $addUpdateTag,\n  $createTextNode,\n  $getNodeByKey,\n  $getSelection,\n  $isRangeSelection,\n  $isTextNode,\n  $setSelection,\n  COMMAND_PRIORITY_LOW,\n  HISTORY_MERGE_TAG,\n  KEY_ARROW_RIGHT_COMMAND,\n  KEY_TAB_COMMAND,\n} from 'lexical';\nimport type { JSX } from 'react';\nimport { useCallback, useEffect } from 'react';\n\nimport { useToolbarState } from '../../context/ToolbarContext';\nimport { $createAutocompleteNode, AutocompleteNode } from '../../nodes/AutocompleteNode';\nimport { addSwipeRightListener } from '../../utils/swipe';\n\nconst HISTORY_MERGE = { tag: HISTORY_MERGE_TAG };\n\ndeclare global {\n  interface Navigator {\n    userAgentData?: {\n      mobile: boolean;\n    };\n  }\n}\n\ntype SearchPromise = {\n  dismiss: () => void;\n  promise: Promise<null | string>;\n};\n\nexport const uuid = Math.random()\n  .toString(36)\n  .replace(/[^a-z]+/g, '')\n  .substring(0, 5);\n\n// TODO lookup should be custom\nfunction $search(selection: null | BaseSelection): [boolean, string] {\n  if (!$isRangeSelection(selection) || !selection.isCollapsed()) {\n    return [false, ''];\n  }\n  const node = selection.getNodes()[0];\n  const anchor = selection.anchor;\n  // Check siblings?\n  if (!$isTextNode(node) || !node.isSimpleText() || !$isAtNodeEnd(anchor)) {\n    return [false, ''];\n  }\n  const word = [];\n  const text = node.getTextContent();\n  let i = node.getTextContentSize();\n  while (i > 0) {\n    i--;\n    const c = text[i];\n    if (c === ' ') {\n      break;\n    }\n    word.push(c);\n  }\n  if (word.length === 0) {\n    return [false, ''];\n  }\n  return [true, word.reverse().join('')];\n}\n\n// TODO query should be custom\nfunction useQuery(): (searchText: string) => SearchPromise {\n  return useCallback((searchText: string) => {\n    const server = new AutocompleteServer();\n    console.time('query');\n    const response = server.query(searchText);\n    console.timeEnd('query');\n    return response;\n  }, []);\n}\n\nfunction formatSuggestionText(suggestion: string): string {\n  const userAgentData = window.navigator.userAgentData;\n  const isMobile =\n    userAgentData !== undefined ? userAgentData.mobile : window.innerWidth <= 800 && window.innerHeight <= 600;\n\n  return `${suggestion} ${isMobile ? '(SWIPE \\u2B95)' : '(TAB)'}`;\n}\n\nexport default function AutocompletePlugin(): JSX.Element | null {\n  const [editor] = useLexicalComposerContext();\n  const query = useQuery();\n  const { toolbarState } = useToolbarState();\n\n  useEffect(() => {\n    let autocompleteNodeKey: null | NodeKey = null;\n    let lastMatch: null | string = null;\n    let lastSuggestion: null | string = null;\n    let searchPromise: null | SearchPromise = null;\n    let prevNodeFormat: number = 0;\n    function $clearSuggestion() {\n      const autocompleteNode = autocompleteNodeKey !== null ? $getNodeByKey(autocompleteNodeKey) : null;\n      if (autocompleteNode?.isAttached()) {\n        autocompleteNode.remove();\n        autocompleteNodeKey = null;\n      }\n      if (searchPromise !== null) {\n        searchPromise.dismiss();\n        searchPromise = null;\n      }\n      lastMatch = null;\n      lastSuggestion = null;\n      prevNodeFormat = 0;\n    }\n    function updateAsyncSuggestion(refSearchPromise: SearchPromise, newSuggestion: null | string) {\n      if (searchPromise !== refSearchPromise || newSuggestion === null) {\n        // Outdated or no suggestion\n        return;\n      }\n      editor.update(() => {\n        const selection = $getSelection();\n        const [hasMatch, match] = $search(selection);\n        if (!hasMatch || match !== lastMatch || !$isRangeSelection(selection)) {\n          // Outdated\n          return;\n        }\n        const selectionCopy = selection.clone();\n        const prevNode = selection.getNodes()[0] as TextNode;\n        prevNodeFormat = prevNode.getFormat();\n        const node = $createAutocompleteNode(formatSuggestionText(newSuggestion), uuid)\n          .setFormat(prevNodeFormat)\n          .setStyle(`font-size: ${toolbarState.fontSize}`);\n        autocompleteNodeKey = node.getKey();\n        selection.insertNodes([node]);\n        $setSelection(selectionCopy);\n        lastSuggestion = newSuggestion;\n      }, HISTORY_MERGE);\n    }\n\n    function $handleAutocompleteNodeTransform(node: AutocompleteNode) {\n      const key = node.getKey();\n      if (node.__uuid === uuid && key !== autocompleteNodeKey) {\n        // Max one Autocomplete node per session\n        $clearSuggestion();\n      }\n    }\n    function handleUpdate() {\n      editor.update(() => {\n        const selection = $getSelection();\n        const [hasMatch, match] = $search(selection);\n        if (!hasMatch) {\n          $clearSuggestion();\n          return;\n        }\n        if (match === lastMatch) {\n          return;\n        }\n        $clearSuggestion();\n        searchPromise = query(match);\n        searchPromise.promise\n          .then((newSuggestion) => {\n            if (searchPromise !== null) {\n              updateAsyncSuggestion(searchPromise, newSuggestion);\n            }\n          })\n          .catch((e) => {\n            if (e !== 'Dismissed') {\n              console.error(e);\n            }\n          });\n        lastMatch = match;\n      }, HISTORY_MERGE);\n    }\n    function $handleAutocompleteIntent(): boolean {\n      if (lastSuggestion === null || autocompleteNodeKey === null) {\n        return false;\n      }\n      const autocompleteNode = $getNodeByKey(autocompleteNodeKey);\n      if (autocompleteNode === null) {\n        return false;\n      }\n      const textNode = $createTextNode(lastSuggestion)\n        .setFormat(prevNodeFormat)\n        .setStyle(`font-size: ${toolbarState.fontSize}`);\n      autocompleteNode.replace(textNode);\n      textNode.selectNext();\n      $clearSuggestion();\n      return true;\n    }\n    function $handleKeypressCommand(e: Event) {\n      if ($handleAutocompleteIntent()) {\n        e.preventDefault();\n        return true;\n      }\n      return false;\n    }\n    function handleSwipeRight(_force: number, e: TouchEvent) {\n      editor.update(() => {\n        if ($handleAutocompleteIntent()) {\n          e.preventDefault();\n        } else {\n          $addUpdateTag(HISTORY_MERGE.tag);\n        }\n      });\n    }\n    function unmountSuggestion() {\n      editor.update(() => {\n        $clearSuggestion();\n      }, HISTORY_MERGE);\n    }\n\n    const rootElem = editor.getRootElement();\n\n    return mergeRegister(\n      editor.registerNodeTransform(AutocompleteNode, $handleAutocompleteNodeTransform),\n      editor.registerUpdateListener(handleUpdate),\n      editor.registerCommand(KEY_TAB_COMMAND, $handleKeypressCommand, COMMAND_PRIORITY_LOW),\n      editor.registerCommand(KEY_ARROW_RIGHT_COMMAND, $handleKeypressCommand, COMMAND_PRIORITY_LOW),\n      ...(rootElem !== null ? [addSwipeRightListener(rootElem, handleSwipeRight)] : []),\n      unmountSuggestion,\n    );\n  }, [editor, query, toolbarState.fontSize]);\n\n  return null;\n}\n\n/*\n * Simulate an asynchronous autocomplete server (typical in more common use cases like GMail where\n * the data is not static).\n */\nclass AutocompleteServer {\n  DATABASE = DICTIONARY;\n  LATENCY = 200;\n\n  query = (searchText: string): SearchPromise => {\n    let isDismissed = false;\n\n    const dismiss = () => {\n      isDismissed = true;\n    };\n    const promise: Promise<null | string> = new Promise((resolve, reject) => {\n      setTimeout(() => {\n        if (isDismissed) {\n          // TODO cache result\n          return reject('Dismissed');\n        }\n        const searchTextLength = searchText.length;\n        if (searchText === '' || searchTextLength < 4) {\n          return resolve(null);\n        }\n        const char0 = searchText.charCodeAt(0);\n        const isCapitalized = char0 >= 65 && char0 <= 90;\n        const caseInsensitiveSearchText = isCapitalized\n          ? String.fromCharCode(char0 + 32) + searchText.substring(1)\n          : searchText;\n        const match = this.DATABASE.find(\n          (dictionaryWord) => dictionaryWord.startsWith(caseInsensitiveSearchText) ?? null,\n        );\n        if (match === undefined) {\n          return resolve(null);\n        }\n        const matchCapitalized = isCapitalized\n          ? String.fromCharCode(match.charCodeAt(0) - 32) + match.substring(1)\n          : match;\n        const autocompleteChunk = matchCapitalized.substring(searchTextLength);\n        if (autocompleteChunk === '') {\n          return resolve(null);\n        }\n        return resolve(autocompleteChunk);\n      }, this.LATENCY);\n    });\n\n    return {\n      dismiss,\n      promise,\n    };\n  };\n}\n\n// https://raw.githubusercontent.com/first20hours/google-10000-english/master/google-10000-english-usa-no-swears-long.txt\nconst DICTIONARY = [\n  'information',\n  'available',\n  'copyright',\n  'university',\n  'management',\n  'international',\n  'development',\n  'education',\n  'community',\n  'technology',\n  'following',\n  'resources',\n  'including',\n  'directory',\n  'government',\n  'department',\n  'description',\n  'insurance',\n  'different',\n  'categories',\n  'conditions',\n  'accessories',\n  'september',\n  'questions',\n  'application',\n  'financial',\n  'equipment',\n  'performance',\n  'experience',\n  'important',\n  'activities',\n  'additional',\n  'something',\n  'professional',\n  'committee',\n  'washington',\n  'california',\n  'reference',\n  'companies',\n  'computers',\n  'president',\n  'australia',\n  'discussion',\n  'entertainment',\n  'agreement',\n  'marketing',\n  'association',\n  'collection',\n  'solutions',\n  'electronics',\n  'technical',\n  'microsoft',\n  'conference',\n  'environment',\n  'statement',\n  'downloads',\n  'applications',\n  'requirements',\n  'individual',\n  'subscribe',\n  'everything',\n  'production',\n  'commercial',\n  'advertising',\n  'treatment',\n  'newsletter',\n  'knowledge',\n  'currently',\n  'construction',\n  'registered',\n  'protection',\n  'engineering',\n  'published',\n  'corporate',\n  'customers',\n  'materials',\n  'countries',\n  'standards',\n  'political',\n  'advertise',\n  'environmental',\n  'availability',\n  'employment',\n  'commission',\n  'administration',\n  'institute',\n  'sponsored',\n  'electronic',\n  'condition',\n  'effective',\n  'organization',\n  'selection',\n  'corporation',\n  'executive',\n  'necessary',\n  'according',\n  'particular',\n  'facilities',\n  'opportunities',\n  'appropriate',\n  'statistics',\n  'investment',\n  'christmas',\n  'registration',\n  'furniture',\n  'wednesday',\n  'structure',\n  'distribution',\n  'industrial',\n  'potential',\n  'responsible',\n  'communications',\n  'associated',\n  'foundation',\n  'documents',\n  'communication',\n  'independent',\n  'operating',\n  'developed',\n  'telephone',\n  'population',\n  'navigation',\n  'operations',\n  'therefore',\n  'christian',\n  'understand',\n  'publications',\n  'worldwide',\n  'connection',\n  'publisher',\n  'introduction',\n  'properties',\n  'accommodation',\n  'excellent',\n  'opportunity',\n  'assessment',\n  'especially',\n  'interface',\n  'operation',\n  'restaurants',\n  'beautiful',\n  'locations',\n  'significant',\n  'technologies',\n  'manufacturer',\n  'providing',\n  'authority',\n  'considered',\n  'programme',\n  'enterprise',\n  'educational',\n  'employees',\n  'alternative',\n  'processing',\n  'responsibility',\n  'resolution',\n  'publication',\n  'relations',\n  'photography',\n  'components',\n  'assistance',\n  'completed',\n  'organizations',\n  'otherwise',\n  'transportation',\n  'disclaimer',\n  'membership',\n  'recommended',\n  'background',\n  'character',\n  'maintenance',\n  'functions',\n  'trademarks',\n  'phentermine',\n  'submitted',\n  'television',\n  'interested',\n  'throughout',\n  'established',\n  'programming',\n  'regarding',\n  'instructions',\n  'increased',\n  'understanding',\n  'beginning',\n  'associates',\n  'instruments',\n  'businesses',\n  'specified',\n  'restaurant',\n  'procedures',\n  'relationship',\n  'traditional',\n  'sometimes',\n  'themselves',\n  'transport',\n  'interesting',\n  'evaluation',\n  'implementation',\n  'galleries',\n  'references',\n  'presented',\n  'literature',\n  'respective',\n  'definition',\n  'secretary',\n  'networking',\n  'australian',\n  'magazines',\n  'francisco',\n  'individuals',\n  'guidelines',\n  'installation',\n  'described',\n  'attention',\n  'difference',\n  'regulations',\n  'certificate',\n  'directions',\n  'documentation',\n  'automotive',\n  'successful',\n  'communities',\n  'situation',\n  'publishing',\n  'emergency',\n  'developing',\n  'determine',\n  'temperature',\n  'announcements',\n  'historical',\n  'ringtones',\n  'difficult',\n  'scientific',\n  'satellite',\n  'particularly',\n  'functional',\n  'monitoring',\n  'architecture',\n  'recommend',\n  'dictionary',\n  'accounting',\n  'manufacturing',\n  'professor',\n  'generally',\n  'continued',\n  'techniques',\n  'permission',\n  'generation',\n  'component',\n  'guarantee',\n  'processes',\n  'interests',\n  'paperback',\n  'classifieds',\n  'supported',\n  'competition',\n  'providers',\n  'characters',\n  'thousands',\n  'apartments',\n  'generated',\n  'administrative',\n  'practices',\n  'reporting',\n  'essential',\n  'affiliate',\n  'immediately',\n  'designated',\n  'integrated',\n  'configuration',\n  'comprehensive',\n  'universal',\n  'presentation',\n  'languages',\n  'compliance',\n  'improvement',\n  'pennsylvania',\n  'challenge',\n  'acceptance',\n  'strategies',\n  'affiliates',\n  'multimedia',\n  'certified',\n  'computing',\n  'interactive',\n  'procedure',\n  'leadership',\n  'religious',\n  'breakfast',\n  'developer',\n  'approximately',\n  'recommendations',\n  'comparison',\n  'automatically',\n  'minnesota',\n  'adventure',\n  'institutions',\n  'assistant',\n  'advertisement',\n  'headlines',\n  'yesterday',\n  'determined',\n  'wholesale',\n  'extension',\n  'statements',\n  'completely',\n  'electrical',\n  'applicable',\n  'manufacturers',\n  'classical',\n  'dedicated',\n  'direction',\n  'basketball',\n  'wisconsin',\n  'personnel',\n  'identified',\n  'professionals',\n  'advantage',\n  'newsletters',\n  'estimated',\n  'anonymous',\n  'miscellaneous',\n  'integration',\n  'interview',\n  'framework',\n  'installed',\n  'massachusetts',\n  'associate',\n  'frequently',\n  'discussions',\n  'laboratory',\n  'destination',\n  'intelligence',\n  'specifications',\n  'tripadvisor',\n  'residential',\n  'decisions',\n  'industries',\n  'partnership',\n  'editorial',\n  'expression',\n  'provisions',\n  'principles',\n  'suggestions',\n  'replacement',\n  'strategic',\n  'economics',\n  'compatible',\n  'apartment',\n  'netherlands',\n  'consulting',\n  'recreation',\n  'participants',\n  'favorites',\n  'translation',\n  'estimates',\n  'protected',\n  'philadelphia',\n  'officials',\n  'contained',\n  'legislation',\n  'parameters',\n  'relationships',\n  'tennessee',\n  'representative',\n  'frequency',\n  'introduced',\n  'departments',\n  'residents',\n  'displayed',\n  'performed',\n  'administrator',\n  'addresses',\n  'permanent',\n  'agriculture',\n  'constitutes',\n  'portfolio',\n  'practical',\n  'delivered',\n  'collectibles',\n  'infrastructure',\n  'exclusive',\n  'originally',\n  'utilities',\n  'philosophy',\n  'regulation',\n  'reduction',\n  'nutrition',\n  'recording',\n  'secondary',\n  'wonderful',\n  'announced',\n  'prevention',\n  'mentioned',\n  'automatic',\n  'healthcare',\n  'maintained',\n  'increasing',\n  'connected',\n  'directors',\n  'participation',\n  'containing',\n  'combination',\n  'amendment',\n  'guaranteed',\n  'libraries',\n  'distributed',\n  'singapore',\n  'enterprises',\n  'convention',\n  'principal',\n  'certification',\n  'previously',\n  'buildings',\n  'household',\n  'batteries',\n  'positions',\n  'subscription',\n  'contemporary',\n  'panasonic',\n  'permalink',\n  'signature',\n  'provision',\n  'certainly',\n  'newspaper',\n  'liability',\n  'trademark',\n  'trackback',\n  'americans',\n  'promotion',\n  'conversion',\n  'reasonable',\n  'broadband',\n  'influence',\n  'importance',\n  'webmaster',\n  'prescription',\n  'specifically',\n  'represent',\n  'conservation',\n  'louisiana',\n  'javascript',\n  'marketplace',\n  'evolution',\n  'certificates',\n  'objectives',\n  'suggested',\n  'concerned',\n  'structures',\n  'encyclopedia',\n  'continuing',\n  'interracial',\n  'competitive',\n  'suppliers',\n  'preparation',\n  'receiving',\n  'accordance',\n  'discussed',\n  'elizabeth',\n  'reservations',\n  'playstation',\n  'instruction',\n  'annotation',\n  'differences',\n  'establish',\n  'expressed',\n  'paragraph',\n  'mathematics',\n  'compensation',\n  'conducted',\n  'percentage',\n  'mississippi',\n  'requested',\n  'connecticut',\n  'personals',\n  'immediate',\n  'agricultural',\n  'supporting',\n  'collections',\n  'participate',\n  'specialist',\n  'experienced',\n  'investigation',\n  'institution',\n  'searching',\n  'proceedings',\n  'transmission',\n  'characteristics',\n  'experiences',\n  'extremely',\n  'verzeichnis',\n  'contracts',\n  'concerning',\n  'developers',\n  'equivalent',\n  'chemistry',\n  'neighborhood',\n  'variables',\n  'continues',\n  'curriculum',\n  'psychology',\n  'responses',\n  'circumstances',\n  'identification',\n  'appliances',\n  'elementary',\n  'unlimited',\n  'printable',\n  'enforcement',\n  'hardcover',\n  'celebrity',\n  'chocolate',\n  'hampshire',\n  'bluetooth',\n  'controlled',\n  'requirement',\n  'authorities',\n  'representatives',\n  'pregnancy',\n  'biography',\n  'attractions',\n  'transactions',\n  'authorized',\n  'retirement',\n  'financing',\n  'efficiency',\n  'efficient',\n  'commitment',\n  'specialty',\n  'interviews',\n  'qualified',\n  'discovery',\n  'classified',\n  'confidence',\n  'lifestyle',\n  'consistent',\n  'clearance',\n  'connections',\n  'inventory',\n  'converter',\n  'organisation',\n  'objective',\n  'indicated',\n  'securities',\n  'volunteer',\n  'democratic',\n  'switzerland',\n  'parameter',\n  'processor',\n  'dimensions',\n  'contribute',\n  'challenges',\n  'recognition',\n  'submission',\n  'encourage',\n  'regulatory',\n  'inspection',\n  'consumers',\n  'territory',\n  'transaction',\n  'manchester',\n  'contributions',\n  'continuous',\n  'resulting',\n  'cambridge',\n  'initiative',\n  'execution',\n  'disability',\n  'increases',\n  'contractor',\n  'examination',\n  'indicates',\n  'committed',\n  'extensive',\n  'affordable',\n  'candidate',\n  'databases',\n  'outstanding',\n  'perspective',\n  'messenger',\n  'tournament',\n  'consideration',\n  'discounts',\n  'catalogue',\n  'publishers',\n  'caribbean',\n  'reservation',\n  'remaining',\n  'depending',\n  'expansion',\n  'purchased',\n  'performing',\n  'collected',\n  'absolutely',\n  'featuring',\n  'implement',\n  'scheduled',\n  'calculator',\n  'significantly',\n  'temporary',\n  'sufficient',\n  'awareness',\n  'vancouver',\n  'contribution',\n  'measurement',\n  'constitution',\n  'packaging',\n  'consultation',\n  'northwest',\n  'classroom',\n  'democracy',\n  'wallpaper',\n  'merchandise',\n  'resistance',\n  'baltimore',\n  'candidates',\n  'charlotte',\n  'biological',\n  'transition',\n  'preferences',\n  'instrument',\n  'classification',\n  'physician',\n  'hollywood',\n  'wikipedia',\n  'spiritual',\n  'photographs',\n  'relatively',\n  'satisfaction',\n  'represents',\n  'pittsburgh',\n  'preferred',\n  'intellectual',\n  'comfortable',\n  'interaction',\n  'listening',\n  'effectively',\n  'experimental',\n  'revolution',\n  'consolidation',\n  'landscape',\n  'dependent',\n  'mechanical',\n  'consultants',\n  'applicant',\n  'cooperation',\n  'acquisition',\n  'implemented',\n  'directories',\n  'recognized',\n  'notification',\n  'licensing',\n  'textbooks',\n  'diversity',\n  'cleveland',\n  'investments',\n  'accessibility',\n  'sensitive',\n  'templates',\n  'completion',\n  'universities',\n  'technique',\n  'contractors',\n  'subscriptions',\n  'calculate',\n  'alexander',\n  'broadcast',\n  'converted',\n  'anniversary',\n  'improvements',\n  'specification',\n  'accessible',\n  'accessory',\n  'typically',\n  'representation',\n  'arrangements',\n  'conferences',\n  'uniprotkb',\n  'consumption',\n  'birmingham',\n  'afternoon',\n  'consultant',\n  'controller',\n  'ownership',\n  'committees',\n  'legislative',\n  'researchers',\n  'unsubscribe',\n  'molecular',\n  'residence',\n  'attorneys',\n  'operators',\n  'sustainable',\n  'philippines',\n  'statistical',\n  'innovation',\n  'employers',\n  'definitions',\n  'elections',\n  'stainless',\n  'newspapers',\n  'hospitals',\n  'exception',\n  'successfully',\n  'indonesia',\n  'primarily',\n  'capabilities',\n  'recommendation',\n  'recruitment',\n  'organized',\n  'improving',\n  'expensive',\n  'organisations',\n  'explained',\n  'programmes',\n  'expertise',\n  'mechanism',\n  'jewellery',\n  'eventually',\n  'agreements',\n  'considering',\n  'innovative',\n  'conclusion',\n  'disorders',\n  'collaboration',\n  'detection',\n  'formation',\n  'engineers',\n  'proposals',\n  'moderator',\n  'tutorials',\n  'settlement',\n  'collectables',\n  'fantastic',\n  'governments',\n  'purchasing',\n  'appointed',\n  'operational',\n  'corresponding',\n  'descriptions',\n  'determination',\n  'animation',\n  'productions',\n  'telecommunications',\n  'instructor',\n  'approaches',\n  'highlights',\n  'designers',\n  'melbourne',\n  'scientists',\n  'blackjack',\n  'argentina',\n  'possibility',\n  'commissioner',\n  'dangerous',\n  'reliability',\n  'unfortunately',\n  'respectively',\n  'volunteers',\n  'attachment',\n  'appointment',\n  'workshops',\n  'hurricane',\n  'represented',\n  'mortgages',\n  'responsibilities',\n  'carefully',\n  'productivity',\n  'investors',\n  'underground',\n  'diagnosis',\n  'principle',\n  'vacations',\n  'calculated',\n  'appearance',\n  'incorporated',\n  'notebooks',\n  'algorithm',\n  'valentine',\n  'involving',\n  'investing',\n  'christopher',\n  'admission',\n  'terrorism',\n  'parliament',\n  'situations',\n  'allocated',\n  'corrections',\n  'structural',\n  'municipal',\n  'describes',\n  'disabilities',\n  'substance',\n  'prohibited',\n  'addressed',\n  'simulation',\n  'initiatives',\n  'concentration',\n  'interpretation',\n  'bankruptcy',\n  'optimization',\n  'substances',\n  'discovered',\n  'restrictions',\n  'participating',\n  'exhibition',\n  'composition',\n  'nationwide',\n  'definitely',\n  'existence',\n  'commentary',\n  'limousines',\n  'developments',\n  'immigration',\n  'destinations',\n  'necessarily',\n  'attribute',\n  'apparently',\n  'surrounding',\n  'mountains',\n  'popularity',\n  'postposted',\n  'coordinator',\n  'obviously',\n  'fundamental',\n  'substantial',\n  'progressive',\n  'championship',\n  'sacramento',\n  'impossible',\n  'depression',\n  'testimonials',\n  'memorabilia',\n  'cartridge',\n  'explanation',\n  'cincinnati',\n  'subsection',\n  'electricity',\n  'permitted',\n  'workplace',\n  'confirmed',\n  'wallpapers',\n  'infection',\n  'eligibility',\n  'involvement',\n  'placement',\n  'observations',\n  'vbulletin',\n  'subsequent',\n  'motorcycle',\n  'disclosure',\n  'establishment',\n  'presentations',\n  'undergraduate',\n  'occupation',\n  'donations',\n  'associations',\n  'citysearch',\n  'radiation',\n  'seriously',\n  'elsewhere',\n  'pollution',\n  'conservative',\n  'guestbook',\n  'effectiveness',\n  'demonstrate',\n  'atmosphere',\n  'experiment',\n  'purchases',\n  'federation',\n  'assignment',\n  'chemicals',\n  'everybody',\n  'nashville',\n  'counseling',\n  'acceptable',\n  'satisfied',\n  'measurements',\n  'milwaukee',\n  'medication',\n  'warehouse',\n  'shareware',\n  'violation',\n  'configure',\n  'stability',\n  'southwest',\n  'institutional',\n  'expectations',\n  'independence',\n  'metabolism',\n  'personally',\n  'excellence',\n  'somewhere',\n  'attributes',\n  'recognize',\n  'screening',\n  'thumbnail',\n  'forgotten',\n  'intelligent',\n  'edinburgh',\n  'obligation',\n  'regardless',\n  'restricted',\n  'republican',\n  'merchants',\n  'attendance',\n  'arguments',\n  'amsterdam',\n  'adventures',\n  'announcement',\n  'appreciate',\n  'regularly',\n  'mechanisms',\n  'customize',\n  'tradition',\n  'indicators',\n  'emissions',\n  'physicians',\n  'complaint',\n  'experiments',\n  'afghanistan',\n  'scholarship',\n  'governance',\n  'supplements',\n  'camcorder',\n  'implementing',\n  'ourselves',\n  'conversation',\n  'capability',\n  'producing',\n  'precision',\n  'contributed',\n  'reproduction',\n  'ingredients',\n  'franchise',\n  'complaints',\n  'promotions',\n  'rehabilitation',\n  'maintaining',\n  'environments',\n  'reception',\n  'correctly',\n  'consequences',\n  'geography',\n  'appearing',\n  'integrity',\n  'discrimination',\n  'processed',\n  'implications',\n  'functionality',\n  'intermediate',\n  'emotional',\n  'platforms',\n  'overnight',\n  'geographic',\n  'preliminary',\n  'districts',\n  'introduce',\n  'promotional',\n  'chevrolet',\n  'specialists',\n  'generator',\n  'suspension',\n  'correction',\n  'authentication',\n  'communicate',\n  'supplement',\n  'showtimes',\n  'promoting',\n  'machinery',\n  'bandwidth',\n  'probability',\n  'dimension',\n  'schedules',\n  'admissions',\n  'quarterly',\n  'illustrated',\n  'continental',\n  'alternate',\n  'achievement',\n  'limitations',\n  'automated',\n  'passenger',\n  'convenient',\n  'orientation',\n  'childhood',\n  'flexibility',\n  'jurisdiction',\n  'displaying',\n  'encouraged',\n  'cartridges',\n  'declaration',\n  'automation',\n  'advantages',\n  'preparing',\n  'recipient',\n  'extensions',\n  'athletics',\n  'southeast',\n  'alternatives',\n  'determining',\n  'personalized',\n  'conditioning',\n  'partnerships',\n  'destruction',\n  'increasingly',\n  'migration',\n  'basically',\n  'conventional',\n  'applicants',\n  'occupational',\n  'adjustment',\n  'treatments',\n  'camcorders',\n  'difficulty',\n  'collective',\n  'coalition',\n  'enrollment',\n  'producers',\n  'collector',\n  'interfaces',\n  'advertisers',\n  'representing',\n  'observation',\n  'restoration',\n  'convenience',\n  'returning',\n  'opposition',\n  'container',\n  'defendant',\n  'confirmation',\n  'supervisor',\n  'peripherals',\n  'bestsellers',\n  'departure',\n  'minneapolis',\n  'interactions',\n  'intervention',\n  'attraction',\n  'modification',\n  'customized',\n  'understood',\n  'assurance',\n  'happening',\n  'amendments',\n  'metropolitan',\n  'compilation',\n  'verification',\n  'attractive',\n  'recordings',\n  'jefferson',\n  'gardening',\n  'obligations',\n  'orchestra',\n  'polyphonic',\n  'outsourcing',\n  'adjustable',\n  'allocation',\n  'discipline',\n  'demonstrated',\n  'identifying',\n  'alphabetical',\n  'dispatched',\n  'installing',\n  'voluntary',\n  'photographer',\n  'messaging',\n  'constructed',\n  'additions',\n  'requiring',\n  'engagement',\n  'refinance',\n  'calendars',\n  'arrangement',\n  'conclusions',\n  'bibliography',\n  'compatibility',\n  'furthermore',\n  'cooperative',\n  'measuring',\n  'jacksonville',\n  'headquarters',\n  'transfers',\n  'transformation',\n  'attachments',\n  'administrators',\n  'personality',\n  'facilitate',\n  'subscriber',\n  'priorities',\n  'bookstore',\n  'parenting',\n  'incredible',\n  'commonwealth',\n  'pharmaceutical',\n  'manhattan',\n  'workforce',\n  'organizational',\n  'portuguese',\n  'everywhere',\n  'discharge',\n  'halloween',\n  'hazardous',\n  'methodology',\n  'housewares',\n  'reputation',\n  'resistant',\n  'democrats',\n  'recycling',\n  'qualifications',\n  'slideshow',\n  'variation',\n  'transferred',\n  'photograph',\n  'distributor',\n  'underlying',\n  'wrestling',\n  'photoshop',\n  'gathering',\n  'projection',\n  'mathematical',\n  'specialized',\n  'diagnostic',\n  'indianapolis',\n  'corporations',\n  'criticism',\n  'automobile',\n  'confidential',\n  'statutory',\n  'accommodations',\n  'northeast',\n  'downloaded',\n  'paintings',\n  'injection',\n  'yorkshire',\n  'populations',\n  'protective',\n  'initially',\n  'indicator',\n  'eliminate',\n  'sunglasses',\n  'preference',\n  'threshold',\n  'venezuela',\n  'exploration',\n  'sequences',\n  'astronomy',\n  'translate',\n  'announces',\n  'compression',\n  'establishing',\n  'constitutional',\n  'perfectly',\n  'instantly',\n  'litigation',\n  'submissions',\n  'broadcasting',\n  'horizontal',\n  'terrorist',\n  'informational',\n  'ecommerce',\n  'suffering',\n  'prospective',\n  'ultimately',\n  'artificial',\n  'spectacular',\n  'coordination',\n  'connector',\n  'affiliated',\n  'activation',\n  'naturally',\n  'subscribers',\n  'mitsubishi',\n  'underwear',\n  'potentially',\n  'constraints',\n  'inclusive',\n  'dimensional',\n  'considerable',\n  'selecting',\n  'processors',\n  'pantyhose',\n  'difficulties',\n  'complexity',\n  'constantly',\n  'barcelona',\n  'presidential',\n  'documentary',\n  'territories',\n  'palestinian',\n  'legislature',\n  'hospitality',\n  'procurement',\n  'theoretical',\n  'exercises',\n  'surveillance',\n  'protocols',\n  'highlight',\n  'substitute',\n  'inclusion',\n  'hopefully',\n  'brilliant',\n  'evaluated',\n  'assignments',\n  'termination',\n  'households',\n  'authentic',\n  'montgomery',\n  'architectural',\n  'louisville',\n  'macintosh',\n  'movements',\n  'amenities',\n  'virtually',\n  'authorization',\n  'projector',\n  'comparative',\n  'psychological',\n  'surprised',\n  'genealogy',\n  'expenditure',\n  'liverpool',\n  'connectivity',\n  'algorithms',\n  'similarly',\n  'collaborative',\n  'excluding',\n  'commander',\n  'suggestion',\n  'spotlight',\n  'investigate',\n  'connecting',\n  'logistics',\n  'proportion',\n  'significance',\n  'symposium',\n  'essentials',\n  'protecting',\n  'transmitted',\n  'screenshots',\n  'intensive',\n  'switching',\n  'correspondence',\n  'supervision',\n  'expenditures',\n  'separation',\n  'testimony',\n  'celebrities',\n  'mandatory',\n  'boundaries',\n  'syndication',\n  'celebration',\n  'filtering',\n  'luxembourg',\n  'offensive',\n  'deployment',\n  'colleagues',\n  'separated',\n  'directive',\n  'governing',\n  'retailers',\n  'occasionally',\n  'attending',\n  'recruiting',\n  'instructional',\n  'traveling',\n  'permissions',\n  'biotechnology',\n  'prescribed',\n  'catherine',\n  'reproduced',\n  'calculation',\n  'consolidated',\n  'occasions',\n  'equations',\n  'exceptional',\n  'respondents',\n  'considerations',\n  'queensland',\n  'musicians',\n  'composite',\n  'unavailable',\n  'essentially',\n  'designing',\n  'assessments',\n  'brunswick',\n  'sensitivity',\n  'preservation',\n  'streaming',\n  'intensity',\n  'technological',\n  'syndicate',\n  'antivirus',\n  'addressing',\n  'discounted',\n  'bangladesh',\n  'constitute',\n  'concluded',\n  'desperate',\n  'demonstration',\n  'governmental',\n  'manufactured',\n  'graduation',\n  'variations',\n  'addiction',\n  'springfield',\n  'synthesis',\n  'undefined',\n  'unemployment',\n  'enhancement',\n  'newcastle',\n  'performances',\n  'societies',\n  'brazilian',\n  'identical',\n  'petroleum',\n  'norwegian',\n  'retention',\n  'exchanges',\n  'soundtrack',\n  'wondering',\n  'profession',\n  'separately',\n  'physiology',\n  'collecting',\n  'participant',\n  'scholarships',\n  'recreational',\n  'dominican',\n  'friendship',\n  'expanding',\n  'provincial',\n  'investigations',\n  'medications',\n  'rochester',\n  'advertiser',\n  'encryption',\n  'downloadable',\n  'sophisticated',\n  'possession',\n  'laboratories',\n  'vegetables',\n  'thumbnails',\n  'stockings',\n  'respondent',\n  'destroyed',\n  'manufacture',\n  'wordpress',\n  'vulnerability',\n  'accountability',\n  'celebrate',\n  'accredited',\n  'appliance',\n  'compressed',\n  'scheduling',\n  'perspectives',\n  'mortality',\n  'christians',\n  'therapeutic',\n  'impressive',\n  'accordingly',\n  'architect',\n  'challenging',\n  'microwave',\n  'accidents',\n  'relocation',\n  'contributors',\n  'violations',\n  'temperatures',\n  'competitions',\n  'discretion',\n  'cosmetics',\n  'repository',\n  'concentrations',\n  'christianity',\n  'negotiations',\n  'realistic',\n  'generating',\n  'christina',\n  'congressional',\n  'photographic',\n  'modifications',\n  'millennium',\n  'achieving',\n  'fisheries',\n  'exceptions',\n  'reactions',\n  'macromedia',\n  'companion',\n  'divisions',\n  'additionally',\n  'fellowship',\n  'victorian',\n  'copyrights',\n  'lithuania',\n  'mastercard',\n  'chronicles',\n  'obtaining',\n  'distribute',\n  'decorative',\n  'enlargement',\n  'campaigns',\n  'conjunction',\n  'instances',\n  'indigenous',\n  'validation',\n  'corruption',\n  'incentives',\n  'cholesterol',\n  'differential',\n  'scientist',\n  'starsmerchant',\n  'arthritis',\n  'nevertheless',\n  'practitioners',\n  'transcript',\n  'inflation',\n  'compounds',\n  'contracting',\n  'structured',\n  'reasonably',\n  'graduates',\n  'recommends',\n  'controlling',\n  'distributors',\n  'arlington',\n  'particles',\n  'extraordinary',\n  'indicating',\n  'coordinate',\n  'exclusively',\n  'limitation',\n  'widescreen',\n  'illustration',\n  'construct',\n  'inquiries',\n  'inspiration',\n  'affecting',\n  'downloading',\n  'aggregate',\n  'forecasts',\n  'complicated',\n  'shopzilla',\n  'decorating',\n  'expressions',\n  'shakespeare',\n  'connectors',\n  'conflicts',\n  'travelers',\n  'offerings',\n  'incorrect',\n  'furnishings',\n  'guatemala',\n  'perception',\n  'renaissance',\n  'pathology',\n  'ordinance',\n  'photographers',\n  'infections',\n  'configured',\n  'festivals',\n  'possibilities',\n  'contributing',\n  'analytical',\n  'circulation',\n  'assumption',\n  'jerusalem',\n  'transexuales',\n  'invention',\n  'technician',\n  'executives',\n  'enquiries',\n  'cognitive',\n  'exploring',\n  'registrar',\n  'supporters',\n  'withdrawal',\n  'predicted',\n  'saskatchewan',\n  'cancellation',\n  'ministers',\n  'veterinary',\n  'prostores',\n  'relevance',\n  'incentive',\n  'butterfly',\n  'mechanics',\n  'numerical',\n  'reflection',\n  'accompanied',\n  'invitation',\n  'princeton',\n  'spirituality',\n  'meanwhile',\n  'proprietary',\n  'childrens',\n  'thumbzilla',\n  'porcelain',\n  'pichunter',\n  'translated',\n  'columnists',\n  'consensus',\n  'delivering',\n  'journalism',\n  'intention',\n  'undertaken',\n  'statewide',\n  'semiconductor',\n  'illustrations',\n  'happiness',\n  'substantially',\n  'identifier',\n  'calculations',\n  'conducting',\n  'accomplished',\n  'calculators',\n  'impression',\n  'correlation',\n  'fragrance',\n  'neighbors',\n  'transparent',\n  'charleston',\n  'champions',\n  'selections',\n  'projectors',\n  'inappropriate',\n  'comparing',\n  'vocational',\n  'pharmacies',\n  'introducing',\n  'appreciated',\n  'albuquerque',\n  'distinguished',\n  'projected',\n  'assumptions',\n  'shareholders',\n  'developmental',\n  'regulated',\n  'anticipated',\n  'completing',\n  'comparable',\n  'confusion',\n  'copyrighted',\n  'warranties',\n  'documented',\n  'paperbacks',\n  'keyboards',\n  'vulnerable',\n  'reflected',\n  'respiratory',\n  'notifications',\n  'transexual',\n  'mainstream',\n  'evaluating',\n  'subcommittee',\n  'maternity',\n  'journalists',\n  'foundations',\n  'volleyball',\n  'liabilities',\n  'decreased',\n  'tolerance',\n  'creativity',\n  'describing',\n  'lightning',\n  'quotations',\n  'inspector',\n  'bookmarks',\n  'behavioral',\n  'riverside',\n  'bathrooms',\n  'abilities',\n  'initiated',\n  'nonprofit',\n  'lancaster',\n  'suspended',\n  'containers',\n  'attitudes',\n  'simultaneously',\n  'integrate',\n  'sociology',\n  'screenshot',\n  'exhibitions',\n  'confident',\n  'retrieved',\n  'officially',\n  'consortium',\n  'recipients',\n  'delicious',\n  'traditions',\n  'periodically',\n  'hungarian',\n  'referring',\n  'transform',\n  'educators',\n  'vegetable',\n  'humanities',\n  'independently',\n  'alignment',\n  'henderson',\n  'britannica',\n  'competitors',\n  'visibility',\n  'consciousness',\n  'encounter',\n  'resolutions',\n  'accessing',\n  'attempted',\n  'witnesses',\n  'administered',\n  'strengthen',\n  'frederick',\n  'aggressive',\n  'advertisements',\n  'sublimedirectory',\n  'disturbed',\n  'determines',\n  'sculpture',\n  'motivation',\n  'pharmacology',\n  'passengers',\n  'quantities',\n  'petersburg',\n  'consistently',\n  'powerpoint',\n  'obituaries',\n  'punishment',\n  'appreciation',\n  'subsequently',\n  'providence',\n  'restriction',\n  'incorporate',\n  'backgrounds',\n  'treasurer',\n  'lightweight',\n  'transcription',\n  'complications',\n  'scripting',\n  'remembered',\n  'synthetic',\n  'testament',\n  'specifics',\n  'partially',\n  'wilderness',\n  'generations',\n  'tournaments',\n  'sponsorship',\n  'headphones',\n  'proceeding',\n  'volkswagen',\n  'uncertainty',\n  'breakdown',\n  'reconstruction',\n  'subsidiary',\n  'strengths',\n  'encouraging',\n  'furnished',\n  'terrorists',\n  'comparisons',\n  'beneficial',\n  'distributions',\n  'viewpicture',\n  'threatened',\n  'republicans',\n  'discusses',\n  'responded',\n  'abstracts',\n  'prediction',\n  'pharmaceuticals',\n  'thesaurus',\n  'individually',\n  'battlefield',\n  'literally',\n  'ecological',\n  'appraisal',\n  'consisting',\n  'submitting',\n  'citations',\n  'geographical',\n  'mozambique',\n  'disclaimers',\n  'championships',\n  'sheffield',\n  'finishing',\n  'wellington',\n  'prospects',\n  'bulgarian',\n  'aboriginal',\n  'remarkable',\n  'preventing',\n  'productive',\n  'boulevard',\n  'compliant',\n  'penalties',\n  'imagination',\n  'refurbished',\n  'activated',\n  'conferencing',\n  'armstrong',\n  'politicians',\n  'trackbacks',\n  'accommodate',\n  'christine',\n  'accepting',\n  'precipitation',\n  'isolation',\n  'sustained',\n  'approximate',\n  'programmer',\n  'greetings',\n  'inherited',\n  'incomplete',\n  'chronicle',\n  'legitimate',\n  'biographies',\n  'investigator',\n  'plaintiff',\n  'prisoners',\n  'mediterranean',\n  'nightlife',\n  'architects',\n  'entrepreneur',\n  'freelance',\n  'excessive',\n  'screensaver',\n  'valuation',\n  'unexpected',\n  'cigarette',\n  'characteristic',\n  'metallica',\n  'consequently',\n  'appointments',\n  'narrative',\n  'academics',\n  'quantitative',\n  'screensavers',\n  'subdivision',\n  'distinction',\n  'livestock',\n  'exemption',\n  'sustainability',\n  'formatting',\n  'nutritional',\n  'nicaragua',\n  'affiliation',\n  'relatives',\n  'satisfactory',\n  'revolutionary',\n  'bracelets',\n  'telephony',\n  'breathing',\n  'thickness',\n  'adjustments',\n  'graphical',\n  'discussing',\n  'aerospace',\n  'meaningful',\n  'maintains',\n  'shortcuts',\n  'voyeurweb',\n  'extending',\n  'specifies',\n  'accreditation',\n  'blackberry',\n  'meditation',\n  'microphone',\n  'macedonia',\n  'combining',\n  'instrumental',\n  'organizing',\n  'moderators',\n  'kazakhstan',\n  'standings',\n  'partition',\n  'invisible',\n  'translations',\n  'commodity',\n  'kilometers',\n  'thanksgiving',\n  'guarantees',\n  'indication',\n  'congratulations',\n  'cigarettes',\n  'controllers',\n  'consultancy',\n  'conventions',\n  'coordinates',\n  'responding',\n  'physically',\n  'stakeholders',\n  'hydrocodone',\n  'consecutive',\n  'attempting',\n  'representations',\n  'competing',\n  'peninsula',\n  'accurately',\n  'considers',\n  'ministries',\n  'vacancies',\n  'parliamentary',\n  'acknowledge',\n  'thoroughly',\n  'nottingham',\n  'identifies',\n  'questionnaire',\n  'qualification',\n  'modelling',\n  'miniature',\n  'interstate',\n  'consequence',\n  'systematic',\n  'perceived',\n  'madagascar',\n  'presenting',\n  'troubleshooting',\n  'uzbekistan',\n  'centuries',\n  'magnitude',\n  'richardson',\n  'fragrances',\n  'vocabulary',\n  'earthquake',\n  'fundraising',\n  'geological',\n  'assessing',\n  'introduces',\n  'webmasters',\n  'computational',\n  'acdbentity',\n  'participated',\n  'handhelds',\n  'answering',\n  'impressed',\n  'conspiracy',\n  'organizer',\n  'combinations',\n  'preceding',\n  'cumulative',\n  'amplifier',\n  'arbitrary',\n  'prominent',\n  'lexington',\n  'contacted',\n  'recorders',\n  'occasional',\n  'innovations',\n  'postcards',\n  'reviewing',\n  'explicitly',\n  'transsexual',\n  'citizenship',\n  'informative',\n  'girlfriend',\n  'bloomberg',\n  'hierarchy',\n  'influenced',\n  'abandoned',\n  'complement',\n  'mauritius',\n  'checklist',\n  'requesting',\n  'lauderdale',\n  'scenarios',\n  'extraction',\n  'elevation',\n  'utilization',\n  'beverages',\n  'calibration',\n  'efficiently',\n  'entertaining',\n  'prerequisite',\n  'hypothesis',\n  'medicines',\n  'regression',\n  'enhancements',\n  'renewable',\n  'intersection',\n  'passwords',\n  'consistency',\n  'collectors',\n  'azerbaijan',\n  'astrology',\n  'occurring',\n  'supplemental',\n  'travelling',\n  'induction',\n  'precisely',\n  'spreading',\n  'provinces',\n  'widespread',\n  'incidence',\n  'incidents',\n  'enhancing',\n  'interference',\n  'palestine',\n  'listprice',\n  'atmospheric',\n  'knowledgestorm',\n  'referenced',\n  'publicity',\n  'proposition',\n  'allowance',\n  'designation',\n  'duplicate',\n  'criterion',\n  'civilization',\n  'vietnamese',\n  'tremendous',\n  'corrected',\n  'encountered',\n  'internationally',\n  'surrounded',\n  'creatures',\n  'commented',\n  'accomplish',\n  'vegetarian',\n  'newfoundland',\n  'investigated',\n  'ambassador',\n  'stephanie',\n  'contacting',\n  'vegetation',\n  'findarticles',\n  'specially',\n  'infectious',\n  'continuity',\n  'phenomenon',\n  'conscious',\n  'referrals',\n  'differently',\n  'integrating',\n  'revisions',\n  'reasoning',\n  'charitable',\n  'annotated',\n  'convinced',\n  'burlington',\n  'replacing',\n  'researcher',\n  'watershed',\n  'occupations',\n  'acknowledged',\n  'equilibrium',\n  'characterized',\n  'privilege',\n  'qualifying',\n  'estimation',\n  'pediatric',\n  'techrepublic',\n  'institutes',\n  'brochures',\n  'traveller',\n  'appropriations',\n  'suspected',\n  'benchmark',\n  'beginners',\n  'instructors',\n  'highlighted',\n  'stationery',\n  'unauthorized',\n  'competent',\n  'contributor',\n  'demonstrates',\n  'gradually',\n  'desirable',\n  'journalist',\n  'afterwards',\n  'religions',\n  'explosion',\n  'signatures',\n  'disciplines',\n  'daughters',\n  'conversations',\n  'simplified',\n  'motherboard',\n  'bibliographic',\n  'champagne',\n  'deviation',\n  'superintendent',\n  'housewives',\n  'influences',\n  'inspections',\n  'irrigation',\n  'hydraulic',\n  'robertson',\n  'penetration',\n  'conviction',\n  'omissions',\n  'retrieval',\n  'qualities',\n  'prototype',\n  'importantly',\n  'apparatus',\n  'explaining',\n  'nomination',\n  'empirical',\n  'dependence',\n  'sexuality',\n  'polyester',\n  'commitments',\n  'suggesting',\n  'remainder',\n  'privileges',\n  'televisions',\n  'specializing',\n  'commodities',\n  'motorcycles',\n  'concentrate',\n  'reproductive',\n  'molecules',\n  'refrigerator',\n  'intervals',\n  'sentences',\n  'exclusion',\n  'workstation',\n  'holocaust',\n  'receivers',\n  'disposition',\n  'navigator',\n  'investigators',\n  'marijuana',\n  'cathedral',\n  'fairfield',\n  'fascinating',\n  'landscapes',\n  'lafayette',\n  'computation',\n  'cardiovascular',\n  'salvation',\n  'predictions',\n  'accompanying',\n  'selective',\n  'arbitration',\n  'configuring',\n  'editorials',\n  'sacrifice',\n  'removable',\n  'convergence',\n  'gibraltar',\n  'anthropology',\n  'malpractice',\n  'reporters',\n  'necessity',\n  'rendering',\n  'hepatitis',\n  'nationally',\n  'waterproof',\n  'specialties',\n  'humanitarian',\n  'invitations',\n  'functioning',\n  'economies',\n  'alexandria',\n  'bacterial',\n  'undertake',\n  'continuously',\n  'achievements',\n  'convertible',\n  'secretariat',\n  'paragraphs',\n  'adolescent',\n  'nominations',\n  'cancelled',\n  'introductory',\n  'reservoir',\n  'occurrence',\n  'worcester',\n  'demographic',\n  'disciplinary',\n  'respected',\n  'portraits',\n  'interpreted',\n  'evaluations',\n  'elimination',\n  'hypothetical',\n  'immigrants',\n  'complimentary',\n  'helicopter',\n  'performer',\n  'commissions',\n  'powerseller',\n  'graduated',\n  'surprising',\n  'unnecessary',\n  'dramatically',\n  'yugoslavia',\n  'characterization',\n  'likelihood',\n  'fundamentals',\n  'contamination',\n  'endangered',\n  'compromise',\n  'expiration',\n  'namespace',\n  'peripheral',\n  'negotiation',\n  'opponents',\n  'nominated',\n  'confidentiality',\n  'electoral',\n  'changelog',\n  'alternatively',\n  'greensboro',\n  'controversial',\n  'recovered',\n  'upgrading',\n  'frontpage',\n  'demanding',\n  'defensive',\n  'forbidden',\n  'programmers',\n  'monitored',\n  'installations',\n  'deutschland',\n  'practitioner',\n  'motivated',\n  'smithsonian',\n  'examining',\n  'revelation',\n  'delegation',\n  'dictionaries',\n  'greenhouse',\n  'transparency',\n  'currencies',\n  'survivors',\n  'positioning',\n  'descending',\n  'temporarily',\n  'frequencies',\n  'reflections',\n  'municipality',\n  'detective',\n  'experiencing',\n  'fireplace',\n  'endorsement',\n  'psychiatry',\n  'persistent',\n  'summaries',\n  'looksmart',\n  'magnificent',\n  'colleague',\n  'adaptation',\n  'paintball',\n  'enclosure',\n  'supervisors',\n  'westminster',\n  'distances',\n  'absorption',\n  'treasures',\n  'transcripts',\n  'disappointed',\n  'continually',\n  'communist',\n  'collectible',\n  'entrepreneurs',\n  'creations',\n  'acquisitions',\n  'biodiversity',\n  'excitement',\n  'presently',\n  'mysterious',\n  'librarian',\n  'subsidiaries',\n  'stockholm',\n  'indonesian',\n  'therapist',\n  'promising',\n  'relaxation',\n  'thereafter',\n  'commissioners',\n  'forwarding',\n  'nightmare',\n  'reductions',\n  'southampton',\n  'organisms',\n  'telescope',\n  'portsmouth',\n  'advancement',\n  'harassment',\n  'generators',\n  'generates',\n  'replication',\n  'inexpensive',\n  'receptors',\n  'interventions',\n  'huntington',\n  'internship',\n  'aluminium',\n  'snowboard',\n  'beastality',\n  'evanescence',\n  'coordinated',\n  'shipments',\n  'antarctica',\n  'chancellor',\n  'controversy',\n  'legendary',\n  'beautifully',\n  'antibodies',\n  'examinations',\n  'immunology',\n  'departmental',\n  'terminology',\n  'gentleman',\n  'reproduce',\n  'convicted',\n  'roommates',\n  'threatening',\n  'spokesman',\n  'activists',\n  'frankfurt',\n  'encourages',\n  'assembled',\n  'restructuring',\n  'terminals',\n  'simulations',\n  'sufficiently',\n  'conditional',\n  'crossword',\n  'conceptual',\n  'liechtenstein',\n  'translator',\n  'automobiles',\n  'continent',\n  'longitude',\n  'challenged',\n  'telecharger',\n  'insertion',\n  'instrumentation',\n  'constraint',\n  'groundwater',\n  'strengthening',\n  'insulation',\n  'infringement',\n  'subjective',\n  'swaziland',\n  'varieties',\n  'mediawiki',\n  'configurations',\n];\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport type { ElementFormatType } from 'lexical';\nimport type { JSX } from 'react';\nimport { createContext, type ReactNode, useCallback, useContext, useEffect, useMemo, useState } from 'react';\n\nexport const MIN_ALLOWED_FONT_SIZE = 8;\nexport const MAX_ALLOWED_FONT_SIZE = 72;\nexport const DEFAULT_FONT_SIZE = 15;\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst rootTypeToRootName = {\n  root: 'Root',\n  table: 'Table',\n};\n\nexport const blockTypeToBlockName = {\n  bullet: 'Bulleted List',\n  check: 'Check List',\n  code: 'Code Block',\n  h1: 'Heading 1',\n  h2: 'Heading 2',\n  h3: 'Heading 3',\n  h4: 'Heading 4',\n  h5: 'Heading 5',\n  h6: 'Heading 6',\n  number: 'Numbered List',\n  paragraph: 'Normal',\n  quote: 'Quote',\n};\n\n//disable eslint sorting rule for quick reference to toolbar state\n/* eslint-disable sort-keys-fix/sort-keys-fix */\nconst INITIAL_TOOLBAR_STATE = {\n  bgColor: '#fff',\n  blockType: 'paragraph' as keyof typeof blockTypeToBlockName,\n  canRedo: false,\n  canUndo: false,\n  codeLanguage: '',\n  codeTheme: '',\n  elementFormat: 'left' as ElementFormatType,\n  fontColor: '#000',\n  fontFamily: 'Arial',\n  // Current font size in px\n  fontSize: `${DEFAULT_FONT_SIZE}px`,\n  // Font size input value - for controlled input\n  fontSizeInputValue: `${DEFAULT_FONT_SIZE}`,\n  isBold: false,\n  isCode: false,\n  isHighlight: false,\n  isImageCaption: false,\n  isItalic: false,\n  isLink: false,\n  isRTL: false,\n  isStrikethrough: false,\n  isSubscript: false,\n  isSuperscript: false,\n  isUnderline: false,\n  isLowercase: false,\n  isUppercase: false,\n  isCapitalize: false,\n  rootType: 'root' as keyof typeof rootTypeToRootName,\n  listStartNumber: null as number | null,\n};\n\ntype ToolbarState = typeof INITIAL_TOOLBAR_STATE;\n\n// Utility type to get keys and infer value types\ntype ToolbarStateKey = keyof ToolbarState;\ntype ToolbarStateValue<Key extends ToolbarStateKey> = ToolbarState[Key];\n\ntype ContextShape = {\n  toolbarState: ToolbarState;\n  updateToolbarState<Key extends ToolbarStateKey>(key: Key, value: ToolbarStateValue<Key>): void;\n};\n\nconst Context = createContext<ContextShape | undefined>(undefined);\n\nexport const ToolbarContext = ({ children }: { children: ReactNode }): JSX.Element => {\n  const [toolbarState, setToolbarState] = useState(INITIAL_TOOLBAR_STATE);\n  const selectionFontSize = toolbarState.fontSize;\n\n  const updateToolbarState = useCallback(<Key extends ToolbarStateKey>(key: Key, value: ToolbarStateValue<Key>) => {\n    setToolbarState((prev) => ({\n      ...prev,\n      [key]: value,\n    }));\n  }, []);\n\n  useEffect(() => {\n    updateToolbarState('fontSizeInputValue', selectionFontSize.slice(0, -2));\n  }, [selectionFontSize, updateToolbarState]);\n\n  const contextValue = useMemo(() => {\n    return {\n      toolbarState,\n      updateToolbarState,\n    };\n  }, [toolbarState, updateToolbarState]);\n\n  return <Context.Provider value={contextValue}>{children}</Context.Provider>;\n};\n\nexport const useToolbarState = () => {\n  const context = useContext(Context);\n\n  if (context === undefined) {\n    throw new Error('useToolbarState must be used within a ToolbarProvider');\n  }\n\n  return context;\n};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { IS_CHROME } from '@lexical/utils';\nimport {\n  $getSiblingCaret,\n  $isElementNode,\n  $rewindSiblingCaret,\n  type DOMConversionMap,\n  type DOMConversionOutput,\n  type DOMExportOutput,\n  type EditorConfig,\n  ElementNode,\n  isHTMLElement,\n  type LexicalEditor,\n  type LexicalNode,\n  type NodeKey,\n  type RangeSelection,\n  type SerializedElementNode,\n  type Spread,\n} from 'lexical';\n\nimport { setDomHiddenUntilFound } from './CollapsibleUtils';\n\ntype SerializedCollapsibleContainerNode = Spread<\n  {\n    open: boolean;\n  },\n  SerializedElementNode\n>;\n\nexport function $convertDetailsElement(domNode: HTMLDetailsElement): DOMConversionOutput | null {\n  const isOpen = domNode.open !== undefined ? domNode.open : true;\n  const node = $createCollapsibleContainerNode(isOpen);\n  return {\n    node,\n  };\n}\n\nexport class CollapsibleContainerNode extends ElementNode {\n  __open: boolean;\n\n  constructor(open: boolean, key?: NodeKey) {\n    super(key);\n    this.__open = open;\n  }\n\n  static getType(): string {\n    return 'collapsible-container';\n  }\n\n  static clone(node: CollapsibleContainerNode): CollapsibleContainerNode {\n    return new CollapsibleContainerNode(node.__open, node.__key);\n  }\n\n  isShadowRoot(): boolean {\n    return true;\n  }\n\n  collapseAtStart(_selection: RangeSelection): boolean {\n    // Unwrap the CollapsibleContainerNode by replacing it with the children\n    // of its children (CollapsibleTitleNode, CollapsibleContentNode)\n    const nodesToInsert: LexicalNode[] = [];\n    for (const child of this.getChildren()) {\n      if ($isElementNode(child)) {\n        nodesToInsert.push(...child.getChildren());\n      }\n    }\n    const caret = $rewindSiblingCaret($getSiblingCaret(this, 'previous'));\n    caret.splice(1, nodesToInsert);\n    // Merge the first child of the CollapsibleTitleNode with the\n    // previous sibling of the CollapsibleContainerNode\n    const [firstChild] = nodesToInsert;\n    if (firstChild) {\n      firstChild.selectStart().deleteCharacter(true);\n    }\n    return true;\n  }\n\n  createDOM(_config: EditorConfig, editor: LexicalEditor): HTMLElement {\n    // details is not well supported in Chrome #5582\n    let dom: HTMLElement;\n    if (IS_CHROME) {\n      dom = document.createElement('div');\n      dom.setAttribute('open', '');\n    } else {\n      const detailsDom = document.createElement('details');\n      detailsDom.open = this.__open;\n      detailsDom.addEventListener('toggle', () => {\n        const open = editor.getEditorState().read(() => this.getOpen());\n        if (open !== detailsDom.open) {\n          editor.update(() => this.toggleOpen());\n        }\n      });\n      dom = detailsDom;\n    }\n    dom.classList.add('Collapsible__container');\n\n    return dom;\n  }\n\n  updateDOM(prevNode: this, dom: HTMLDetailsElement): boolean {\n    const currentOpen = this.__open;\n    if (prevNode.__open !== currentOpen) {\n      // details is not well supported in Chrome #5582\n      if (IS_CHROME) {\n        const contentDom = dom.children[1];\n        if (!isHTMLElement(contentDom)) {\n          throw new Error('Expected contentDom to be an HTMLElement');\n        }\n        if (currentOpen) {\n          dom.setAttribute('open', '');\n          contentDom.hidden = false;\n        } else {\n          dom.removeAttribute('open');\n          setDomHiddenUntilFound(contentDom);\n        }\n      } else {\n        dom.open = this.__open;\n      }\n    }\n\n    return false;\n  }\n\n  static importDOM(): DOMConversionMap<HTMLDetailsElement> | null {\n    return {\n      details: (_domNode: HTMLDetailsElement) => {\n        return {\n          conversion: $convertDetailsElement,\n          priority: 1,\n        };\n      },\n    };\n  }\n\n  static importJSON(serializedNode: SerializedCollapsibleContainerNode): CollapsibleContainerNode {\n    return $createCollapsibleContainerNode(serializedNode.open).updateFromJSON(serializedNode);\n  }\n\n  exportDOM(): DOMExportOutput {\n    const element = document.createElement('details');\n    element.classList.add('Collapsible__container');\n    element.setAttribute('open', this.__open.toString());\n    return { element };\n  }\n\n  exportJSON(): SerializedCollapsibleContainerNode {\n    return {\n      ...super.exportJSON(),\n      open: this.__open,\n    };\n  }\n\n  setOpen(open: boolean): void {\n    const writable = this.getWritable();\n    writable.__open = open;\n  }\n\n  getOpen(): boolean {\n    return this.getLatest().__open;\n  }\n\n  toggleOpen(): void {\n    this.setOpen(!this.getOpen());\n  }\n}\n\nexport function $createCollapsibleContainerNode(isOpen: boolean): CollapsibleContainerNode {\n  return new CollapsibleContainerNode(isOpen);\n}\n\nexport function $isCollapsibleContainerNode(node: LexicalNode | null | undefined): node is CollapsibleContainerNode {\n  return node instanceof CollapsibleContainerNode;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nexport function setDomHiddenUntilFound(dom: HTMLElement): void {\n  // @ts-expect-error\n  dom.hidden = 'until-found';\n}\n\nexport function domOnBeforeMatch(dom: HTMLElement, callback: () => void): void {\n  dom.onbeforematch = callback;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { IS_CHROME } from '@lexical/utils';\nimport {\n  type DOMConversionMap,\n  type DOMConversionOutput,\n  type DOMExportOutput,\n  type EditorConfig,\n  ElementNode,\n  type LexicalEditor,\n  type LexicalNode,\n  type SerializedElementNode,\n} from 'lexical';\n\nimport { $isCollapsibleContainerNode } from './CollapsibleContainerNode';\nimport { domOnBeforeMatch, setDomHiddenUntilFound } from './CollapsibleUtils';\n\ntype SerializedCollapsibleContentNode = SerializedElementNode;\n\nexport function $convertCollapsibleContentElement(_domNode: HTMLElement): DOMConversionOutput | null {\n  const node = $createCollapsibleContentNode();\n  return {\n    node,\n  };\n}\n\nexport class CollapsibleContentNode extends ElementNode {\n  static getType(): string {\n    return 'collapsible-content';\n  }\n\n  static clone(node: CollapsibleContentNode): CollapsibleContentNode {\n    return new CollapsibleContentNode(node.__key);\n  }\n\n  createDOM(_config: EditorConfig, editor: LexicalEditor): HTMLElement {\n    const dom = document.createElement('div');\n    dom.classList.add('Collapsible__content');\n    if (IS_CHROME) {\n      editor.getEditorState().read(() => {\n        const containerNode = this.getParentOrThrow();\n        if (!$isCollapsibleContainerNode(containerNode)) {\n          throw new Error('Expected parent node to be a CollapsibleContainerNode');\n        }\n        if (!containerNode.__open) {\n          setDomHiddenUntilFound(dom);\n        }\n      });\n      domOnBeforeMatch(dom, () => {\n        editor.update(() => {\n          const containerNode = this.getParentOrThrow().getLatest();\n          if (!$isCollapsibleContainerNode(containerNode)) {\n            throw new Error('Expected parent node to be a CollapsibleContainerNode');\n          }\n          if (!containerNode.__open) {\n            containerNode.toggleOpen();\n          }\n        });\n      });\n    }\n    return dom;\n  }\n\n  updateDOM(_prevNode: this, _dom: HTMLElement): boolean {\n    return false;\n  }\n\n  static importDOM(): DOMConversionMap | null {\n    return {\n      div: (domNode: HTMLElement) => {\n        if (!domNode.hasAttribute('data-lexical-collapsible-content')) {\n          return null;\n        }\n        return {\n          conversion: $convertCollapsibleContentElement,\n          priority: 2,\n        };\n      },\n    };\n  }\n\n  exportDOM(): DOMExportOutput {\n    const element = document.createElement('div');\n    element.classList.add('Collapsible__content');\n    element.setAttribute('data-lexical-collapsible-content', 'true');\n    return { element };\n  }\n\n  static importJSON(serializedNode: SerializedCollapsibleContentNode): CollapsibleContentNode {\n    return $createCollapsibleContentNode().updateFromJSON(serializedNode);\n  }\n\n  isShadowRoot(): boolean {\n    return true;\n  }\n}\n\nexport function $createCollapsibleContentNode(): CollapsibleContentNode {\n  return new CollapsibleContentNode();\n}\n\nexport function $isCollapsibleContentNode(node: LexicalNode | null | undefined): node is CollapsibleContentNode {\n  return node instanceof CollapsibleContentNode;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { IS_CHROME } from '@lexical/utils';\nimport {\n  $createParagraphNode,\n  $isElementNode,\n  buildImportMap,\n  type DOMConversionOutput,\n  type EditorConfig,\n  ElementNode,\n  type LexicalEditor,\n  type LexicalNode,\n  type RangeSelection,\n} from 'lexical';\n\nimport { $isCollapsibleContainerNode } from './CollapsibleContainerNode';\nimport { $isCollapsibleContentNode } from './CollapsibleContentNode';\n\nexport function $convertSummaryElement(_domNode: HTMLElement): DOMConversionOutput | null {\n  const node = $createCollapsibleTitleNode();\n  return {\n    node,\n  };\n}\n\n/** @noInheritDoc */\nexport class CollapsibleTitleNode extends ElementNode {\n  /** @internal */\n  $config() {\n    return this.config('collapsible-title', {\n      $transform(node: CollapsibleTitleNode) {\n        if (node.isEmpty()) {\n          node.remove();\n        }\n      },\n      extends: ElementNode,\n      importDOM: buildImportMap({\n        summary: () => ({\n          conversion: $convertSummaryElement,\n          priority: 1,\n        }),\n      }),\n    });\n  }\n\n  createDOM(_config: EditorConfig, editor: LexicalEditor): HTMLElement {\n    const dom = document.createElement('summary');\n    dom.classList.add('Collapsible__title');\n    if (IS_CHROME) {\n      dom.addEventListener('click', () => {\n        editor.update(() => {\n          const collapsibleContainer = this.getLatest().getParentOrThrow();\n          if (!$isCollapsibleContainerNode(collapsibleContainer)) {\n            throw new Error('Expected parent node to be a CollapsibleContainerNode');\n          }\n          collapsibleContainer.toggleOpen();\n        });\n      });\n    }\n    return dom;\n  }\n\n  updateDOM(_prevNode: this, _dom: HTMLElement): boolean {\n    return false;\n  }\n\n  insertNewAfter(_: RangeSelection, restoreSelection = true): ElementNode {\n    const containerNode = this.getParentOrThrow();\n\n    if (!$isCollapsibleContainerNode(containerNode)) {\n      throw new Error('CollapsibleTitleNode expects to be child of CollapsibleContainerNode');\n    }\n\n    if (containerNode.getOpen()) {\n      const contentNode = this.getNextSibling();\n      if (!$isCollapsibleContentNode(contentNode)) {\n        throw new Error('CollapsibleTitleNode expects to have CollapsibleContentNode sibling');\n      }\n\n      const firstChild = contentNode.getFirstChild();\n      if ($isElementNode(firstChild)) {\n        return firstChild;\n      } else {\n        const paragraph = $createParagraphNode();\n        contentNode.append(paragraph);\n        return paragraph;\n      }\n    } else {\n      const paragraph = $createParagraphNode();\n      containerNode.insertAfter(paragraph, restoreSelection);\n      return paragraph;\n    }\n  }\n}\n\nexport function $createCollapsibleTitleNode(): CollapsibleTitleNode {\n  return new CollapsibleTitleNode();\n}\n\nexport function $isCollapsibleTitleNode(node: LexicalNode | null | undefined): node is CollapsibleTitleNode {\n  return node instanceof CollapsibleTitleNode;\n}\n","/**\n * @coati/editor/nodes - „Ç´„Çπ„Çø„É†„Éé„Éº„ÉâÂÆöÁæ©\n *\n * Lexical „Ç´„Çπ„Çø„É†„Éé„Éº„Éâ„ÅÆ„Ç®„ÇØ„Çπ„Éù„Éº„Éà\n */\n\n// AutocompleteNode\nexport { $createAutocompleteNode, AutocompleteNode } from './AutocompleteNode';\n\n// CollapsibleNodeÔºà„Éó„É©„Ç∞„Ç§„É≥„Éá„Ç£„É¨„ÇØ„Éà„É™„Åã„ÇâÔºâ\nexport {\n  $createCollapsibleContainerNode,\n  $isCollapsibleContainerNode,\n  CollapsibleContainerNode,\n} from '../plugins/CollapsiblePlugin/CollapsibleContainerNode';\nexport {\n  $createCollapsibleContentNode,\n  $isCollapsibleContentNode,\n  CollapsibleContentNode,\n} from '../plugins/CollapsiblePlugin/CollapsibleContentNode';\nexport {\n  $createCollapsibleTitleNode,\n  $isCollapsibleTitleNode,\n  CollapsibleTitleNode,\n} from '../plugins/CollapsiblePlugin/CollapsibleTitleNode';\n\n// DateTimeNode\nexport { $createDateTimeNode, $isDateTimeNode, DateTimeNode } from './DateTimeNode/DateTimeNode';\n\n// EmojiNode\nexport { $createEmojiNode, $isEmojiNode, EmojiNode } from './EmojiNode';\n\n// EquationNode\nexport { $createEquationNode, $isEquationNode, EquationNode } from './EquationNode';\nexport { default as EquationComponent } from './EquationComponent';\n\n// FigmaNode\nexport { $createFigmaNode, $isFigmaNode, FigmaNode } from './FigmaNode';\n\n// ImageNode\nexport { $createImageNode, $isImageNode, ImageNode } from './ImageNode';\nexport type { ImagePayload, SerializedImageNode } from './ImageNode';\nexport { default as ImageComponent } from './ImageComponent';\n\n// KeywordNode\nexport { $createKeywordNode, $isKeywordNode, KeywordNode } from './KeywordNode';\n\n// LayoutNode\nexport { $createLayoutContainerNode, $isLayoutContainerNode, LayoutContainerNode } from './LayoutContainerNode';\nexport { $createLayoutItemNode, $isLayoutItemNode, LayoutItemNode } from './LayoutItemNode';\n\n// MentionNode\nexport { $createMentionNode, $isMentionNode, MentionNode } from './MentionNode';\n\n// PageBreakNode\nexport { $createPageBreakNode, $isPageBreakNode, PageBreakNode } from './PageBreakNode';\n\n// SpecialTextNode\nexport { $createSpecialTextNode, $isSpecialTextNode, SpecialTextNode } from './SpecialTextNode';\n\n// StickyNode\nexport { $createStickyNode, $isStickyNode, StickyNode } from './StickyNode';\nexport { default as StickyComponent } from './StickyComponent';\n\n// TweetNode\nexport { $createTweetNode, $isTweetNode, TweetNode } from './TweetNode';\n\n// YouTubeNode\nexport { $createYouTubeNode, $isYouTubeNode, YouTubeNode } from './YouTubeNode';\n\n// NotionLikeEditorNodesÔºàÂÖ®„Éé„Éº„Éâ„ÅÆÈÖçÂàóÔºâ\nexport { default as NotionLikeEditorNodes } from './NotionLikeEditorNodes';\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { BlockWithAlignableContents } from '@lexical/react/LexicalBlockWithAlignableContents';\nimport { DecoratorBlockNode, type SerializedDecoratorBlockNode } from '@lexical/react/LexicalDecoratorBlockNode';\nimport type { EditorConfig, ElementFormatType, LexicalEditor, LexicalNode, NodeKey, Spread } from 'lexical';\nimport type { JSX } from 'react';\n\ntype FigmaComponentProps = Readonly<{\n  className: Readonly<{\n    base: string;\n    focus: string;\n  }>;\n  format: ElementFormatType | null;\n  nodeKey: NodeKey;\n  documentID: string;\n}>;\n\nfunction FigmaComponent({ className, format, nodeKey, documentID }: FigmaComponentProps) {\n  return (\n    <BlockWithAlignableContents className={className} format={format} nodeKey={nodeKey}>\n      <iframe\n        width=\"560\"\n        height=\"315\"\n        src={`https://www.figma.com/embed?embed_host=lexical&url=\\\n        https://www.figma.com/file/${documentID}`}\n        allowFullScreen={true}\n      />\n    </BlockWithAlignableContents>\n  );\n}\n\nexport type SerializedFigmaNode = Spread<\n  {\n    documentID: string;\n  },\n  SerializedDecoratorBlockNode\n>;\n\nexport class FigmaNode extends DecoratorBlockNode {\n  __id: string;\n\n  static getType(): string {\n    return 'figma';\n  }\n\n  static clone(node: FigmaNode): FigmaNode {\n    return new FigmaNode(node.__id, node.__format, node.__key);\n  }\n\n  static importJSON(serializedNode: SerializedFigmaNode): FigmaNode {\n    return $createFigmaNode(serializedNode.documentID).updateFromJSON(serializedNode);\n  }\n\n  exportJSON(): SerializedFigmaNode {\n    return {\n      ...super.exportJSON(),\n      documentID: this.__id,\n    };\n  }\n\n  constructor(id: string, format?: ElementFormatType, key?: NodeKey) {\n    super(format, key);\n    this.__id = id;\n  }\n\n  updateDOM(): false {\n    return false;\n  }\n\n  getId(): string {\n    return this.__id;\n  }\n\n  getTextContent(_includeInert?: boolean | undefined, _includeDirectionless?: false | undefined): string {\n    return `https://www.figma.com/file/${this.__id}`;\n  }\n\n  decorate(_editor: LexicalEditor, config: EditorConfig): JSX.Element {\n    const embedBlockTheme = config.theme.embedBlock || {};\n    const className = {\n      base: embedBlockTheme.base || '',\n      focus: embedBlockTheme.focus || '',\n    };\n    return (\n      <FigmaComponent className={className} format={this.__format} nodeKey={this.getKey()} documentID={this.__id} />\n    );\n  }\n}\n\nexport function $createFigmaNode(documentID: string): FigmaNode {\n  return new FigmaNode(documentID);\n}\n\nexport function $isFigmaNode(node: FigmaNode | LexicalNode | null | undefined): node is FigmaNode {\n  return node instanceof FigmaNode;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { addClassNamesToElement } from '@lexical/utils';\nimport type {\n  DOMConversionMap,\n  DOMConversionOutput,\n  DOMExportOutput,\n  EditorConfig,\n  LexicalNode,\n  LexicalUpdateJSON,\n  NodeKey,\n  SerializedElementNode,\n  Spread,\n} from 'lexical';\nimport { ElementNode } from 'lexical';\n\nexport type SerializedLayoutContainerNode = Spread<\n  {\n    templateColumns: string;\n  },\n  SerializedElementNode\n>;\n\nfunction $convertLayoutContainerElement(domNode: HTMLElement): DOMConversionOutput | null {\n  const styleAttributes = window.getComputedStyle(domNode);\n  const templateColumns = styleAttributes.getPropertyValue('grid-template-columns');\n  if (templateColumns) {\n    const node = $createLayoutContainerNode(templateColumns);\n    return { node };\n  }\n  return null;\n}\n\nexport class LayoutContainerNode extends ElementNode {\n  __templateColumns: string;\n\n  constructor(templateColumns: string, key?: NodeKey) {\n    super(key);\n    this.__templateColumns = templateColumns;\n  }\n\n  static getType(): string {\n    return 'layout-container';\n  }\n\n  static clone(node: LayoutContainerNode): LayoutContainerNode {\n    return new LayoutContainerNode(node.__templateColumns, node.__key);\n  }\n\n  createDOM(config: EditorConfig): HTMLElement {\n    const dom = document.createElement('div');\n    dom.style.gridTemplateColumns = this.__templateColumns;\n    if (typeof config.theme.layoutContainer === 'string') {\n      addClassNamesToElement(dom, config.theme.layoutContainer);\n    }\n    return dom;\n  }\n\n  exportDOM(): DOMExportOutput {\n    const element = document.createElement('div');\n    element.style.gridTemplateColumns = this.__templateColumns;\n    element.setAttribute('data-lexical-layout-container', 'true');\n    return { element };\n  }\n\n  updateDOM(prevNode: this, dom: HTMLElement): boolean {\n    if (prevNode.__templateColumns !== this.__templateColumns) {\n      dom.style.gridTemplateColumns = this.__templateColumns;\n    }\n    return false;\n  }\n\n  static importDOM(): DOMConversionMap | null {\n    return {\n      div: (domNode: HTMLElement) => {\n        if (!domNode.hasAttribute('data-lexical-layout-container')) {\n          return null;\n        }\n        return {\n          conversion: $convertLayoutContainerElement,\n          priority: 2,\n        };\n      },\n    };\n  }\n\n  static importJSON(json: SerializedLayoutContainerNode): LayoutContainerNode {\n    return $createLayoutContainerNode().updateFromJSON(json);\n  }\n\n  updateFromJSON(serializedNode: LexicalUpdateJSON<SerializedLayoutContainerNode>): this {\n    return super.updateFromJSON(serializedNode).setTemplateColumns(serializedNode.templateColumns);\n  }\n\n  isShadowRoot(): boolean {\n    return true;\n  }\n\n  canBeEmpty(): boolean {\n    return false;\n  }\n\n  exportJSON(): SerializedLayoutContainerNode {\n    return {\n      ...super.exportJSON(),\n      templateColumns: this.__templateColumns,\n    };\n  }\n\n  getTemplateColumns(): string {\n    return this.getLatest().__templateColumns;\n  }\n\n  setTemplateColumns(templateColumns: string): this {\n    const self = this.getWritable();\n    self.__templateColumns = templateColumns;\n    return self;\n  }\n}\n\nexport function $createLayoutContainerNode(templateColumns: string = ''): LayoutContainerNode {\n  return new LayoutContainerNode(templateColumns);\n}\n\nexport function $isLayoutContainerNode(node: LexicalNode | null | undefined): node is LayoutContainerNode {\n  return node instanceof LayoutContainerNode;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { addClassNamesToElement } from '@lexical/utils';\nimport type { DOMConversionMap, DOMConversionOutput, EditorConfig, LexicalNode, SerializedElementNode } from 'lexical';\nimport { $isParagraphNode, ElementNode } from 'lexical';\n\nexport type SerializedLayoutItemNode = SerializedElementNode;\n\nfunction $convertLayoutItemElement(): DOMConversionOutput | null {\n  return { node: $createLayoutItemNode() };\n}\n\nexport function $isEmptyLayoutItemNode(node: LexicalNode): boolean {\n  if (!$isLayoutItemNode(node) || node.getChildrenSize() !== 1) {\n    return false;\n  }\n  const firstChild = node.getFirstChild();\n  return $isParagraphNode(firstChild) && firstChild.isEmpty();\n}\n\nexport class LayoutItemNode extends ElementNode {\n  static getType(): string {\n    return 'layout-item';\n  }\n\n  static clone(node: LayoutItemNode): LayoutItemNode {\n    return new LayoutItemNode(node.__key);\n  }\n\n  createDOM(config: EditorConfig): HTMLElement {\n    const dom = document.createElement('div');\n    dom.setAttribute('data-lexical-layout-item', 'true');\n    if (typeof config.theme.layoutItem === 'string') {\n      addClassNamesToElement(dom, config.theme.layoutItem);\n    }\n    return dom;\n  }\n\n  updateDOM(): boolean {\n    return false;\n  }\n\n  collapseAtStart(): boolean {\n    const parent = this.getParentOrThrow();\n    if (this.is(parent.getFirstChild()) && parent.getChildren().every($isEmptyLayoutItemNode)) {\n      parent.remove();\n      return true;\n    }\n    return false;\n  }\n\n  static importDOM(): DOMConversionMap | null {\n    return {\n      div: (domNode: HTMLElement) => {\n        if (!domNode.hasAttribute('data-lexical-layout-item')) {\n          return null;\n        }\n        return {\n          conversion: $convertLayoutItemElement,\n          priority: 2,\n        };\n      },\n    };\n  }\n\n  static importJSON(serializedNode: SerializedLayoutItemNode): LayoutItemNode {\n    return $createLayoutItemNode().updateFromJSON(serializedNode);\n  }\n\n  isShadowRoot(): boolean {\n    return true;\n  }\n}\n\nexport function $createLayoutItemNode(): LayoutItemNode {\n  return new LayoutItemNode();\n}\n\nexport function $isLayoutItemNode(node: LexicalNode | null | undefined): node is LayoutItemNode {\n  return node instanceof LayoutItemNode;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport type { JSX } from 'react';\n\nimport './index.css';\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';\nimport { useLexicalNodeSelection } from '@lexical/react/useLexicalNodeSelection';\nimport { mergeRegister } from '@lexical/utils';\nimport {\n  CLICK_COMMAND,\n  COMMAND_PRIORITY_HIGH,\n  COMMAND_PRIORITY_LOW,\n  DecoratorNode,\n  type DOMConversionMap,\n  type DOMConversionOutput,\n  type LexicalNode,\n  type NodeKey,\n  type SerializedLexicalNode,\n} from 'lexical';\nimport { useEffect } from 'react';\n\nexport type SerializedPageBreakNode = SerializedLexicalNode;\n\nfunction PageBreakComponent({ nodeKey }: { nodeKey: NodeKey }) {\n  const [editor] = useLexicalComposerContext();\n  const [isSelected, setSelected, clearSelection] = useLexicalNodeSelection(nodeKey);\n\n  useEffect(() => {\n    return mergeRegister(\n      editor.registerCommand(\n        CLICK_COMMAND,\n        (event: MouseEvent) => {\n          const pbElem = editor.getElementByKey(nodeKey);\n\n          if (event.target === pbElem) {\n            if (!event.shiftKey) {\n              clearSelection();\n            }\n            setSelected(!isSelected);\n            return true;\n          }\n\n          return false;\n        },\n        COMMAND_PRIORITY_LOW,\n      ),\n    );\n  }, [clearSelection, editor, isSelected, nodeKey, setSelected]);\n\n  useEffect(() => {\n    const pbElem = editor.getElementByKey(nodeKey);\n    if (pbElem !== null) {\n      pbElem.className = isSelected ? 'selected' : '';\n    }\n  }, [editor, isSelected, nodeKey]);\n\n  return null;\n}\n\nexport class PageBreakNode extends DecoratorNode<JSX.Element> {\n  static getType(): string {\n    return 'page-break';\n  }\n\n  static clone(node: PageBreakNode): PageBreakNode {\n    return new PageBreakNode(node.__key);\n  }\n\n  static importJSON(serializedNode: SerializedPageBreakNode): PageBreakNode {\n    return $createPageBreakNode().updateFromJSON(serializedNode);\n  }\n\n  static importDOM(): DOMConversionMap | null {\n    return {\n      figure: (domNode: HTMLElement) => {\n        const tp = domNode.getAttribute('type');\n        if (tp !== PageBreakNode.getType()) {\n          return null;\n        }\n\n        return {\n          conversion: $convertPageBreakElement,\n          priority: COMMAND_PRIORITY_HIGH,\n        };\n      },\n    };\n  }\n\n  createDOM(): HTMLElement {\n    const el = document.createElement('figure');\n    el.style.pageBreakAfter = 'always';\n    el.setAttribute('type', this.getType());\n    return el;\n  }\n\n  getTextContent(): string {\n    return '\\n';\n  }\n\n  isInline(): false {\n    return false;\n  }\n\n  updateDOM(): boolean {\n    return false;\n  }\n\n  decorate(): JSX.Element {\n    return <PageBreakComponent nodeKey={this.__key} />;\n  }\n}\n\nfunction $convertPageBreakElement(): DOMConversionOutput {\n  return { node: $createPageBreakNode() };\n}\n\nexport function $createPageBreakNode(): PageBreakNode {\n  return new PageBreakNode();\n}\n\nexport function $isPageBreakNode(node: LexicalNode | null | undefined): node is PageBreakNode {\n  return node instanceof PageBreakNode;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { addClassNamesToElement } from '@lexical/utils';\nimport type { EditorConfig, LexicalNode, SerializedTextNode } from 'lexical';\nimport { $applyNodeReplacement, TextNode } from 'lexical';\n\n/** @noInheritDoc */\nexport class SpecialTextNode extends TextNode {\n  static getType(): string {\n    return 'specialText';\n  }\n\n  static clone(node: SpecialTextNode): SpecialTextNode {\n    return new SpecialTextNode(node.__text, node.__key);\n  }\n\n  createDOM(config: EditorConfig): HTMLElement {\n    const dom = document.createElement('span');\n    addClassNamesToElement(dom, config.theme.specialText);\n    dom.textContent = this.getTextContent();\n    return dom;\n  }\n\n  updateDOM(prevNode: this, dom: HTMLElement, config: EditorConfig): boolean {\n    if (prevNode.__text.startsWith('[') && prevNode.__text.endsWith(']')) {\n      const strippedText = this.__text.substring(1, this.__text.length - 1); // Strip brackets again\n      dom.textContent = strippedText; // Update the text content\n    }\n\n    addClassNamesToElement(dom, config.theme.specialText);\n\n    return false;\n  }\n\n  static importJSON(serializedNode: SerializedTextNode): SpecialTextNode {\n    return $createSpecialTextNode().updateFromJSON(serializedNode);\n  }\n\n  isTextEntity(): true {\n    return true;\n  }\n  canInsertTextAfter(): boolean {\n    return false; // Prevents appending text to this node\n  }\n}\n\n/**\n * Creates a SpecialTextNode with the given text.\n * @param text - Text content for the SpecialTextNode.\n * @returns A new SpecialTextNode instance.\n */\nexport function $createSpecialTextNode(text = ''): SpecialTextNode {\n  return $applyNodeReplacement(new SpecialTextNode(text));\n}\n\n/**\n * Checks if a node is a SpecialTextNode.\n * @param node - Node to check.\n * @returns True if the node is a SpecialTextNode.\n */\nexport function $isSpecialTextNode(node: LexicalNode | null | undefined): node is SpecialTextNode {\n  return node instanceof SpecialTextNode;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { BlockWithAlignableContents } from '@lexical/react/LexicalBlockWithAlignableContents';\nimport { DecoratorBlockNode, type SerializedDecoratorBlockNode } from '@lexical/react/LexicalDecoratorBlockNode';\nimport type {\n  DOMConversionMap,\n  DOMConversionOutput,\n  DOMExportOutput,\n  EditorConfig,\n  ElementFormatType,\n  LexicalEditor,\n  LexicalNode,\n  NodeKey,\n  Spread,\n} from 'lexical';\nimport type { JSX } from 'react';\nimport { useCallback, useEffect, useRef, useState } from 'react';\n\nconst WIDGET_SCRIPT_URL = 'https://platform.twitter.com/widgets.js';\n\ntype TweetComponentProps = Readonly<{\n  className: Readonly<{\n    base: string;\n    focus: string;\n  }>;\n  format: ElementFormatType | null;\n  loadingComponent?: JSX.Element | string;\n  nodeKey: NodeKey;\n  onError?: (error: string) => void;\n  onLoad?: () => void;\n  tweetID: string;\n}>;\n\nfunction $convertTweetElement(domNode: HTMLDivElement): DOMConversionOutput | null {\n  const id = domNode.getAttribute('data-lexical-tweet-id');\n  if (id) {\n    const node = $createTweetNode(id);\n    return { node };\n  }\n  return null;\n}\n\nlet isTwitterScriptLoading = true;\n\nfunction TweetComponent({\n  className,\n  format,\n  loadingComponent,\n  nodeKey,\n  onError,\n  onLoad,\n  tweetID,\n}: TweetComponentProps) {\n  const containerRef = useRef<HTMLDivElement | null>(null);\n\n  const previousTweetIDRef = useRef<string>('');\n  const [isTweetLoading, setIsTweetLoading] = useState(false);\n\n  const createTweet = useCallback(async () => {\n    try {\n      // @ts-expect-error Twitter is attached to the window.\n      await window.twttr.widgets.createTweet(tweetID, containerRef.current);\n\n      setIsTweetLoading(false);\n      isTwitterScriptLoading = false;\n\n      if (onLoad) {\n        onLoad();\n      }\n    } catch (error) {\n      if (onError) {\n        onError(String(error));\n      }\n    }\n  }, [onError, onLoad, tweetID]);\n\n  useEffect(() => {\n    if (tweetID !== previousTweetIDRef.current) {\n      setIsTweetLoading(true);\n\n      if (isTwitterScriptLoading) {\n        const script = document.createElement('script');\n        script.src = WIDGET_SCRIPT_URL;\n        script.async = true;\n        document.body?.appendChild(script);\n        script.onload = createTweet;\n        if (onError) {\n          script.onerror = onError as OnErrorEventHandler;\n        }\n      } else {\n        createTweet();\n      }\n\n      if (previousTweetIDRef) {\n        previousTweetIDRef.current = tweetID;\n      }\n    }\n  }, [createTweet, onError, tweetID]);\n\n  return (\n    <BlockWithAlignableContents className={className} format={format} nodeKey={nodeKey}>\n      {isTweetLoading ? loadingComponent : null}\n      <div style={{ display: 'inline-block', width: '550px' }} ref={containerRef} />\n    </BlockWithAlignableContents>\n  );\n}\n\nexport type SerializedTweetNode = Spread<\n  {\n    id: string;\n  },\n  SerializedDecoratorBlockNode\n>;\n\nexport class TweetNode extends DecoratorBlockNode {\n  __id: string;\n\n  static getType(): string {\n    return 'tweet';\n  }\n\n  static clone(node: TweetNode): TweetNode {\n    return new TweetNode(node.__id, node.__format, node.__key);\n  }\n\n  static importJSON(serializedNode: SerializedTweetNode): TweetNode {\n    return $createTweetNode(serializedNode.id).updateFromJSON(serializedNode);\n  }\n\n  exportJSON(): SerializedTweetNode {\n    return {\n      ...super.exportJSON(),\n      id: this.getId(),\n    };\n  }\n\n  static importDOM(): DOMConversionMap<HTMLDivElement> | null {\n    return {\n      div: (domNode: HTMLDivElement) => {\n        if (!domNode.hasAttribute('data-lexical-tweet-id')) {\n          return null;\n        }\n        return {\n          conversion: $convertTweetElement,\n          priority: 2,\n        };\n      },\n    };\n  }\n\n  exportDOM(): DOMExportOutput {\n    const element = document.createElement('div');\n    element.setAttribute('data-lexical-tweet-id', this.__id);\n    const text = document.createTextNode(this.getTextContent());\n    element.append(text);\n    return { element };\n  }\n\n  constructor(id: string, format?: ElementFormatType, key?: NodeKey) {\n    super(format, key);\n    this.__id = id;\n  }\n\n  getId(): string {\n    return this.__id;\n  }\n\n  getTextContent(_includeInert?: boolean | undefined, _includeDirectionless?: false | undefined): string {\n    return `https://x.com/i/web/status/${this.__id}`;\n  }\n\n  decorate(_editor: LexicalEditor, config: EditorConfig): JSX.Element {\n    const embedBlockTheme = config.theme.embedBlock || {};\n    const className = {\n      base: embedBlockTheme.base || '',\n      focus: embedBlockTheme.focus || '',\n    };\n    return (\n      <TweetComponent\n        className={className}\n        format={this.__format}\n        loadingComponent=\"Loading...\"\n        nodeKey={this.getKey()}\n        tweetID={this.__id}\n      />\n    );\n  }\n}\n\nexport function $createTweetNode(tweetID: string): TweetNode {\n  return new TweetNode(tweetID);\n}\n\nexport function $isTweetNode(node: TweetNode | LexicalNode | null | undefined): node is TweetNode {\n  return node instanceof TweetNode;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { BlockWithAlignableContents } from '@lexical/react/LexicalBlockWithAlignableContents';\nimport { DecoratorBlockNode, type SerializedDecoratorBlockNode } from '@lexical/react/LexicalDecoratorBlockNode';\nimport type {\n  DOMConversionMap,\n  DOMConversionOutput,\n  DOMExportOutput,\n  EditorConfig,\n  ElementFormatType,\n  LexicalEditor,\n  LexicalNode,\n  NodeKey,\n  Spread,\n} from 'lexical';\nimport type { JSX } from 'react';\n\ntype YouTubeComponentProps = Readonly<{\n  className: Readonly<{\n    base: string;\n    focus: string;\n  }>;\n  format: ElementFormatType | null;\n  nodeKey: NodeKey;\n  videoID: string;\n}>;\n\nfunction YouTubeComponent({ className, format, nodeKey, videoID }: YouTubeComponentProps) {\n  return (\n    <BlockWithAlignableContents className={className} format={format} nodeKey={nodeKey}>\n      <iframe\n        width=\"560\"\n        height=\"315\"\n        src={`https://www.youtube-nocookie.com/embed/${videoID}`}\n        frameBorder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n        allowFullScreen={true}\n        title=\"YouTube video\"\n      />\n    </BlockWithAlignableContents>\n  );\n}\n\nexport type SerializedYouTubeNode = Spread<\n  {\n    videoID: string;\n  },\n  SerializedDecoratorBlockNode\n>;\n\nfunction $convertYoutubeElement(domNode: HTMLElement): null | DOMConversionOutput {\n  const videoID = domNode.getAttribute('data-lexical-youtube');\n  if (videoID) {\n    const node = $createYouTubeNode(videoID);\n    return { node };\n  }\n  return null;\n}\n\nexport class YouTubeNode extends DecoratorBlockNode {\n  __id: string;\n\n  static getType(): string {\n    return 'youtube';\n  }\n\n  static clone(node: YouTubeNode): YouTubeNode {\n    return new YouTubeNode(node.__id, node.__format, node.__key);\n  }\n\n  static importJSON(serializedNode: SerializedYouTubeNode): YouTubeNode {\n    return $createYouTubeNode(serializedNode.videoID).updateFromJSON(serializedNode);\n  }\n\n  exportJSON(): SerializedYouTubeNode {\n    return {\n      ...super.exportJSON(),\n      videoID: this.__id,\n    };\n  }\n\n  constructor(id: string, format?: ElementFormatType, key?: NodeKey) {\n    super(format, key);\n    this.__id = id;\n  }\n\n  exportDOM(): DOMExportOutput {\n    const element = document.createElement('iframe');\n    element.setAttribute('data-lexical-youtube', this.__id);\n    element.setAttribute('width', '560');\n    element.setAttribute('height', '315');\n    element.setAttribute('src', `https://www.youtube-nocookie.com/embed/${this.__id}`);\n    element.setAttribute('frameborder', '0');\n    element.setAttribute(\n      'allow',\n      'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture',\n    );\n    element.setAttribute('allowfullscreen', 'true');\n    element.setAttribute('title', 'YouTube video');\n    return { element };\n  }\n\n  static importDOM(): DOMConversionMap | null {\n    return {\n      iframe: (domNode: HTMLElement) => {\n        if (!domNode.hasAttribute('data-lexical-youtube')) {\n          return null;\n        }\n        return {\n          conversion: $convertYoutubeElement,\n          priority: 1,\n        };\n      },\n    };\n  }\n\n  updateDOM(): false {\n    return false;\n  }\n\n  getId(): string {\n    return this.__id;\n  }\n\n  getTextContent(_includeInert?: boolean | undefined, _includeDirectionless?: false | undefined): string {\n    return `https://www.youtube.com/watch?v=${this.__id}`;\n  }\n\n  decorate(_editor: LexicalEditor, config: EditorConfig): JSX.Element {\n    const embedBlockTheme = config.theme.embedBlock || {};\n    const className = {\n      base: embedBlockTheme.base || '',\n      focus: embedBlockTheme.focus || '',\n    };\n    return (\n      <YouTubeComponent className={className} format={this.__format} nodeKey={this.getKey()} videoID={this.__id} />\n    );\n  }\n}\n\nexport function $createYouTubeNode(videoID: string): YouTubeNode {\n  return new YouTubeNode(videoID);\n}\n\nexport function $isYouTubeNode(node: YouTubeNode | LexicalNode | null | undefined): node is YouTubeNode {\n  return node instanceof YouTubeNode;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { CodeHighlightNode, CodeNode } from '@lexical/code';\nimport { HashtagNode } from '@lexical/hashtag';\nimport { AutoLinkNode, LinkNode } from '@lexical/link';\nimport { ListItemNode, ListNode } from '@lexical/list';\nimport { MarkNode } from '@lexical/mark';\nimport { OverflowNode } from '@lexical/overflow';\nimport { HorizontalRuleNode } from '@lexical/react/LexicalHorizontalRuleNode';\nimport { HeadingNode, QuoteNode } from '@lexical/rich-text';\nimport { TableCellNode, TableNode, TableRowNode } from '@lexical/table';\nimport type { Klass, LexicalNode } from 'lexical';\nimport { CollapsibleContainerNode } from '../plugins/CollapsiblePlugin/CollapsibleContainerNode';\nimport { CollapsibleContentNode } from '../plugins/CollapsiblePlugin/CollapsibleContentNode';\nimport { CollapsibleTitleNode } from '../plugins/CollapsiblePlugin/CollapsibleTitleNode';\nimport { AutocompleteNode } from './AutocompleteNode';\nimport { DateTimeNode } from './DateTimeNode/DateTimeNode';\nimport { EmojiNode } from './EmojiNode';\nimport { EquationNode } from './EquationNode';\nimport { FigmaNode } from './FigmaNode';\nimport { ImageNode } from './ImageNode';\nimport { KeywordNode } from './KeywordNode';\nimport { LayoutContainerNode } from './LayoutContainerNode';\nimport { LayoutItemNode } from './LayoutItemNode';\nimport { MentionNode } from './MentionNode';\nimport { PageBreakNode } from './PageBreakNode';\nimport { SpecialTextNode } from './SpecialTextNode';\nimport { StickyNode } from './StickyNode';\nimport { TweetNode } from './TweetNode';\nimport { YouTubeNode } from './YouTubeNode';\n\nconst NotionLikeEditorNodes: Array<Klass<LexicalNode>> = [\n  HeadingNode,\n  ListNode,\n  ListItemNode,\n  QuoteNode,\n  CodeNode,\n  TableNode,\n  TableCellNode,\n  TableRowNode,\n  HashtagNode,\n  CodeHighlightNode,\n  AutoLinkNode,\n  LinkNode,\n  OverflowNode,\n  StickyNode,\n  ImageNode,\n  MentionNode,\n  EmojiNode,\n  EquationNode,\n  AutocompleteNode,\n  KeywordNode,\n  HorizontalRuleNode,\n  TweetNode,\n  YouTubeNode,\n  FigmaNode,\n  MarkNode,\n  CollapsibleContainerNode,\n  CollapsibleContentNode,\n  CollapsibleTitleNode,\n  PageBreakNode,\n  LayoutContainerNode,\n  LayoutItemNode,\n  SpecialTextNode,\n  DateTimeNode,\n];\n\nexport default NotionLikeEditorNodes;\n"],"mappings":"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A;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MAC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","names":["useLexicalComposerContext","$getNodeByKey","useEffect","useState","jsx","init_DateTimeNode","buildImportMap","jsx","node","DateTimeComponent","init_DateTimeNode","TextNode","hasArrayChanged","a","b","item","index","ErrorBoundaryContext","initialState","ErrorBoundary","createContext","Component","props","error","args","info","prevProps","prevState","didCatch","resetKeys","children","fallbackRender","FallbackComponent","fallback","childToRender","createElement","isHTMLElement","jsx","jsxs","init_EquationEditor","useEffect","useRef","jsx","jsxs","useLexicalComposerContext","mergeRegister","$getNodeByKey","$getSelection","useCallback","useEffect","useRef","useState","Fragment","jsx","init_EquationEditor","katex","$applyNodeReplacement","DecoratorNode","React","jsx","EquationComponent","$applyNodeReplacement","TextNode","createContext","useContext","useMemo","jsx","Context","useLexicalComposerContext","TextNode","useEffect","jsx","$applyNodeReplacement","TextNode","useLexicalComposerContext","useCallback","useEffect","useMemo","useState","jsx","jsxs","jsx","init_ContentEditable","useRef","jsx","jsxs","useLexicalComposerContext","useLexicalEditable","useLexicalNodeSelection","mergeRegister","$getNodeByKey","$getSelection","$isNodeSelection","$isRangeSelection","$setSelection","COMMAND_PRIORITY_LOW","KEY_ESCAPE_COMMAND","SELECTION_CHANGE_COMMAND","useCallback","useEffect","useMemo","useRef","useState","jsx","jsxs","init_ContentEditable","init_ImageNode","$applyNodeReplacement","$getRoot","$isElementNode","$setSelection","DecoratorNode","TextNode","React","jsx","ImageComponent","init_ImageNode","theme","init_NotionLikeEditorTheme","theme","init_StickyEditorTheme","init_NotionLikeEditorTheme","useLexicalComposerContext","LexicalErrorBoundary","LexicalNestedComposer","calculateZoomLevel","$getNodeByKey","useEffect","useRef","useState","createPortal","jsx","jsxs","y","init_StickyEditorTheme","init_ContentEditable","init_StickyNode","$setSelection","createEditor","DecoratorNode","React","jsx","StickyComponent","init_StickyNode","y","useCallback","useEffect","uuid","IS_CHROME","ElementNode","ElementNode","IS_CHROME","IS_CHROME","$isElementNode","ElementNode","ElementNode","IS_CHROME","$isElementNode","init_DateTimeNode","jsx","init_ImageNode","ElementNode","addClassNamesToElement","$isParagraphNode","ElementNode","useLexicalComposerContext","useLexicalNodeSelection","mergeRegister","CLICK_COMMAND","COMMAND_PRIORITY_HIGH","COMMAND_PRIORITY_LOW","DecoratorNode","useEffect","jsx","addClassNamesToElement","$applyNodeReplacement","TextNode","init_StickyNode","BlockWithAlignableContents","DecoratorBlockNode","useCallback","useEffect","useRef","useState","jsx","jsxs","BlockWithAlignableContents","DecoratorBlockNode","jsx","HashtagNode","LinkNode","init_DateTimeNode","init_ImageNode","init_StickyNode","HashtagNode","LinkNode"]}