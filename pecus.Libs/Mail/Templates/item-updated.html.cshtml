@model Pecus.Libs.Mail.Templates.Models.ItemUpdatedEmailModel
@using RazorLight.Text
@{
    Layout = "_Layout.html.cshtml";
}

<h2>アイテムが更新されました</h2>

<p>@Model.WorkspaceName でアイテムが更新されました。</p>

<table>
    <tr>
        <td class="label">アイテムコード</td>
        <td class="value">@Model.ItemCode</td>
    </tr>
    <tr>
        <td class="label">件名</td>
        <td>@Model.ItemTitle</td>
    </tr>
    @if (!string.IsNullOrWhiteSpace(Model.ItemType))
    {
        <tr>
            <td class="label">種別</td>
            <td>@Model.ItemType</td>
        </tr>
    }
    <tr>
        <td class="label">ワークスペース</td>
        <td>@Model.WorkspaceName (@Model.WorkspaceCode)</td>
    </tr>
</table>

@if (Model.Activities.Count > 0)
{
    <h3>更新内容</h3>
    <ul class="update-list">
        @foreach (var activity in Model.Activities)
        {
            <li>
                <strong>@activity.EffectMessage</strong>
                <br />
                <span class="update-meta">
                    @activity.UpdatedByName — @activity.UpdatedAt.ToString("yyyy/MM/dd HH:mm")
                </span>
            </li>
        }
    </ul>
}

@if (!string.IsNullOrWhiteSpace(Model.BodyHtml) || !string.IsNullOrWhiteSpace(Model.BodyText))
{
    <h3>本文</h3>
    @if (!string.IsNullOrWhiteSpace(Model.BodyHtml))
    {
        <div class="content-box">
            @(new RawString(Model.BodyHtml))
        </div>
    }
    else if (!string.IsNullOrWhiteSpace(Model.BodyText))
    {
        <div class="content-box pre">@Model.BodyText</div>
    }
}

<div class="center">
    <a href="@Model.ItemUrl" class="button">アイテムを確認</a>
</div>

<p class="muted">このメールに心当たりがない場合は、管理者またはサポートまでご連絡ください。</p>
