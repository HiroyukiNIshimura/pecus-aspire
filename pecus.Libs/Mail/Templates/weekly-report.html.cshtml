@model Pecus.Libs.Mail.Templates.Models.WeeklyReportEmailModel
@{
    Layout = "_Layout.html.cshtml";
}

<h2>ğŸ“Š é€±é–“ãƒ¬ãƒãƒ¼ãƒˆ</h2>
<p>@Model.OrganizationName ã® @Model.WeekStartDate.ToString("yyyy/MM/dd") ã€œ @Model.WeekEndDate.ToString("yyyy/MM/dd") ã®é€±é–“ã‚µãƒãƒªã‚’ãŠå±Šã‘ã—ã¾ã™ã€‚</p>

<hr class="section-divider" />

<h3>ğŸ“Š ã‚ãªãŸã®ä»Šé€±</h3>
<table>
    <tr>
        <td class="label">å®Œäº†ã—ãŸã‚¿ã‚¹ã‚¯</td>
        <td class="value-right">@Model.PersonalSummary.CompletedCount ä»¶</td>
    </tr>
    <tr>
        <td class="label">æ®‹ã‚Šã®ã‚¿ã‚¹ã‚¯</td>
        <td class="value-right">@Model.PersonalSummary.RemainingCount ä»¶</td>
    </tr>
    @if (Model.PersonalSummary.OverdueCount > 0)
    {
        <tr class="warning">
            <td class="label">âš ï¸ æœŸé™åˆ‡ã‚Œ</td>
            <td class="value-right">@Model.PersonalSummary.OverdueCount ä»¶</td>
        </tr>
    }
    else
    {
        <tr>
            <td class="label">æœŸé™åˆ‡ã‚Œ</td>
            <td class="value-right text-success">0 ä»¶</td>
        </tr>
    }
</table>

@if (Model.HasOwnerSection)
{
    <hr class="section-divider" />

    <h3>ğŸ¢ ã‚ãªãŸã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹</h3>

    foreach (var ws in Model.OwnerWorkspaces!)
    {
        <div class="card-box">
            <h4>â–  @ws.WorkspaceName</h4>

            <p>
                <strong>ã‚¿ã‚¹ã‚¯:</strong>
                é€²è¡Œä¸­ @ws.InProgressCount ä»¶ /
                å®Œäº† @ws.CompletedThisWeekCount ä»¶ /
                @if (ws.OverdueCount > 0)
                {
                    <span class="text-danger">æœŸé™åˆ‡ã‚Œ @ws.OverdueCount ä»¶ âš ï¸</span>
                }
                else
                {
                    <span>æœŸé™åˆ‡ã‚Œ 0 ä»¶</span>
                }
                / æ¥é€±æœŸé™ @ws.DueNextWeekCount ä»¶
            </p>

            @if (ws.HasCommitterItems)
            {
                <p><strong>ğŸ“‹ è²¬ä»»ã‚¢ã‚¤ãƒ†ãƒ :</strong></p>
                <ul>
                    @foreach (var item in ws.CommitterItems)
                    {
                        <li>
                            @item.ItemName:
                            @if (item.IsCompleted)
                            {
                                <span class="text-success">é€²æ— 100%ï¼ˆå®Œäº†ï¼‰</span>
                            }
                            else
                            {
                                <span>é€²æ— @item.ProgressPercent%ï¼ˆæ®‹ã‚Š @item.RemainingTaskCount</span>
                                @if (item.OverdueCount > 0)
                                {
                                    <span class="text-danger"> / æœŸé™åˆ‡ã‚Œ @item.OverdueCount âš ï¸</span>
                                }
                                @if (item.DueNextWeekCount > 0)
                                {
                                    <span> / æ¥é€±æœŸé™ @item.DueNextWeekCount</span>
                                }
                                <span>ï¼‰</span>
                            }
                        </li>
                    }
                </ul>
            }
        </div>
    }
}

<hr class="divider" />

<div class="center">
    <a href="@Model.DashboardUrl" class="button">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’é–‹ã</a>
</div>

<p class="small-text center">
    ã“ã®ãƒ¬ãƒãƒ¼ãƒˆã¯æ¯é€±è‡ªå‹•ã§é…ä¿¡ã•ã‚Œã¦ã„ã¾ã™ã€‚
</p>
