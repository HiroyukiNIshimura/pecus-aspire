@model Pecus.Libs.Mail.Templates.Models.WeeklyReportEmailModel
@{
    Layout = "_Layout.html.cshtml";
}

<h2>ğŸ“Š é€±é–“ãƒ¬ãƒãƒ¼ãƒˆ</h2>
<p>@Model.OrganizationName ã® @Model.WeekStartDate.ToString("yyyy/MM/dd") ã€œ @Model.WeekEndDate.ToString("yyyy/MM/dd") ã®é€±é–“ã‚µãƒãƒªã‚’ãŠå±Šã‘ã—ã¾ã™ã€‚</p>

<hr style="border:none; border-top:2px solid #1976d2; margin:24px 0;" />

<h3>ğŸ“Š ã‚ãªãŸã®ä»Šé€±</h3>
<table style="width:100%; border-collapse:collapse; margin-bottom:20px;">
    <tr>
        <td style="padding:8px; border:1px solid #ddd; background:#f9f9f9; width:50%;">å®Œäº†ã—ãŸã‚¿ã‚¹ã‚¯</td>
        <td style="padding:8px; border:1px solid #ddd; text-align:right; font-weight:bold;">@Model.PersonalSummary.CompletedCount ä»¶</td>
    </tr>
    <tr>
        <td style="padding:8px; border:1px solid #ddd; background:#f9f9f9;">æ®‹ã‚Šã®ã‚¿ã‚¹ã‚¯</td>
        <td style="padding:8px; border:1px solid #ddd; text-align:right; font-weight:bold;">@Model.PersonalSummary.RemainingCount ä»¶</td>
    </tr>
    @if (Model.PersonalSummary.OverdueCount > 0)
    {
        <tr>
            <td style="padding:8px; border:1px solid #ddd; background:#fff3cd;">âš ï¸ æœŸé™åˆ‡ã‚Œ</td>
            <td style="padding:8px; border:1px solid #ddd; text-align:right; font-weight:bold; color:#d32f2f;">@Model.PersonalSummary.OverdueCount ä»¶</td>
        </tr>
    }
    else
    {
        <tr>
            <td style="padding:8px; border:1px solid #ddd; background:#f9f9f9;">æœŸé™åˆ‡ã‚Œ</td>
            <td style="padding:8px; border:1px solid #ddd; text-align:right; font-weight:bold; color:#4caf50;">0 ä»¶</td>
        </tr>
    }
</table>

@if (Model.HasOwnerSection)
{
    <hr style="border:none; border-top:2px solid #1976d2; margin:24px 0;" />

    <h3>ğŸ¢ ã‚ãªãŸã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹</h3>

    foreach (var ws in Model.OwnerWorkspaces!)
    {
        <div style="background:#f5f5f5; border-radius:8px; padding:16px; margin-bottom:16px;">
            <h4 style="margin:0 0 12px 0; color:#1976d2;">â–  @ws.WorkspaceName</h4>

            <p style="margin:0 0 8px 0;">
                <strong>ã‚¿ã‚¹ã‚¯:</strong>
                é€²è¡Œä¸­ @ws.InProgressCount ä»¶ /
                å®Œäº† @ws.CompletedThisWeekCount ä»¶ /
                @if (ws.OverdueCount > 0)
                {
                    <span style="color:#d32f2f;">æœŸé™åˆ‡ã‚Œ @ws.OverdueCount ä»¶ âš ï¸</span>
                }
                else
                {
                    <span>æœŸé™åˆ‡ã‚Œ 0 ä»¶</span>
                }
                / æ¥é€±æœŸé™ @ws.DueNextWeekCount ä»¶
            </p>

            @if (ws.HasCommitterItems)
            {
                <p style="margin:12px 0 8px 0;"><strong>ğŸ“‹ è²¬ä»»ã‚¢ã‚¤ãƒ†ãƒ :</strong></p>
                <ul style="margin:0; padding-left:20px;">
                    @foreach (var item in ws.CommitterItems)
                    {
                        <li style="margin-bottom:4px;">
                            @item.ItemName:
                            @if (item.IsCompleted)
                            {
                                <span style="color:#4caf50;">é€²æ— 100%ï¼ˆå®Œäº†ï¼‰</span>
                            }
                            else
                            {
                                <span>é€²æ— @item.ProgressPercent%ï¼ˆæ®‹ã‚Š @item.RemainingTaskCount</span>
                                @if (item.OverdueCount > 0)
                                {
                                    <span style="color:#d32f2f;"> / æœŸé™åˆ‡ã‚Œ @item.OverdueCount âš ï¸</span>
                                }
                                @if (item.DueNextWeekCount > 0)
                                {
                                    <span> / æ¥é€±æœŸé™ @item.DueNextWeekCount</span>
                                }
                                <span>ï¼‰</span>
                            }
                        </li>
                    }
                </ul>
            }
        </div>
    }
}

<hr style="border:none; border-top:1px solid #ddd; margin:24px 0;" />

<div style="text-align:center; margin:20px 0;">
    <a href="@Model.DashboardUrl" class="button">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’é–‹ã</a>
</div>

<p style="font-size:14px; color:#666; text-align:center;">
    ã“ã®ãƒ¬ãƒãƒ¼ãƒˆã¯æ¯é€±è‡ªå‹•ã§é…ä¿¡ã•ã‚Œã¦ã„ã¾ã™ã€‚
</p>
